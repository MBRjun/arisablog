{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u9996\u9875 \u4e00\u4e2a\u5927\u56db\u5b66\u751f\u5199\u7684\u535a\u5ba2\uff0c\u76ee\u524d\u5341\u5206\u7b80\u964b\u3002\u8be5\u535a\u5ba2\u5747\u4e3a\u5b9e\u9a8c\u6027\u5185\u5bb9\uff0c\u4e0d\u4ee3\u8868\u4ee5\u540e\u6700\u7ec8\u6210\u54c1\u3002 \u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\u6784\u5efa\uff1a MkDocs Material for MkDocs mkdocs-blogging-plugin","title":"\u9996\u9875"},{"location":"#_1","text":"\u4e00\u4e2a\u5927\u56db\u5b66\u751f\u5199\u7684\u535a\u5ba2\uff0c\u76ee\u524d\u5341\u5206\u7b80\u964b\u3002\u8be5\u535a\u5ba2\u5747\u4e3a\u5b9e\u9a8c\u6027\u5185\u5bb9\uff0c\u4e0d\u4ee3\u8868\u4ee5\u540e\u6700\u7ec8\u6210\u54c1\u3002 \u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\u6784\u5efa\uff1a MkDocs Material for MkDocs mkdocs-blogging-plugin","title":"\u9996\u9875"},{"location":"tags/","text":"{{ tag_content }}","title":"\u6807\u7b7e"},{"location":"toc/","text":"{{ blog_content }}","title":"\u76ee\u5f55"},{"location":"blog/2022/220406-nginx-stream/","tags":["nginx","arcaea","stream"],"text":"\u80cc\u666f \u5e2e aw \u505a AUA \u8f6c\u53d1\u8282\u70b9\u7684\u65f6\u5019\u9047\u5230\u4e86\u8fd9\u4e2a\u9700\u6c42\uff0c\u56e0\u4e3a AUA \u9700\u8981\u9891\u7e41\u5411 616 \u8bf7\u6c42 API\uff0c\u4f46\u662f 616 \u5bf9 \u540c\u4e00\u4e2a IP \u7684\u8bf7\u6c42\u6570\u91cf\u6709\u9650\u5236\uff0c\u6240\u4ee5 AUA \u9700\u8981\u5927\u91cf\u7684\u8f6c\u53d1\u8282\u70b9\u6765\u7ef4\u6301\u4f7f\u7528\u3002 aw \u7684\u5efa\u8bae\u662f\u7528 socat (Linux server) \u6216\u8005 netsh (Windows server) Linux server Windows server socat -d TCP4-LISTEN:6161,reuseaddr,fork TCP4:arcapi-v2.lowiro.com:443 netsh interface portproxy add v4tov4 listenport=6161 connectaddress=arcapi-v2.lowiro.com connectport=443 \u95ee\u9898\u662f\u6211\u670d\u52a1\u5668\u4e0a\u5df2\u7ecf\u6709 nginx \u4e86\uff0c\u4e0d\u662f\u5f88\u60f3\u88c5 socat \u3002 \u521d\u6b21\u5c1d\u8bd5 \u4e86\u89e3\u5230 nginx \u4ece 1.9.0 \u5f00\u59cb\uff0c\u65b0\u589e\u52a0\u4e86\u4e00\u4e2a stream \u6a21\u5757\uff0c\u7528\u6765\u5b9e\u73b0\u56db\u5c42\u534f\u8bae\u7684\u8f6c\u53d1\u3001\u4ee3\u7406\u6216\u8005\u8d1f\u8f7d\u5747\u8861\u7b49\u3002\u7528\u6cd5\u662f\u76f4\u63a5\u5728 nginx.conf \u4e2d\u914d\u7f6e stream \u5b57\u6bb5\u3002 \u4f46\u662f\u5b9e\u9645\u914d\u7f6e\u5b8c\u6210\u540e\u53d1\u73b0\uff0cnginx \u5e76\u4e0d\u8ba4\u8bc6 stream \u6a21\u5757\u3002\u4f7f\u7528 nginx -t \u68c0\u67e5\u914d\u7f6e\u65e0\u6cd5\u901a\u8fc7\u3002\u62a5\u9519\u63d0\u793a unknown directive \"stream\" in /etc/nginx/nginx.conf \u3002 \u540e\u6765\u4e86\u89e3\u5230\uff0c\u5982\u679c\u9700\u8981\u4f7f nginx \u5185\u7f6e\u652f\u6301 stream \u6a21\u5757\uff0c\u9700\u8981\u5728\u7f16\u8bd1\u65f6\u6307\u5b9a --with-stream \u9009\u9879\u3002\u5373 ./configure --with-stream \u5b98\u7f51\u7684\u8bf4\u6cd5 \u8fd9\u4e2a\u65b9\u6cd5\u5b9e\u5c5e\u8fc7\u4e8e\u9ebb\u70e6\uff0c\u8fd8\u8981\u91cd\u88c5 nginx\u3002 \u89e3\u51b3\u65b9\u6848 \u4ece\u8fd9\u7bc7\u6587\u7ae0\u4e86\u89e3\u5230\u4e86\u4e0d\u7528\u91cd\u65b0\u7f16\u8bd1\u4e5f\u80fd\u652f\u6301 stream \u6a21\u5757\u7684\u65b9\u6cd5\uff1a unknown directive \"stream\" in /etc/nginx/nginx.conf:86 - Server Fault \u7b80\u5355\u6765\u8bf4\u5c31\u662f\uff0c\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u5728\u7f16\u8bd1\u65f6\u6307\u5b9a --with-stream \u9009\u9879\uff0cnginx \u4e5f\u4f1a\u5c06 stream \u6a21\u5757\u7f16\u8bd1\u8fdb\u6765\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u8ba9 nginx \u9ed8\u8ba4\u652f\u6301\uff0c\u800c\u662f\u9700\u8981\u6211\u4eec\u81ea\u884c\u5bfc\u5165\uff0c\u5373\uff1a load_module /usr/lib/nginx/modules/ngx_stream_module.so ; \u5982\u6b64\u4e00\u6765\u4fbf\u80fd\u6b63\u5e38\u4f7f\u7528 stream \u6a21\u5757\u3002","title":"nginx \u5982\u4f55\u8bbe\u7f6e stream \u8f6c\u53d1"},{"location":"blog/2022/220406-nginx-stream/#_1","text":"\u5e2e aw \u505a AUA \u8f6c\u53d1\u8282\u70b9\u7684\u65f6\u5019\u9047\u5230\u4e86\u8fd9\u4e2a\u9700\u6c42\uff0c\u56e0\u4e3a AUA \u9700\u8981\u9891\u7e41\u5411 616 \u8bf7\u6c42 API\uff0c\u4f46\u662f 616 \u5bf9 \u540c\u4e00\u4e2a IP \u7684\u8bf7\u6c42\u6570\u91cf\u6709\u9650\u5236\uff0c\u6240\u4ee5 AUA \u9700\u8981\u5927\u91cf\u7684\u8f6c\u53d1\u8282\u70b9\u6765\u7ef4\u6301\u4f7f\u7528\u3002 aw \u7684\u5efa\u8bae\u662f\u7528 socat (Linux server) \u6216\u8005 netsh (Windows server) Linux server Windows server socat -d TCP4-LISTEN:6161,reuseaddr,fork TCP4:arcapi-v2.lowiro.com:443 netsh interface portproxy add v4tov4 listenport=6161 connectaddress=arcapi-v2.lowiro.com connectport=443 \u95ee\u9898\u662f\u6211\u670d\u52a1\u5668\u4e0a\u5df2\u7ecf\u6709 nginx \u4e86\uff0c\u4e0d\u662f\u5f88\u60f3\u88c5 socat \u3002","title":"\u80cc\u666f"},{"location":"blog/2022/220406-nginx-stream/#_2","text":"\u4e86\u89e3\u5230 nginx \u4ece 1.9.0 \u5f00\u59cb\uff0c\u65b0\u589e\u52a0\u4e86\u4e00\u4e2a stream \u6a21\u5757\uff0c\u7528\u6765\u5b9e\u73b0\u56db\u5c42\u534f\u8bae\u7684\u8f6c\u53d1\u3001\u4ee3\u7406\u6216\u8005\u8d1f\u8f7d\u5747\u8861\u7b49\u3002\u7528\u6cd5\u662f\u76f4\u63a5\u5728 nginx.conf \u4e2d\u914d\u7f6e stream \u5b57\u6bb5\u3002 \u4f46\u662f\u5b9e\u9645\u914d\u7f6e\u5b8c\u6210\u540e\u53d1\u73b0\uff0cnginx \u5e76\u4e0d\u8ba4\u8bc6 stream \u6a21\u5757\u3002\u4f7f\u7528 nginx -t \u68c0\u67e5\u914d\u7f6e\u65e0\u6cd5\u901a\u8fc7\u3002\u62a5\u9519\u63d0\u793a unknown directive \"stream\" in /etc/nginx/nginx.conf \u3002 \u540e\u6765\u4e86\u89e3\u5230\uff0c\u5982\u679c\u9700\u8981\u4f7f nginx \u5185\u7f6e\u652f\u6301 stream \u6a21\u5757\uff0c\u9700\u8981\u5728\u7f16\u8bd1\u65f6\u6307\u5b9a --with-stream \u9009\u9879\u3002\u5373 ./configure --with-stream \u5b98\u7f51\u7684\u8bf4\u6cd5 \u8fd9\u4e2a\u65b9\u6cd5\u5b9e\u5c5e\u8fc7\u4e8e\u9ebb\u70e6\uff0c\u8fd8\u8981\u91cd\u88c5 nginx\u3002","title":"\u521d\u6b21\u5c1d\u8bd5"},{"location":"blog/2022/220406-nginx-stream/#_3","text":"\u4ece\u8fd9\u7bc7\u6587\u7ae0\u4e86\u89e3\u5230\u4e86\u4e0d\u7528\u91cd\u65b0\u7f16\u8bd1\u4e5f\u80fd\u652f\u6301 stream \u6a21\u5757\u7684\u65b9\u6cd5\uff1a unknown directive \"stream\" in /etc/nginx/nginx.conf:86 - Server Fault \u7b80\u5355\u6765\u8bf4\u5c31\u662f\uff0c\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u5728\u7f16\u8bd1\u65f6\u6307\u5b9a --with-stream \u9009\u9879\uff0cnginx \u4e5f\u4f1a\u5c06 stream \u6a21\u5757\u7f16\u8bd1\u8fdb\u6765\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u8ba9 nginx \u9ed8\u8ba4\u652f\u6301\uff0c\u800c\u662f\u9700\u8981\u6211\u4eec\u81ea\u884c\u5bfc\u5165\uff0c\u5373\uff1a load_module /usr/lib/nginx/modules/ngx_stream_module.so ; \u5982\u6b64\u4e00\u6765\u4fbf\u80fd\u6b63\u5e38\u4f7f\u7528 stream \u6a21\u5757\u3002","title":"\u89e3\u51b3\u65b9\u6848"},{"location":"blog/2022/220406-set-http-proxy/","tags":["python","pip","proxy"],"text":"\u95ee\u9898 \u5f00\u542f\u7cfb\u7edf\u4ee3\u7406\u540e\uff0c\u5f53\u4f7f\u7528 pip \u5b89\u88c5\u5305\u65f6\uff0c\u4f1a\u62a5\u9519\uff1a ValueError: check_hostname requires server_hostname \u4ee5\u53ca\u4f7f\u7528\u67d0\u4e9b\u7f51\u7edc\u64cd\u4f5c\u5e93\u65f6\uff08\u6bd4\u5982 requests \uff09\u4e5f\u4f1a\u62a5\u8fd9\u4e2a\u9519\u3002 \u89e3\u51b3\u65b9\u6cd5 \u5728\u63a7\u5236\u53f0\u8fd0\u884c python \u811a\u672c\u524d\u5148\u6307\u5b9a\u4ee3\u7406\u5730\u5740\uff1a set http_proxy=http://127.0.0.1:8889 set https_proxy=http://127.0.0.1:8889 \u5176\u4e2d 127.0.0.1:8889 \u662f\u4ee3\u7406\u670d\u52a1\u5668\u7684\u5730\u5740","title":"\u89e3\u51b3\u4f7f\u7528\u4ee3\u7406\u540e pip \u548c python \u65e0\u6cd5\u8fde\u63a5\u5230\u7f51\u7edc\u7684\u95ee\u9898"},{"location":"blog/2022/220406-set-http-proxy/#_1","text":"\u5f00\u542f\u7cfb\u7edf\u4ee3\u7406\u540e\uff0c\u5f53\u4f7f\u7528 pip \u5b89\u88c5\u5305\u65f6\uff0c\u4f1a\u62a5\u9519\uff1a ValueError: check_hostname requires server_hostname \u4ee5\u53ca\u4f7f\u7528\u67d0\u4e9b\u7f51\u7edc\u64cd\u4f5c\u5e93\u65f6\uff08\u6bd4\u5982 requests \uff09\u4e5f\u4f1a\u62a5\u8fd9\u4e2a\u9519\u3002","title":"\u95ee\u9898"},{"location":"blog/2022/220406-set-http-proxy/#_2","text":"\u5728\u63a7\u5236\u53f0\u8fd0\u884c python \u811a\u672c\u524d\u5148\u6307\u5b9a\u4ee3\u7406\u5730\u5740\uff1a set http_proxy=http://127.0.0.1:8889 set https_proxy=http://127.0.0.1:8889 \u5176\u4e2d 127.0.0.1:8889 \u662f\u4ee3\u7406\u670d\u52a1\u5668\u7684\u5730\u5740","title":"\u89e3\u51b3\u65b9\u6cd5"},{"location":"blog/2022/220406-venv-move-file/","tags":["python","venv","pycharm","pip"],"text":"\u80cc\u666f \u56e0\u4e3a\u9879\u76ee\u9700\u8981\uff0c\u5c06\u90e8\u5206 python \u9879\u76ee\u79fb\u52a8\u5230\u4e86\u5176\u4ed6\u6587\u4ef6\u5939\uff0c\u5bfc\u81f4\u5728 PyCharm \u4e2d\u627e\u4e0d\u5230\u89e3\u91ca\u5668\uff0c\u4e5f\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u7ec8\u7aef\u3002 \u73b0\u8c61 \u6211\u4f7f\u7528\u7684 IDE \u662f PyCharm \u4e13\u4e1a\u7248 2021.3.2 \uff0c\u5177\u4f53\u8868\u73b0\u4e3a\u5728 IDE \u5185\u6253\u5f00\u7ec8\u7aef\u540e\uff1a PyCharm \u627e\u4e0d\u5230\u89e3\u91ca\u5668 \u7ec8\u7aef\u5185\u6267\u884c python \u7a0b\u5e8f\u53ea\u80fd\u591f\u4f7f\u7528\u5168\u5c40\u5305 \u65e0\u6cd5\u8fdb\u5165 venv \u73af\u5883\uff08\u5305\u62ec PyCharm \u81ea\u52a8\u8fdb\u5165\u548c\u624b\u52a8\u8fdb\u5165\uff09 \u65e0\u6cd5\u4f7f\u7528 pip \u89e3\u51b3 \u627e\u4e0d\u5230\u89e3\u91ca\u5668 \u8fd9\u4e2a\u95ee\u9898\u597d\u89e3\u51b3\uff0cPyCharm \u4f1a\u81ea\u52a8\u68c0\u6d4b\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 venv \u6587\u4ef6\u5939\uff0c\u5982\u679c\u5b58\u5728\uff0c\u5219\u4f1a\u5c06 venv/Scripts/python \u8bbe\u7f6e\u4e3a\u89e3\u91ca\u5668\u3002\u95ee\u9898\u76f4\u63a5\u89e3\u51b3\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u79fb\u52a8\u4e86 python \u9879\u76ee\u6587\u4ef6\u5939\u7684\uff0c\u56e0\u6b64\u539f\u6765\u7684\u89e3\u91ca\u5668\u8def\u5f84\u8fd8\u4fdd\u7559\u5728 PyCharm \u5185\uff0c\u6240\u4ee5\u9700\u8981\u624b\u52a8\u5c06\u5176\u5220\u9664\u3002\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\uff1a \u627e\u5230 \u6587\u4ef6 -> \u8bbe\u7f6e -> \u9879\u76ee -> Python \u89e3\u91ca\u5668 \u9009\u62e9\u5f53\u524d\u89e3\u91ca\u5668\u53f3\u8fb9\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u70b9\u51fb \u5168\u90e8\u663e\u793a \uff0c\u627e\u5230\u7ea2\u8272\u6807\u8bb0\u7684\u89e3\u91ca\u5668\uff0c\u70b9\u51fb\u5220\u9664\u5373\u53ef\u3002 \u7ec8\u7aef\u53ea\u80fd\u591f\u4f7f\u7528\u5168\u5c40\u5305\u4e0e\u65e0\u6cd5\u8fdb\u5165 venv \u73af\u5883 \u5177\u4f53\u6709\u4ee5\u4e0b\u51e0\u4e2a\u8868\u73b0\uff1a \u81ea\u5df1\u7684\u5b9e\u9645\u9879\u76ee\u4e2d\u6709\u7b2c\u4e09\u65b9\u5e93\uff08\u4f8b\u5982 aiohttp \uff09\uff0c\u9879\u76ee\u6587\u4ef6\u76f4\u63a5\u53f3\u952e\u8fd0\u884c\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f46\u662f\u5728\u7ec8\u7aef\u91cc\u9762\u6267\u884c\u65f6\u4f1a\u62a5\u9519\uff0c\u63d0\u793a ModuleNotFoundError: No module named 'aiohttp' \u3002 \u7ec8\u7aef\u91cc\u76f4\u63a5\u6267\u884c where python \u663e\u793a\u7684\u662f\u5168\u5c40 python \u8def\u5f84\uff0c\u800c\u4e0d\u662f venv \u4e2d\u7684\u8def\u5f84\u3002 \u7ec8\u7aef\u91cc\u76f4\u63a5\u6267\u884c pip list \u4f1a\u63d0\u793a\u53ea\u6709 pip \u548c setuptools \u4e24\u4e2a\u5305\uff0c\u800c\u6211\u4eec\u9879\u76ee\u91cc\u4f9d\u8d56\u7684\u5305\u4e00\u4e2a\u90fd\u6ca1\u6709\u3002 \u539f\u56e0\u5728\u4e8e PyCharm \u81ea\u52a8\u8fdb\u5165 venv \u73af\u5883\u7684\u65f6\u5019\u662f\u4ece venv/Scripts/activate.bat \u8fdb\u5165\u7684\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b9a\u4e49\u4e86 %PATH% \uff0c\u5f53\u6211\u4eec\u5df2\u7ecf\u79fb\u52a8\u4e86\u9879\u76ee\u6587\u4ef6\u5939\u540e\uff0c activate.bat \u91cc\u8bb0\u5f55\u7684\u8def\u5f84\u5e76\u6ca1\u6709\u6539\uff0c\u800c\u539f\u6765\u7684\u8def\u5f84\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u653e\u5728 venv \u4e0b\u7684 python.exe \u5e76\u4e0d\u4f1a\u81ea\u52a8\u8fdb\u5165\u5230 %PATH% \u4e2d\u3002 \u89e3\u51b3\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u7f16\u8f91 venv/Scripts/activate.bat \u6587\u4ef6\uff0clinux \u540c\u7406\u3002 CMD Bash FishShell Xonsh activate.bat 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 @ echo off set \"VIRTUAL_ENV=I:\\Developer\\web\\blog_mkdocs\\venv\" if defined _OLD_VIRTUAL_PROMPT ( set \"PROMPT= %_OLD_VIRTUAL_PROMPT% \" ) else ( if not defined PROMPT ( set \"PROMPT=$P$G\" ) if not defined VIRTUAL_ENV_DISABLE_PROMPT ( set \"_OLD_VIRTUAL_PROMPT= %PROMPT% \" ) ) if not defined VIRTUAL_ENV_DISABLE_PROMPT ( set \"ENV_PROMPT=\" if NOT DEFINED ENV_PROMPT ( for %% d in ( \" %VIRTUAL_ENV% \" ) do set \"ENV_PROMPT=( %% ~nxd) \" ) ) set \"PROMPT= %ENV_PROMPT%%PROMPT% \" ) REM Don't use () to avoid problems with them in %PATH% if defined _OLD_VIRTUAL_PYTHONHOME goto ENDIFVHOME set \"_OLD_VIRTUAL_PYTHONHOME= %PYTHONHOME% \" : ENDIFVHOME set PYTHONHOME = REM if defined _OLD_VIRTUAL_PATH ( if not defined _OLD_VIRTUAL_PATH goto ENDIFVPATH1 set \"PATH= %_OLD_VIRTUAL_PATH% \" : ENDIFVPATH1 REM ) else ( if defined _OLD_VIRTUAL_PATH goto ENDIFVPATH2 set \"_OLD_VIRTUAL_PATH= %PATH% \" : ENDIFVPATH2 set \"PATH= %VIRTUAL_ENV% \\Scripts; %PATH% \" activate 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 # This file must be used with \"source bin/activate\" *from bash* # you cannot run it directly if [ \" ${ BASH_SOURCE - } \" = \" $0 \" ] ; then echo \"You must source this script: \\$ source $0 \" > & 2 exit 33 fi deactivate () { unset -f pydoc >/dev/null 2 > & 1 || true # reset old environment variables # ! [ -z ${VAR+_} ] returns true if VAR is declared at all if ! [ -z \" ${ _OLD_VIRTUAL_PATH :+_ } \" ] ; then PATH = \" $_OLD_VIRTUAL_PATH \" export PATH unset _OLD_VIRTUAL_PATH fi if ! [ -z \" ${ _OLD_VIRTUAL_PYTHONHOME +_ } \" ] ; then PYTHONHOME = \" $_OLD_VIRTUAL_PYTHONHOME \" export PYTHONHOME unset _OLD_VIRTUAL_PYTHONHOME fi # The hash command must be called to get it to forget past # commands. Without forgetting past commands the $PATH changes # we made may not be respected hash -r 2 >/dev/null if ! [ -z \" ${ _OLD_VIRTUAL_PS1 +_ } \" ] ; then PS1 = \" $_OLD_VIRTUAL_PS1 \" export PS1 unset _OLD_VIRTUAL_PS1 fi unset VIRTUAL_ENV if [ ! \" ${ 1 - } \" = \"nondestructive\" ] ; then # Self destruct! unset -f deactivate fi } # unset irrelevant variables deactivate nondestructive VIRTUAL_ENV = 'I:\\Developer\\web\\blog_mkdocs\\venv' if ([ \" $OSTYPE \" = \"cygwin\" ] || [ \" $OSTYPE \" = \"msys\" ]) && $( command -v cygpath & > /dev/null ) ; then VIRTUAL_ENV = $( cygpath -u \" $VIRTUAL_ENV \" ) fi export VIRTUAL_ENV _OLD_VIRTUAL_PATH = \" $PATH \" PATH = \" $VIRTUAL_ENV /Scripts: $PATH \" export PATH # unset PYTHONHOME if set if ! [ -z \" ${ PYTHONHOME +_ } \" ] ; then _OLD_VIRTUAL_PYTHONHOME = \" $PYTHONHOME \" unset PYTHONHOME fi if [ -z \" ${ VIRTUAL_ENV_DISABLE_PROMPT - } \" ] ; then _OLD_VIRTUAL_PS1 = \" ${ PS1 - } \" if [ \"x\" ! = x ] ; then PS1 = \" ${ PS1 - } \" else PS1 = \"(`basename \\\" $VIRTUAL_ENV \\\"`) ${ PS1 - } \" fi export PS1 fi # Make sure to unalias pydoc if it's already there alias pydoc 2 >/dev/null >/dev/null && unalias pydoc || true pydoc () { python -m pydoc \" $@ \" } # The hash command must be called to get it to forget past # commands. Without forgetting past commands the $PATH changes # we made may not be respected hash -r 2 >/dev/null activate.fish 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 # This file must be used using `source bin/activate.fish` *within a running fish ( http://fishshell.com ) session*. # Do not run it directly. function _bashify_path -d \"Converts a fish path to something bash can recognize\" set fishy_path $argv set bashy_path $fishy_path [ 1 ] for path_part in $fishy_path [ 2..-1 ] set bashy_path \" $bashy_path : $path_part \" end echo $bashy_path end function _fishify_path -d \"Converts a bash path to something fish can recognize\" echo $argv | tr ':' '\\n' end function deactivate -d 'Exit virtualenv mode and return to the normal environment.' # reset old environment variables if test -n \" $_OLD_VIRTUAL_PATH \" # https://github.com/fish-shell/fish-shell/issues/436 altered PATH handling if test ( echo $FISH_VERSION | head -c 1 ) -lt 3 set -gx PATH ( _fishify_path \" $_OLD_VIRTUAL_PATH \" ) else set -gx PATH \" $_OLD_VIRTUAL_PATH \" end set -e _OLD_VIRTUAL_PATH end if test -n \" $_OLD_VIRTUAL_PYTHONHOME \" set -gx PYTHONHOME \" $_OLD_VIRTUAL_PYTHONHOME \" set -e _OLD_VIRTUAL_PYTHONHOME end if test -n \" $_OLD_FISH_PROMPT_OVERRIDE \" and functions -q _old_fish_prompt # Set an empty local `$fish_function_path` to allow the removal of `fish_prompt` using `functions -e`. set -l fish_function_path # Erase virtualenv's `fish_prompt` and restore the original. functions -e fish_prompt functions -c _old_fish_prompt fish_prompt functions -e _old_fish_prompt set -e _OLD_FISH_PROMPT_OVERRIDE end set -e VIRTUAL_ENV if test \" $argv [1]\" ! = 'nondestructive' # Self-destruct! functions -e pydoc functions -e deactivate functions -e _bashify_path functions -e _fishify_path end end # Unset irrelevant variables. deactivate nondestructive set -gx VIRTUAL_ENV 'I:\\Developer\\web\\blog_mkdocs\\venv' # https://github.com/fish-shell/fish-shell/issues/436 altered PATH handling if test ( echo $FISH_VERSION | head -c 1 ) -lt 3 set -gx _OLD_VIRTUAL_PATH ( _bashify_path $PATH ) else set -gx _OLD_VIRTUAL_PATH \" $PATH \" end set -gx PATH \" $VIRTUAL_ENV \" '/Scripts' $PATH # Unset `$PYTHONHOME` if set. if set -q PYTHONHOME set -gx _OLD_VIRTUAL_PYTHONHOME $PYTHONHOME set -e PYTHONHOME end function pydoc python -m pydoc $argv end if test -z \" $VIRTUAL_ENV_DISABLE_PROMPT \" # Copy the current `fish_prompt` function as `_old_fish_prompt`. functions -c fish_prompt _old_fish_prompt function fish_prompt # Run the user's prompt first; it might depend on (pipe)status. set -l prompt ( _old_fish_prompt ) # Prompt override provided? # If not, just prepend the environment name. if test -n '' printf '%s%s' '' ( set_color normal ) else printf '%s(%s) ' ( set_color normal ) ( basename \" $VIRTUAL_ENV \" ) end string join -- \\n $prompt # handle multi-line prompts end set -gx _OLD_FISH_PROMPT_OVERRIDE \" $VIRTUAL_ENV \" end activate.xsh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 \"\"\"Xonsh activate script for virtualenv\"\"\" from xonsh.tools import get_sep as _get_sep def _deactivate(args): if \"pydoc\" in aliases: del aliases[\"pydoc\"] if ${...}.get(\"_OLD_VIRTUAL_PATH\", \"\"): $PATH = $_OLD_VIRTUAL_PATH del $_OLD_VIRTUAL_PATH if ${...}.get(\"_OLD_VIRTUAL_PYTHONHOME\", \"\"): $PYTHONHOME = $_OLD_VIRTUAL_PYTHONHOME del $_OLD_VIRTUAL_PYTHONHOME if \"VIRTUAL_ENV\" in ${...}: del $VIRTUAL_ENV if \"VIRTUAL_ENV_PROMPT\" in ${...}: del $VIRTUAL_ENV_PROMPT if \"nondestructive\" not in args: # Self destruct! del aliases[\"deactivate\"] # unset irrelevant variables _deactivate([\"nondestructive\"]) aliases[\"deactivate\"] = _deactivate $VIRTUAL_ENV = r\"I:\\Developer\\web\\blog_mkdocs\\venv\" $_OLD_VIRTUAL_PATH = $PATH $PATH = $PATH[:] $PATH.add($VIRTUAL_ENV + _get_sep() + \"Scripts\", front=True, replace=True) if ${...}.get(\"PYTHONHOME\", \"\"): # unset PYTHONHOME if set $_OLD_VIRTUAL_PYTHONHOME = $PYTHONHOME del $PYTHONHOME $VIRTUAL_ENV_PROMPT = \"\" if not $VIRTUAL_ENV_PROMPT: del $VIRTUAL_ENV_PROMPT aliases[\"pydoc\"] = [\"python\", \"-m\", \"pydoc\"] \u65e0\u6cd5\u4f7f\u7528 pip \u901a\u8fc7\u4fee\u6539 activate.bat \u4f7f\u5f97\u80fd\u6b63\u5e38\u8fdb\u5165 venv \u73af\u5883\u540e\uff0c\u4f1a\u8fce\u6765\u7b2c\u4e09\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u65e0\u6cd5\u4f7f\u7528 pip \u5b89\u88c5\u5305\u3002 \u5177\u4f53\u8868\u73b0\u4e3a\uff0c\u4f7f\u7528 pip \u547d\u4ee4\u540e\uff0c\u7ec8\u7aef\u4f1a\u62a5\u9519\uff1a Fatal error in launcher: unable to create process using: 'XXXXXXX/python.exe' 'XXXXXXXXX/pip.exe' \u3002 \u6211\u4e00\u770b\uff0c\u8fd9\u4e2a\u6240\u8c13\u7684 'XXXXXXX/python.exe' \u6b63\u662f\u6211\u4eec\u5728\u79fb\u52a8\u9879\u76ee\u6587\u4ef6\u4e4b\u524d\u7684 venv \u7684 python \u8def\u5f84\uff0c\u53ef\u662f\u6211\u4eec\u5df2\u7ecf\u4fee\u6539\u4e86 activate.bat \u4e2d\u7684\u8def\u5f84\uff0c\u600e\u4e48\u8fd8\u662f\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u5462\u3002 \u53c2\u8003\u4e86 Fatal error in launcher: Unable to create process using \u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e86\u89e3\u5230 pip.exe \u540c\u6837\u4e5f\u4fdd\u5b58\u4e86\u8def\u5f84\uff0c\u800c\u4e14\u5c31\u4fdd\u5b58\u5728 pip.exe \u8fd9\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u91cc\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\u4e5f\u4e0d\u662f\u4e0d\u884c\uff0c\u7528 WinHex \u8fd9\u7c7b\u5de5\u5177\u6539\u5c31\u884c\u3002 \u4f46\u662f\u6211\u4eec\u6ca1\u5fc5\u8981\u8fd9\u4e48\u9ebb\u70e6\uff0c\u6211\u7684\u5efa\u8bae\u662f\u76f4\u63a5\u539f\u5730\u91cd\u88c5 pip \uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a \u9996\u5148\u6709\u4e86\u4e0a\u4e00\u6b65\u7684\u94fa\u57ab\uff0c\u6211\u4eec\u5df2\u7ecf\u80fd\u591f\u8fdb\u5165 venv\uff0c\u90a3\u4e48\u8fdb\u5165 venv I : \\Developer\\web\\blog_mkdocs\\venv\\Scripts\\activate.bat \u7136\u540e\u91cd\u88c5 pip \uff08\u6ce8\u610f\u6b64\u65f6\u4f60\u5df2\u7ecf\u5728 venv \u91cc\u4e86\uff09 python -m pip install --upgrade --force-reinstall pip \u6b64\u65f6\uff0c\u8be5 venv \u91cc\u7684 pip \u5e94\u8be5\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u3002 \u540c\u7406\uff0c\u7ee7\u7eed\u68c0\u67e5 venv/Scripts \u4e0b\u7684\u5176\u4ed6\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f8b\u5982 mkdocs.exe \uff0c\u8fd9\u4e9b\u90fd\u8981\u901a\u8fc7\u76f8\u540c\u65b9\u5f0f\u91cd\u88c5\u624d\u80fd\u6b63\u5e38\u7528\u3002 pip install --upgrade --force-reinstall mkdocs","title":"\u79fb\u52a8 python \u9879\u76ee\u6587\u4ef6\u5939\u4f4d\u7f6e\u540e\u5982\u4f55\u89e3\u51b3 PyCharm \u627e\u4e0d\u5230\u89e3\u91ca\u5668\u4e0e\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u7ec8\u7aef\u7684\u95ee\u9898"},{"location":"blog/2022/220406-venv-move-file/#_1","text":"\u56e0\u4e3a\u9879\u76ee\u9700\u8981\uff0c\u5c06\u90e8\u5206 python \u9879\u76ee\u79fb\u52a8\u5230\u4e86\u5176\u4ed6\u6587\u4ef6\u5939\uff0c\u5bfc\u81f4\u5728 PyCharm \u4e2d\u627e\u4e0d\u5230\u89e3\u91ca\u5668\uff0c\u4e5f\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u7ec8\u7aef\u3002","title":"\u80cc\u666f"},{"location":"blog/2022/220406-venv-move-file/#_2","text":"\u6211\u4f7f\u7528\u7684 IDE \u662f PyCharm \u4e13\u4e1a\u7248 2021.3.2 \uff0c\u5177\u4f53\u8868\u73b0\u4e3a\u5728 IDE \u5185\u6253\u5f00\u7ec8\u7aef\u540e\uff1a PyCharm \u627e\u4e0d\u5230\u89e3\u91ca\u5668 \u7ec8\u7aef\u5185\u6267\u884c python \u7a0b\u5e8f\u53ea\u80fd\u591f\u4f7f\u7528\u5168\u5c40\u5305 \u65e0\u6cd5\u8fdb\u5165 venv \u73af\u5883\uff08\u5305\u62ec PyCharm \u81ea\u52a8\u8fdb\u5165\u548c\u624b\u52a8\u8fdb\u5165\uff09 \u65e0\u6cd5\u4f7f\u7528 pip","title":"\u73b0\u8c61"},{"location":"blog/2022/220406-venv-move-file/#_3","text":"","title":"\u89e3\u51b3"},{"location":"blog/2022/220406-venv-move-file/#_4","text":"\u8fd9\u4e2a\u95ee\u9898\u597d\u89e3\u51b3\uff0cPyCharm \u4f1a\u81ea\u52a8\u68c0\u6d4b\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 venv \u6587\u4ef6\u5939\uff0c\u5982\u679c\u5b58\u5728\uff0c\u5219\u4f1a\u5c06 venv/Scripts/python \u8bbe\u7f6e\u4e3a\u89e3\u91ca\u5668\u3002\u95ee\u9898\u76f4\u63a5\u89e3\u51b3\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u79fb\u52a8\u4e86 python \u9879\u76ee\u6587\u4ef6\u5939\u7684\uff0c\u56e0\u6b64\u539f\u6765\u7684\u89e3\u91ca\u5668\u8def\u5f84\u8fd8\u4fdd\u7559\u5728 PyCharm \u5185\uff0c\u6240\u4ee5\u9700\u8981\u624b\u52a8\u5c06\u5176\u5220\u9664\u3002\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\uff1a \u627e\u5230 \u6587\u4ef6 -> \u8bbe\u7f6e -> \u9879\u76ee -> Python \u89e3\u91ca\u5668 \u9009\u62e9\u5f53\u524d\u89e3\u91ca\u5668\u53f3\u8fb9\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u70b9\u51fb \u5168\u90e8\u663e\u793a \uff0c\u627e\u5230\u7ea2\u8272\u6807\u8bb0\u7684\u89e3\u91ca\u5668\uff0c\u70b9\u51fb\u5220\u9664\u5373\u53ef\u3002","title":"\u627e\u4e0d\u5230\u89e3\u91ca\u5668"},{"location":"blog/2022/220406-venv-move-file/#venv","text":"\u5177\u4f53\u6709\u4ee5\u4e0b\u51e0\u4e2a\u8868\u73b0\uff1a \u81ea\u5df1\u7684\u5b9e\u9645\u9879\u76ee\u4e2d\u6709\u7b2c\u4e09\u65b9\u5e93\uff08\u4f8b\u5982 aiohttp \uff09\uff0c\u9879\u76ee\u6587\u4ef6\u76f4\u63a5\u53f3\u952e\u8fd0\u884c\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f46\u662f\u5728\u7ec8\u7aef\u91cc\u9762\u6267\u884c\u65f6\u4f1a\u62a5\u9519\uff0c\u63d0\u793a ModuleNotFoundError: No module named 'aiohttp' \u3002 \u7ec8\u7aef\u91cc\u76f4\u63a5\u6267\u884c where python \u663e\u793a\u7684\u662f\u5168\u5c40 python \u8def\u5f84\uff0c\u800c\u4e0d\u662f venv \u4e2d\u7684\u8def\u5f84\u3002 \u7ec8\u7aef\u91cc\u76f4\u63a5\u6267\u884c pip list \u4f1a\u63d0\u793a\u53ea\u6709 pip \u548c setuptools \u4e24\u4e2a\u5305\uff0c\u800c\u6211\u4eec\u9879\u76ee\u91cc\u4f9d\u8d56\u7684\u5305\u4e00\u4e2a\u90fd\u6ca1\u6709\u3002 \u539f\u56e0\u5728\u4e8e PyCharm \u81ea\u52a8\u8fdb\u5165 venv \u73af\u5883\u7684\u65f6\u5019\u662f\u4ece venv/Scripts/activate.bat \u8fdb\u5165\u7684\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b9a\u4e49\u4e86 %PATH% \uff0c\u5f53\u6211\u4eec\u5df2\u7ecf\u79fb\u52a8\u4e86\u9879\u76ee\u6587\u4ef6\u5939\u540e\uff0c activate.bat \u91cc\u8bb0\u5f55\u7684\u8def\u5f84\u5e76\u6ca1\u6709\u6539\uff0c\u800c\u539f\u6765\u7684\u8def\u5f84\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u653e\u5728 venv \u4e0b\u7684 python.exe \u5e76\u4e0d\u4f1a\u81ea\u52a8\u8fdb\u5165\u5230 %PATH% \u4e2d\u3002 \u89e3\u51b3\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u7f16\u8f91 venv/Scripts/activate.bat \u6587\u4ef6\uff0clinux \u540c\u7406\u3002 CMD Bash FishShell Xonsh activate.bat 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 @ echo off set \"VIRTUAL_ENV=I:\\Developer\\web\\blog_mkdocs\\venv\" if defined _OLD_VIRTUAL_PROMPT ( set \"PROMPT= %_OLD_VIRTUAL_PROMPT% \" ) else ( if not defined PROMPT ( set \"PROMPT=$P$G\" ) if not defined VIRTUAL_ENV_DISABLE_PROMPT ( set \"_OLD_VIRTUAL_PROMPT= %PROMPT% \" ) ) if not defined VIRTUAL_ENV_DISABLE_PROMPT ( set \"ENV_PROMPT=\" if NOT DEFINED ENV_PROMPT ( for %% d in ( \" %VIRTUAL_ENV% \" ) do set \"ENV_PROMPT=( %% ~nxd) \" ) ) set \"PROMPT= %ENV_PROMPT%%PROMPT% \" ) REM Don't use () to avoid problems with them in %PATH% if defined _OLD_VIRTUAL_PYTHONHOME goto ENDIFVHOME set \"_OLD_VIRTUAL_PYTHONHOME= %PYTHONHOME% \" : ENDIFVHOME set PYTHONHOME = REM if defined _OLD_VIRTUAL_PATH ( if not defined _OLD_VIRTUAL_PATH goto ENDIFVPATH1 set \"PATH= %_OLD_VIRTUAL_PATH% \" : ENDIFVPATH1 REM ) else ( if defined _OLD_VIRTUAL_PATH goto ENDIFVPATH2 set \"_OLD_VIRTUAL_PATH= %PATH% \" : ENDIFVPATH2 set \"PATH= %VIRTUAL_ENV% \\Scripts; %PATH% \" activate 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 # This file must be used with \"source bin/activate\" *from bash* # you cannot run it directly if [ \" ${ BASH_SOURCE - } \" = \" $0 \" ] ; then echo \"You must source this script: \\$ source $0 \" > & 2 exit 33 fi deactivate () { unset -f pydoc >/dev/null 2 > & 1 || true # reset old environment variables # ! [ -z ${VAR+_} ] returns true if VAR is declared at all if ! [ -z \" ${ _OLD_VIRTUAL_PATH :+_ } \" ] ; then PATH = \" $_OLD_VIRTUAL_PATH \" export PATH unset _OLD_VIRTUAL_PATH fi if ! [ -z \" ${ _OLD_VIRTUAL_PYTHONHOME +_ } \" ] ; then PYTHONHOME = \" $_OLD_VIRTUAL_PYTHONHOME \" export PYTHONHOME unset _OLD_VIRTUAL_PYTHONHOME fi # The hash command must be called to get it to forget past # commands. Without forgetting past commands the $PATH changes # we made may not be respected hash -r 2 >/dev/null if ! [ -z \" ${ _OLD_VIRTUAL_PS1 +_ } \" ] ; then PS1 = \" $_OLD_VIRTUAL_PS1 \" export PS1 unset _OLD_VIRTUAL_PS1 fi unset VIRTUAL_ENV if [ ! \" ${ 1 - } \" = \"nondestructive\" ] ; then # Self destruct! unset -f deactivate fi } # unset irrelevant variables deactivate nondestructive VIRTUAL_ENV = 'I:\\Developer\\web\\blog_mkdocs\\venv' if ([ \" $OSTYPE \" = \"cygwin\" ] || [ \" $OSTYPE \" = \"msys\" ]) && $( command -v cygpath & > /dev/null ) ; then VIRTUAL_ENV = $( cygpath -u \" $VIRTUAL_ENV \" ) fi export VIRTUAL_ENV _OLD_VIRTUAL_PATH = \" $PATH \" PATH = \" $VIRTUAL_ENV /Scripts: $PATH \" export PATH # unset PYTHONHOME if set if ! [ -z \" ${ PYTHONHOME +_ } \" ] ; then _OLD_VIRTUAL_PYTHONHOME = \" $PYTHONHOME \" unset PYTHONHOME fi if [ -z \" ${ VIRTUAL_ENV_DISABLE_PROMPT - } \" ] ; then _OLD_VIRTUAL_PS1 = \" ${ PS1 - } \" if [ \"x\" ! = x ] ; then PS1 = \" ${ PS1 - } \" else PS1 = \"(`basename \\\" $VIRTUAL_ENV \\\"`) ${ PS1 - } \" fi export PS1 fi # Make sure to unalias pydoc if it's already there alias pydoc 2 >/dev/null >/dev/null && unalias pydoc || true pydoc () { python -m pydoc \" $@ \" } # The hash command must be called to get it to forget past # commands. Without forgetting past commands the $PATH changes # we made may not be respected hash -r 2 >/dev/null activate.fish 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 # This file must be used using `source bin/activate.fish` *within a running fish ( http://fishshell.com ) session*. # Do not run it directly. function _bashify_path -d \"Converts a fish path to something bash can recognize\" set fishy_path $argv set bashy_path $fishy_path [ 1 ] for path_part in $fishy_path [ 2..-1 ] set bashy_path \" $bashy_path : $path_part \" end echo $bashy_path end function _fishify_path -d \"Converts a bash path to something fish can recognize\" echo $argv | tr ':' '\\n' end function deactivate -d 'Exit virtualenv mode and return to the normal environment.' # reset old environment variables if test -n \" $_OLD_VIRTUAL_PATH \" # https://github.com/fish-shell/fish-shell/issues/436 altered PATH handling if test ( echo $FISH_VERSION | head -c 1 ) -lt 3 set -gx PATH ( _fishify_path \" $_OLD_VIRTUAL_PATH \" ) else set -gx PATH \" $_OLD_VIRTUAL_PATH \" end set -e _OLD_VIRTUAL_PATH end if test -n \" $_OLD_VIRTUAL_PYTHONHOME \" set -gx PYTHONHOME \" $_OLD_VIRTUAL_PYTHONHOME \" set -e _OLD_VIRTUAL_PYTHONHOME end if test -n \" $_OLD_FISH_PROMPT_OVERRIDE \" and functions -q _old_fish_prompt # Set an empty local `$fish_function_path` to allow the removal of `fish_prompt` using `functions -e`. set -l fish_function_path # Erase virtualenv's `fish_prompt` and restore the original. functions -e fish_prompt functions -c _old_fish_prompt fish_prompt functions -e _old_fish_prompt set -e _OLD_FISH_PROMPT_OVERRIDE end set -e VIRTUAL_ENV if test \" $argv [1]\" ! = 'nondestructive' # Self-destruct! functions -e pydoc functions -e deactivate functions -e _bashify_path functions -e _fishify_path end end # Unset irrelevant variables. deactivate nondestructive set -gx VIRTUAL_ENV 'I:\\Developer\\web\\blog_mkdocs\\venv' # https://github.com/fish-shell/fish-shell/issues/436 altered PATH handling if test ( echo $FISH_VERSION | head -c 1 ) -lt 3 set -gx _OLD_VIRTUAL_PATH ( _bashify_path $PATH ) else set -gx _OLD_VIRTUAL_PATH \" $PATH \" end set -gx PATH \" $VIRTUAL_ENV \" '/Scripts' $PATH # Unset `$PYTHONHOME` if set. if set -q PYTHONHOME set -gx _OLD_VIRTUAL_PYTHONHOME $PYTHONHOME set -e PYTHONHOME end function pydoc python -m pydoc $argv end if test -z \" $VIRTUAL_ENV_DISABLE_PROMPT \" # Copy the current `fish_prompt` function as `_old_fish_prompt`. functions -c fish_prompt _old_fish_prompt function fish_prompt # Run the user's prompt first; it might depend on (pipe)status. set -l prompt ( _old_fish_prompt ) # Prompt override provided? # If not, just prepend the environment name. if test -n '' printf '%s%s' '' ( set_color normal ) else printf '%s(%s) ' ( set_color normal ) ( basename \" $VIRTUAL_ENV \" ) end string join -- \\n $prompt # handle multi-line prompts end set -gx _OLD_FISH_PROMPT_OVERRIDE \" $VIRTUAL_ENV \" end activate.xsh 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 \"\"\"Xonsh activate script for virtualenv\"\"\" from xonsh.tools import get_sep as _get_sep def _deactivate(args): if \"pydoc\" in aliases: del aliases[\"pydoc\"] if ${...}.get(\"_OLD_VIRTUAL_PATH\", \"\"): $PATH = $_OLD_VIRTUAL_PATH del $_OLD_VIRTUAL_PATH if ${...}.get(\"_OLD_VIRTUAL_PYTHONHOME\", \"\"): $PYTHONHOME = $_OLD_VIRTUAL_PYTHONHOME del $_OLD_VIRTUAL_PYTHONHOME if \"VIRTUAL_ENV\" in ${...}: del $VIRTUAL_ENV if \"VIRTUAL_ENV_PROMPT\" in ${...}: del $VIRTUAL_ENV_PROMPT if \"nondestructive\" not in args: # Self destruct! del aliases[\"deactivate\"] # unset irrelevant variables _deactivate([\"nondestructive\"]) aliases[\"deactivate\"] = _deactivate $VIRTUAL_ENV = r\"I:\\Developer\\web\\blog_mkdocs\\venv\" $_OLD_VIRTUAL_PATH = $PATH $PATH = $PATH[:] $PATH.add($VIRTUAL_ENV + _get_sep() + \"Scripts\", front=True, replace=True) if ${...}.get(\"PYTHONHOME\", \"\"): # unset PYTHONHOME if set $_OLD_VIRTUAL_PYTHONHOME = $PYTHONHOME del $PYTHONHOME $VIRTUAL_ENV_PROMPT = \"\" if not $VIRTUAL_ENV_PROMPT: del $VIRTUAL_ENV_PROMPT aliases[\"pydoc\"] = [\"python\", \"-m\", \"pydoc\"]","title":"\u7ec8\u7aef\u53ea\u80fd\u591f\u4f7f\u7528\u5168\u5c40\u5305\u4e0e\u65e0\u6cd5\u8fdb\u5165 venv \u73af\u5883"},{"location":"blog/2022/220406-venv-move-file/#pip","text":"\u901a\u8fc7\u4fee\u6539 activate.bat \u4f7f\u5f97\u80fd\u6b63\u5e38\u8fdb\u5165 venv \u73af\u5883\u540e\uff0c\u4f1a\u8fce\u6765\u7b2c\u4e09\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u65e0\u6cd5\u4f7f\u7528 pip \u5b89\u88c5\u5305\u3002 \u5177\u4f53\u8868\u73b0\u4e3a\uff0c\u4f7f\u7528 pip \u547d\u4ee4\u540e\uff0c\u7ec8\u7aef\u4f1a\u62a5\u9519\uff1a Fatal error in launcher: unable to create process using: 'XXXXXXX/python.exe' 'XXXXXXXXX/pip.exe' \u3002 \u6211\u4e00\u770b\uff0c\u8fd9\u4e2a\u6240\u8c13\u7684 'XXXXXXX/python.exe' \u6b63\u662f\u6211\u4eec\u5728\u79fb\u52a8\u9879\u76ee\u6587\u4ef6\u4e4b\u524d\u7684 venv \u7684 python \u8def\u5f84\uff0c\u53ef\u662f\u6211\u4eec\u5df2\u7ecf\u4fee\u6539\u4e86 activate.bat \u4e2d\u7684\u8def\u5f84\uff0c\u600e\u4e48\u8fd8\u662f\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u5462\u3002 \u53c2\u8003\u4e86 Fatal error in launcher: Unable to create process using \u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e86\u89e3\u5230 pip.exe \u540c\u6837\u4e5f\u4fdd\u5b58\u4e86\u8def\u5f84\uff0c\u800c\u4e14\u5c31\u4fdd\u5b58\u5728 pip.exe \u8fd9\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u91cc\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\u4e5f\u4e0d\u662f\u4e0d\u884c\uff0c\u7528 WinHex \u8fd9\u7c7b\u5de5\u5177\u6539\u5c31\u884c\u3002 \u4f46\u662f\u6211\u4eec\u6ca1\u5fc5\u8981\u8fd9\u4e48\u9ebb\u70e6\uff0c\u6211\u7684\u5efa\u8bae\u662f\u76f4\u63a5\u539f\u5730\u91cd\u88c5 pip \uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a \u9996\u5148\u6709\u4e86\u4e0a\u4e00\u6b65\u7684\u94fa\u57ab\uff0c\u6211\u4eec\u5df2\u7ecf\u80fd\u591f\u8fdb\u5165 venv\uff0c\u90a3\u4e48\u8fdb\u5165 venv I : \\Developer\\web\\blog_mkdocs\\venv\\Scripts\\activate.bat \u7136\u540e\u91cd\u88c5 pip \uff08\u6ce8\u610f\u6b64\u65f6\u4f60\u5df2\u7ecf\u5728 venv \u91cc\u4e86\uff09 python -m pip install --upgrade --force-reinstall pip \u6b64\u65f6\uff0c\u8be5 venv \u91cc\u7684 pip \u5e94\u8be5\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u3002 \u540c\u7406\uff0c\u7ee7\u7eed\u68c0\u67e5 venv/Scripts \u4e0b\u7684\u5176\u4ed6\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f8b\u5982 mkdocs.exe \uff0c\u8fd9\u4e9b\u90fd\u8981\u901a\u8fc7\u76f8\u540c\u65b9\u5f0f\u91cd\u88c5\u624d\u80fd\u6b63\u5e38\u7528\u3002 pip install --upgrade --force-reinstall mkdocs","title":"\u65e0\u6cd5\u4f7f\u7528 pip"},{"location":"blog/2022/220407-certbot/","tags":["ssl","letsencrypt","certbot"],"text":"\u5b89\u88c5 \u5b98\u7f51\u5efa\u8bae\u7528 snap \u5b89\u88c5\u3002\ud83d\udc49 https://certbot.eff.org/instructions?ws=other&os=ubuntufocal sudo snap install core sudo snap refresh core sudo snap install --classic certbot \u7533\u8bf7\u591a\u4e2a\u57df\u540d\u8bc1\u4e66 \u8b66\u544a \u65e0\u8bba\u4f60\u9700\u8981\u7533\u8bf7\u591a\u5c11\u4e2a\u8bc1\u4e66\uff0c\u5728\u7533\u8bf7\u4e4b\u524d\uff0c\u90fd\u8bf7\u5728\u4f60\u7684 DNS \u63d0\u4f9b\u5546\u5904\u5c06\u4f60\u6240\u9700\u8981\u7533\u8bf7 SSL \u8bc1\u4e66\u7684\u57df\u540d\u89e3\u6790\u5230\u4f60\u7684\u670d\u52a1\u5668\u4e0a\u3002 \u63d0\u793a \u6839\u636e\u4f60\u7684 80 \u7aef\u53e3\u6709\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4e24\u79cd\u6a21\u5f0f\u2014\u2014 nginx \u6216\u8005 standalone \u3002 \u4f60\u7684 80 \u7aef\u53e3\u5df2\u7ecf\u88ab nginx \uff08\u6216\u8005\u5176\u4ed6\u670d\u52a1\uff09\u5360\u7528\u4e86\uff1a certbot certonly --nginx -d example.com -d www.example.com -d another.example.com \u4f60\u7684 80 \u7aef\u53e3\u6ca1\u6709\u88ab\u4efb\u4f55\u670d\u52a1\u5360\u7528\uff1a certbot certonly --standalone -d example.com -d www.example.com -d another.example.com \u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\uff08\u4e5f\u53eb\u901a\u914d\u7b26\u8bc1\u4e66\uff09 \u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5728 DNS \u670d\u52a1\u63d0\u4f9b\u5546\u5904\u8bbe\u7f6e TXT \u8bb0\u5f55\u3002\u5e76\u4e14 \u53ea\u80fd \u901a\u8fc7\u8fd9\u4e2a\u65b9\u5f0f\u6765\u7eed\u671f\u3002 certbot certonly -d \"*.example.com\" -d \"example.com\" --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory \u6267\u884c\u4e4b\u540e\u4f1a\u4ea4\u7ed9\u4f60\u4e00\u4e2a\u6216\u4e24\u4e2a\u8bbe\u7f6e TXT \u8bb0\u5f55\u7684\u4efb\u52a1\u3002\u53bb\u4f60\u7684 DNS \u670d\u52a1\u63d0\u4f9b\u5546\u5904\u8bbe\u7f6e\u597d\u5373\u53ef\u3002 \u67e5\u770b\u81ea\u52a8\u7eed\u671f\u7684\u8ba1\u5212\u4efb\u52a1 systemctl list-timers \u624b\u52a8\u4e3a\u8bc1\u4e66\u7eed\u671f \u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u6ca1\u6709\u4e34\u8fd1\u5230\u671f\u65f6\u95f4\u7684\u8bdd\u4f1a\u505c\u6b62\u6267\u884c certbot renew \u6d4b\u8bd5\u7eed\u671f\uff0c\u4e0d\u4f1a\u771f\u7684\u7eed\u671f certbot renew --dry-run \u5f3a\u5236\u7eed\u671f certbot renew --force-renewal \u4e3a\u8bc1\u4e66\u7eed\u671f\uff08\u6cdb\u57df\u540d\uff09 \u6cdb\u57df\u540d\u8bc1\u4e66\u4e0d\u80fd\u901a\u8fc7 certbot renew \u6765\u7eed\u671f\uff0c\u9700\u8981\u624b\u52a8\u7eed\u671f\u3002\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4f60\u5728\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u65f6\u5019\u5728 DNS \u670d\u52a1\u5546\u90a3\u91cc\u6dfb\u52a0\u7684 TXT \u8bb0\u5f55\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f1a\u53d8\u5316\u7684\u503c\u3002 \u7eed\u671f\u65b9\u6cd5\u548c\u7533\u8bf7\u65b9\u6cd5\u4e00\u6a21\u4e00\u6837\uff0c\u76f8\u5f53\u4e8e\u91cd\u65b0\u7533\u8bf7\u4e00\u6b21\u3002 certbot certonly -d \"*.example.com\" -d \"example.com\" --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory \u4e2d\u9014\u540c\u6837\u9700\u8981\u4fee\u6539 DNS \u7684 TXT \u8bb0\u5f55\u8fd9\u6837\u7684\u64cd\u4f5c\u3002\u6709\u4eba\u53ef\u80fd\u4f1a\u89c9\u5f97\u5f88\u9ebb\u70e6\uff0c\u9ebb\u70e6\u4f60\u5c31\u53bb\u5199\u4e2a\u811a\u672c\u554a\u3002 \u4e8b\u5b9e\u4e0a certbot \u7684\u62a5\u9519\u4e5f\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u4ed6\u7684\u610f\u601d\u5c31\u662f\u8981\u6211\u4eec\u53bb\u5199\u4e2a\u811a\u672c\uff1a An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively. \u7f51\u4e0a\u6709\u5404\u4e2a\u7248\u672c\u7684\u811a\u672c\uff0c\u5927\u6982\u539f\u7406\u90fd\u662f\u901a\u8fc7\u4f60 DNS \u670d\u52a1\u5546\u63d0\u4f9b\u7684 Token\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u76f4\u63a5\u4fee\u6539 DNS \u7684 TXT \u8bb0\u5f55\u3002\u4e00\u641c\u4e00\u5927\u5806\u3002 \u540a\u9500\uff08\u64a4\u9500\uff09\u8bc1\u4e66 \u8fd9\u91cc\u76f4\u63a5\u5f15\u7528 Let's Encrypt \u5b98\u7f51 \u7528\u9881\u53d1\u8bc1\u4e66\u7684\u8d26\u6237\u540a\u9500\u8bc1\u4e66 certbot revoke --cert-path /etc/letsencrypt/archive/ ${ YOUR_DOMAIN } /cert1.pem \u4f7f\u7528\u8bc1\u4e66\u79c1\u94a5\u540a\u9500\u8bc1\u4e66 certbot revoke --cert-path /PATH/TO/cert.pem --key-path /PATH/TO/key.pem \u4f7f\u7528\u5176\u4ed6\u6388\u6743\u5e10\u6237\u540a\u9500\u8bc1\u4e66 \u5148\u4ece crt.sh \u4e2d\u4e0b\u8f7d\u8bc1\u4e66\uff0c\u7136\u540e\uff1a certbot revoke --cert-path /PATH/TO/downloaded-cert.pem \u5220\u9664\u8bc1\u4e66 certbot delete","title":"certbot \u5e38\u7528\u64cd\u4f5c"},{"location":"blog/2022/220407-certbot/#_1","text":"\u5b98\u7f51\u5efa\u8bae\u7528 snap \u5b89\u88c5\u3002\ud83d\udc49 https://certbot.eff.org/instructions?ws=other&os=ubuntufocal sudo snap install core sudo snap refresh core sudo snap install --classic certbot","title":"\u5b89\u88c5"},{"location":"blog/2022/220407-certbot/#_2","text":"\u8b66\u544a \u65e0\u8bba\u4f60\u9700\u8981\u7533\u8bf7\u591a\u5c11\u4e2a\u8bc1\u4e66\uff0c\u5728\u7533\u8bf7\u4e4b\u524d\uff0c\u90fd\u8bf7\u5728\u4f60\u7684 DNS \u63d0\u4f9b\u5546\u5904\u5c06\u4f60\u6240\u9700\u8981\u7533\u8bf7 SSL \u8bc1\u4e66\u7684\u57df\u540d\u89e3\u6790\u5230\u4f60\u7684\u670d\u52a1\u5668\u4e0a\u3002 \u63d0\u793a \u6839\u636e\u4f60\u7684 80 \u7aef\u53e3\u6709\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4e24\u79cd\u6a21\u5f0f\u2014\u2014 nginx \u6216\u8005 standalone \u3002 \u4f60\u7684 80 \u7aef\u53e3\u5df2\u7ecf\u88ab nginx \uff08\u6216\u8005\u5176\u4ed6\u670d\u52a1\uff09\u5360\u7528\u4e86\uff1a certbot certonly --nginx -d example.com -d www.example.com -d another.example.com \u4f60\u7684 80 \u7aef\u53e3\u6ca1\u6709\u88ab\u4efb\u4f55\u670d\u52a1\u5360\u7528\uff1a certbot certonly --standalone -d example.com -d www.example.com -d another.example.com","title":"\u7533\u8bf7\u591a\u4e2a\u57df\u540d\u8bc1\u4e66"},{"location":"blog/2022/220407-certbot/#_3","text":"\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5728 DNS \u670d\u52a1\u63d0\u4f9b\u5546\u5904\u8bbe\u7f6e TXT \u8bb0\u5f55\u3002\u5e76\u4e14 \u53ea\u80fd \u901a\u8fc7\u8fd9\u4e2a\u65b9\u5f0f\u6765\u7eed\u671f\u3002 certbot certonly -d \"*.example.com\" -d \"example.com\" --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory \u6267\u884c\u4e4b\u540e\u4f1a\u4ea4\u7ed9\u4f60\u4e00\u4e2a\u6216\u4e24\u4e2a\u8bbe\u7f6e TXT \u8bb0\u5f55\u7684\u4efb\u52a1\u3002\u53bb\u4f60\u7684 DNS \u670d\u52a1\u63d0\u4f9b\u5546\u5904\u8bbe\u7f6e\u597d\u5373\u53ef\u3002","title":"\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\uff08\u4e5f\u53eb\u901a\u914d\u7b26\u8bc1\u4e66\uff09"},{"location":"blog/2022/220407-certbot/#_4","text":"systemctl list-timers","title":"\u67e5\u770b\u81ea\u52a8\u7eed\u671f\u7684\u8ba1\u5212\u4efb\u52a1"},{"location":"blog/2022/220407-certbot/#_5","text":"\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u6ca1\u6709\u4e34\u8fd1\u5230\u671f\u65f6\u95f4\u7684\u8bdd\u4f1a\u505c\u6b62\u6267\u884c certbot renew \u6d4b\u8bd5\u7eed\u671f\uff0c\u4e0d\u4f1a\u771f\u7684\u7eed\u671f certbot renew --dry-run \u5f3a\u5236\u7eed\u671f certbot renew --force-renewal","title":"\u624b\u52a8\u4e3a\u8bc1\u4e66\u7eed\u671f"},{"location":"blog/2022/220407-certbot/#_6","text":"\u6cdb\u57df\u540d\u8bc1\u4e66\u4e0d\u80fd\u901a\u8fc7 certbot renew \u6765\u7eed\u671f\uff0c\u9700\u8981\u624b\u52a8\u7eed\u671f\u3002\u5426\u5219\u4f1a\u62a5\u9519\u3002 \u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4f60\u5728\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u65f6\u5019\u5728 DNS \u670d\u52a1\u5546\u90a3\u91cc\u6dfb\u52a0\u7684 TXT \u8bb0\u5f55\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f1a\u53d8\u5316\u7684\u503c\u3002 \u7eed\u671f\u65b9\u6cd5\u548c\u7533\u8bf7\u65b9\u6cd5\u4e00\u6a21\u4e00\u6837\uff0c\u76f8\u5f53\u4e8e\u91cd\u65b0\u7533\u8bf7\u4e00\u6b21\u3002 certbot certonly -d \"*.example.com\" -d \"example.com\" --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory \u4e2d\u9014\u540c\u6837\u9700\u8981\u4fee\u6539 DNS \u7684 TXT \u8bb0\u5f55\u8fd9\u6837\u7684\u64cd\u4f5c\u3002\u6709\u4eba\u53ef\u80fd\u4f1a\u89c9\u5f97\u5f88\u9ebb\u70e6\uff0c\u9ebb\u70e6\u4f60\u5c31\u53bb\u5199\u4e2a\u811a\u672c\u554a\u3002 \u4e8b\u5b9e\u4e0a certbot \u7684\u62a5\u9519\u4e5f\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u4ed6\u7684\u610f\u601d\u5c31\u662f\u8981\u6211\u4eec\u53bb\u5199\u4e2a\u811a\u672c\uff1a An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively. \u7f51\u4e0a\u6709\u5404\u4e2a\u7248\u672c\u7684\u811a\u672c\uff0c\u5927\u6982\u539f\u7406\u90fd\u662f\u901a\u8fc7\u4f60 DNS \u670d\u52a1\u5546\u63d0\u4f9b\u7684 Token\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u76f4\u63a5\u4fee\u6539 DNS \u7684 TXT \u8bb0\u5f55\u3002\u4e00\u641c\u4e00\u5927\u5806\u3002","title":"\u4e3a\u8bc1\u4e66\u7eed\u671f\uff08\u6cdb\u57df\u540d\uff09"},{"location":"blog/2022/220407-certbot/#_7","text":"\u8fd9\u91cc\u76f4\u63a5\u5f15\u7528 Let's Encrypt \u5b98\u7f51 \u7528\u9881\u53d1\u8bc1\u4e66\u7684\u8d26\u6237\u540a\u9500\u8bc1\u4e66 certbot revoke --cert-path /etc/letsencrypt/archive/ ${ YOUR_DOMAIN } /cert1.pem \u4f7f\u7528\u8bc1\u4e66\u79c1\u94a5\u540a\u9500\u8bc1\u4e66 certbot revoke --cert-path /PATH/TO/cert.pem --key-path /PATH/TO/key.pem \u4f7f\u7528\u5176\u4ed6\u6388\u6743\u5e10\u6237\u540a\u9500\u8bc1\u4e66 \u5148\u4ece crt.sh \u4e2d\u4e0b\u8f7d\u8bc1\u4e66\uff0c\u7136\u540e\uff1a certbot revoke --cert-path /PATH/TO/downloaded-cert.pem","title":"\u540a\u9500\uff08\u64a4\u9500\uff09\u8bc1\u4e66"},{"location":"blog/2022/220407-certbot/#_8","text":"certbot delete","title":"\u5220\u9664\u8bc1\u4e66"},{"location":"blog/2022/220407-github-pages/","tags":["github actions","github pages","mkdocs"],"text":"\u8fd9\u7bc7\u6587\u7ae0\u8bb2\u8ff0\u4e86\u5982\u4f55\u4f7f\u7528 GitHub Actions / Pages \u81ea\u52a8\u5316\u90e8\u7f72\u6587\u6863\uff0c\u4ee5\u53ca\u9047\u5230\u7684\u5751\u3002 \u5982\u4f60\u6240\u89c1\uff0c\u8fd9\u4e2a\u535a\u5ba2\u4e5f\u662f\u4f7f\u7528 GitHub Actions \u81ea\u52a8\u90e8\u7f72\u5728 GitHub Pages \u4e0a\u7684\u3002 \u8fd9\u7bc7\u6587\u7ae0\u5c06\u4ee5 MkDocs \u4e3a\u4f8b\u8bb2\u8ff0\u3002 \u672c\u5730\u90e8\u7f72\u6d4b\u8bd5 \u9996\u5148\u4f60\u81ea\u5df1\u642d\u5efa\u7684\u6587\u6863\u5f97\u5728\u672c\u5730\u80fd\u7528\u561b\uff0c\u9996\u5148\u6d4b\u8bd5\u4e0b\u672c\u5730\u662f\u5426\u80fd\u7528\uff1a mkdocs serve \u5c0f\u63d0\u793a \u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u53ef\u4ee5\u4f7f mkdocs \u8fd0\u884c\u5728\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\u4e0a\uff1a mkdocs serve -a localhost:8001 mkdocs serve --dev-addr localhost:8001 \u521b\u5efa\u672c\u5730 VCS \u5e76\u548c GitHub \u5173\u8054 \u8fd9\u91cc\u4ee5 PyCharm \u4e3a\u4f8b\uff1a \u521b\u5efa\u672c\u5730 VCS graph LR A[VCS] --> B; B[\u542f\u7528\u7248\u672c\u63a7\u5236\u96c6\u6210] --> C; C[\u9009\u62e9 Git] --> D[\u786e\u5b9a]; \u6ce8\u610f\u6709\u5751 \u8bb0\u5f97\u5728\u63d0\u4ea4\u4e4b\u524d\u5148\u521b\u5efa\u597d .gitignore \u6587\u4ef6\uff0c\u5426\u5219\u4f60\u63d0\u4ea4\u4e4b\u540e\u8fd8\u8981\u7ee7\u7eed\u63d0\u4ea4\u4e00\u6b21 .gitignore \u6587\u4ef6\u3002 \u7136\u540e\u9009\u62e9\u63d0\u4ea4\u3002 \u548c GitHub \u5173\u8054 \u8fd9\u4e00\u6b65\u5176\u5b9e\u662f\u5728 GitHub \u4e0a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u4ed3\u5e93\u3002\u5982\u679c\u4ed3\u5e93\u5df2\u7ecf\u5b58\u5728\u7684\u8bdd\uff0c\u53ef\u80fd\u9700\u8981 Merge \u6216\u8005 Rebase\u3002 graph LR A[Git] --> B; B[GitHub] --> C; C[\u5728 GitHub \u4e0a\u5171\u4eab\u9879\u76ee] --> D[\u786e\u5b9a]; \u5728 GitHub \u4e0a\u521b\u5efa Actions \u4efb\u52a1 \u8fd9\u4e00\u6b65\u5751\u5de8\u591a\u3002 \u9996\u5148\u70b9\u51fb Actions -> set up a workflow yourself \u6309\u7167\u4efb\u4f55\u4e00\u4e2a\u4f60\u80fd\u627e\u5230\u7684 Pages \u90e8\u7f72\u6587\u6863\u6765\u5199\u8fd9\u4e2a yml \u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u91c7\u7528 Material for MkDocs \u7684\u6a21\u677f\u3002 \u5c0f\u63d0\u793a \u7528 MkDocs \u5b98\u7f51 \u7684\u4e5f\u884c\uff0c\u53ea\u4e0d\u8fc7\u4eba\u5bb6\u4e0d\u4f1a\u544a\u8bc9\u4f60\u600e\u4e48\u5199\u8fd9\u4e2a yml \u6587\u4ef6\u3002 \u5728 2022\u5e744\u67086\u65e5 \u7684\u65f6\u5019\u6211\u4ece\u8fd9\u91cc\u627e\u5230\u7684\u6a21\u677f\u662f\u8fd9\u6837\u7684\uff0c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u53ef\u80fd\u4f1a\u6709\u53d8\u66f4\uff0c\u5efa\u8bae\u4ece\u539f\u6587\u6863\u53bb\u590d\u5236\u3002 main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 name : ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install mkdocs-material - run : mkdocs gh-deploy --force \u6ce8\u610f\u6709\u5751 \u9996\u5148\u4ed6\u8fd9\u4e2a\u6d41\u7a0b\uff0c\u5f88\u660e\u663e\u53ea\u7528 pip \u5b89\u88c5\u4e86 mkdocs-material \uff0c\u4f46\u662f\u5b83\u5e76\u6ca1\u6709\u5b89\u88c5 mkdocs \u3002\u5176\u5b9e\u8fd9\u65e0\u6240\u8c13\uff0c\u56e0\u4e3a mkdocs-material \u7684 requirements.txt \u4e2d\u5df2\u7ecf\u5305\u542b\u4e86 mkdocs \uff0c\u4f1a\u4e00\u5e76\u5b89\u88c5\u3002 \u91cd\u70b9\u7684\u5730\u65b9\u662f\uff0c\u5982\u679c\u4f60\u5728\u672c\u5730\u6784\u5efa\u7684\u65f6\u5019\u4f9d\u8d56\u4e86\u5176\u4ed6\u7684\u5e93\uff08\u6bd4\u5982 mkdocs-blogging-plugin \uff09\uff0c\u90a3\u4f60\u5f97\u5728 run: \u4e2d\u901a\u8fc7 pip install \u5b89\u88c5\u8fd9\u4e9b\u5e93\u3002 \u6ce8\u610f\u6709\u5751 \u5751\u8fd8\u6ca1\u5b8c\uff0c\u5982\u679c\u4f60\u548c\u6211\u4e00\u6837\u662f mkdocs-blogging-plugin \u7684\u4f7f\u7528\u8005\uff0c\u4f60\u8fd8\u4f1a\u9047\u5230\u7f51\u7ad9\u7684\u6e32\u67d3\u95ee\u9898\uff0c\u8fd9\u91cc\u5b98\u7f51\u4e5f\u7ed9\u4e86\u89e3\u51b3\u65b9\u6848\u3002 https://liang2kl.codes/mkdocs-blogging-plugin/#publish-with-github-pages \u6ce8\u610f\uff0c\u8bf7\u4e0d\u8981\u8ddf\u968f\u5b98\u7f51\u90a3\u7bc7\u6587\u6863\u91cc\u6240\u8bf4\u7684\u8bbe\u5b9a locale: zh-CN \u8fd9\u4e2a\u952e\uff0c\u540e\u9762\u4f1a\u8bf4\u5230\u539f\u56e0\u3002 \u6700\u7ec8\u6211\u7684 main.yml \uff08\u540e\u6765\u91cd\u547d\u540d\u6210 ci.yml \u4e86\uff09\u957f\u8fd9\u6837\uff1a main.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 name : ci on : push : branches : - master jobs : deploy : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 with : # mkdocs-blogging-plugin \u7ed9\u51fa\u7684\u6e32\u67d3\u95ee\u9898\u89e3\u51b3\u65b9\u6848 fetch-depth : 0 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install mkdocs - run : pip install mkdocs-material - run : pip install mkdocs-blogging-plugin # \u8bb0\u5f97\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u7684\u5e93 - run : mkdocs gh-deploy --force \u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u53ef\u4ee5\u5728 Actions \u9875\u9762\u70b9 Start commit \u4e86\u3002\u53ea\u8981\u4f60\u7684\u672c\u5730\u90e8\u7f72\u53ef\u4ee5\u901a\u8fc7\uff0c\u5728 Actions \u4e0a\u5e94\u8be5\u4e5f\u662f\u53ef\u4ee5\u901a\u8fc7\u7684\u3002 \u5982\u679c Actions \u7684 build \u6216\u8005 deploy \u9636\u6bb5\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u8bf4\u660e\u53ef\u80fd\u662f\u90a3\u51e0\u4e2a run \u91cc\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u90a3\u4f60\u5e94\u8be5\u5728\u672c\u5730\u8bd5\u4e00\u4e0b\uff1a \u662f\u4e0d\u662f\u6709\u5305\u5fd8\u4e86 pip install \uff1f \u672c\u5730\u80fd\u6b63\u5e38 mkdocs build \u561b\uff1f \u4e4b\u524d\u9047\u5230\u4e86\u4e00\u4e2a\u5178\u578b\u7684\u95ee\u9898\u5bfc\u81f4 build \u5931\u8d25\uff1a \u6ce8\u610f\u6709\u5751 mkdocs-blogging-plugin \u7684\u5b98\u7f51 \u6587\u6863 \u91cc\u8bf4\uff0c\u8981\u5728 blogging \u91cc\u5efa\u4e00\u4e2a locale: zh-CN \u6765\u8bbe\u7f6e\u65f6\u95f4\u683c\u5f0f\uff0c\u4f46\u662f\u5b9e\u9645\u8fd9\u6837\u505a\u4f1a\u62a5\u9519\uff1a ValueError: expected only letters, got 'zh-cn' \uff0c \u89e3\u51b3\u65b9\u6cd5\uff1a\u4e0d\u8981\u5199 locale: zh-CN \uff0c\u8981\u5199 locale: zh_CN \u6216\u8005\u5e72\u8106\u5199 locale: zh mkdocs.yml 1 2 3 plugins : - blogging : locale : zh_CN \u5751\u8fd8\u6ca1\u7ed3\u675f\uff0c\u7ee7\u7eed\u5f80\u4e0b\u770b \u8bbe\u7f6e Pages \u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u7ed3\u675f\u4e86\uff1f \u8fd8\u6ca1\u6709\uff01 Actions \u7ed3\u675f\u540e\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u9875\u9762\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u81ea\u5df1\u53bb\u627e\uff09\uff0c\u4f60\u70b9\u5f00\u8fd9\u4e2a\u9875\u9762\u4f1a\u76f4\u63a5\u544a\u8bc9\u4f60 404 \u3002 \u8fd9\u662f\u56e0\u4e3a\u4f60\u8fd8\u6ca1\u6709\u4e3a Pages \u6307\u5b9a\u5177\u4f53\u7684\u9875\u9762\u3002 \u5c0f\u63d0\u793a \u8fd9\u91cc\u7b80\u5355\u8bf4\u4e00\u4e0b\uff0c\u5f88\u591a\u4eba\u8ba4\u4e3a Actions \u548c Pages \u662f\u4e00\u4e2a\u4e1c\u897f\uff0c\u56e0\u4e3a\u5f88\u591a\u4eba\u7ecf\u5e38\u7528\u8fd9\u4fe9\u4e00\u8d77\u6765\u90e8\u7f72\u9875\u9762\u3002\u4f46\u662f\u5176\u5b9e\u8fd9\u4fe9\u7684\u529f\u80fd\u662f\u5404\u6709\u5206\u5de5\u3002 - Actions \u7684\u4e3b\u8981\u529f\u80fd\u662f\u7f16\u8bd1\uff0c\u5c31\u662f\u4f60\u6307\u5b9a\u4e00\u4e2a\u73af\u5883\uff0c\u7ed9\u51fa\u4e00\u4e9b\u7f16\u8bd1\u4e2d\u8981\u6267\u884c\u7684\u547d\u4ee4\u884c\uff0c\u7136\u540e\u7ed9\u51fa\u4f60\u7684\u6e90\u4ee3\u7801\uff08\u8fd9\u91cc\u7684\u6e90\u4ee3\u7801 GitHub \u4f1a\u81ea\u52a8\u4ece\u4f60\u7684 repo \u91cc\u83b7\u53d6\u6240\u4ee5\u4e0d\u7528\u7ba1\uff09\uff0cGitHub Actions \u5c31\u4f1a\u4ece\u6e90\u4ee3\u7801\u91cc\u7f16\u8bd1\u51fa\u5bf9\u5e94\u7684\u9759\u6001\u6587\u4ef6\uff0c\u8fd9\u4e9b\u9759\u6001\u6587\u4ef6\u53ef\u80fd\u662f\u5404\u79cd\u6587\u4ef6\uff0c\u6bd4\u5982\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6216\u8005\u662f\u7f51\u9875\u3002 - Pages \u7684\u4e3b\u8981\u529f\u80fd\u662f\u5728 <user>.github.io \u4e0a\u90e8\u7f72\u7f51\u9875\u3002 Actions \u6bd5\u7adf\u53ea\u662f Actions\uff0c\u4ed6\u53c8\u4e0d\u662f\u548c Pages \u8054\u52a8\u7684\uff0c\u6240\u4ee5\u4f60\u5c31\u7b97 Actions \u7f16\u8bd1\u51fa\u4e86\u7f51\u9875\u4e5f\u662f\u4e0d\u4f1a\u7ed9\u4f60\u81ea\u52a8\u90e8\u7f72\u5230 Pages \u4e0a\u7684\u3002 \u63a5\u4e0b\u6765\u624b\u52a8\u8bbe\u7f6e Pages\uff1a graph LR A[\u6253\u5f00\u4f60\u7684\u9879\u76ee\u4ed3\u5e93] --> B; B[Settings] --> C; C[Pages] --> D[Source]; \u9009\u62e9\u5206\u652f\u4e3a gh-pages \uff0c\u8fd9\u662f Actions \u81ea\u52a8\u6784\u5efa\u7684\u6587\u4ef6\u6240\u5b58\u653e\u7684\u5206\u652f\uff0c\u76ee\u5f55\u9009\u62e9 / \u3002 \u70b9 save \uff0c\u8fd9\u4e0b\u662f\u771f\u6ca1\u95ee\u9898\u4e86\u3002 \uff08\u53ef\u9009\uff09\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d \u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d\u53c8\u4f1a\u5e26\u6765\u4e24\u4e2a\u5751\uff0c\u65e0\u8bed\u3002 \u9996\u5148\u4f60\u5728\u8bbe\u7f6e Source \u7684\u65f6\u5019\uff0c\u80fd\u770b\u5230\u4e0b\u9762\u4e00\u680f\u662f Custom domain \uff0c\u8fd9\u4e2a\u5c31\u662f\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u6211\u8fd9\u4e2a\u535a\u5ba2\u6784\u5efa\u5728\u4e86 https://zhanbao2000.github.io/blog \uff0c\u4f46\u662f\u6211\u60f3\u8ba9 https://blog.arisa.moe/ \u6307\u5411\u8fd9\u4e2a\u535a\u5ba2\uff0c\u5c31\u5f97\u4fee\u6539\u8fd9\u73a9\u610f\u3002 \u5c0f\u63d0\u793a \u73b0\u5728\u8bbf\u95ee https://zhanbao2000.github.io/blog \u4f1a\u88ab 301 \u91cd\u5b9a\u5411\u5230 https://blog.arisa.moe/ \u76f4\u63a5\u5728\u6846\u6846\u91cc\u5199\u4f60\u7684\u57df\u540d\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u5e94\u8be5\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u4ee5\u672c\u7ad9\u4e3a\u4f8b\uff1a \u627e\u5230\u4f60\u57df\u540d\u7684 DNS \u670d\u52a1\u5546\uff0c\u6dfb\u52a0\u4e00\u4e2a CNAME \u8bb0\u5f55\uff1a blog.arisa.moe. 1 IN CNAME zhanbao2000.github.io. \u5728\u521a\u521a\u90a3\u4e2a\u6846\u91cc\u8f93\u5165 blog.arisa.moe \uff0c\u70b9 save \u3002 \u8fc7\u4e00\u4f1a\u5c31\u597d\u4e86\u3002 \u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u5b8c\u4e86\uff1f \u6ce8\u610f\u6709\u5751 \u5982\u679c\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u5b8c\u4e86\uff0c\u7b49\u4f60\u4e0b\u6b21\u518d\u901a\u8fc7 git push \u63d0\u4ea4\u6587\u6863/\u535a\u5ba2\u7684\u65f6\u5019\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u5df2\u7ecf\u53d8\u6210 404 \u4e86\u3002 \u6b64\u65f6\u4f60\u6253\u5f00 GitHub \u5bf9\u5e94\u4ed3\u5e93\u7684 Settings \u4e00\u770b\uff0c\u597d\u5bb6\u4f19\uff0c\u6846\u6846\u91cc\u4ec0\u4e48\u90fd\u6ca1\u6709\u4e86\u3002 \u5148\u8bf4\u89e3\u51b3\u65b9\u6cd5\u518d\u8bf4\u539f\u56e0\u3002 \u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u5728 docs \u6587\u4ef6\u5939\u91cc\u521b\u5efa\u4e00\u4e2a CNAME \u6587\u4ef6\uff0c\u5185\u5bb9\u5199\u4e0a\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4e0b\u6b21 Actions \u8fd0\u884c\u7684\u65f6\u5019\uff0cPages \u5c31\u4f1a\u81ea\u52a8\u628a\u8fd9\u4e2a\u57df\u540d\u8bbe\u7f6e\u6210\u81ea\u5b9a\u4e49\u57df\u540d\u4e86\u3002 \u53c2\u8003\u4ee5\u4e0b\uff1a Deploying seems to overwrite custom domain #213 gh-pages -d dist overwrites custom domain #127 MkDocs - Custom Domains \ud83d\udc49 \u5176\u5b9e MkDocs \u5b98\u7f51\u6709\u5199 \u8fd9\u4e9b issues \u65e0\u4e00\u4f8b\u5916\u90fd\u63d0\u5230\u4e86\u8981\u521b\u5efa\u4e00\u4e2a CNAME \u6587\u4ef6\u6765\u6307\u793a\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u3002\u4f46\u662f\u8ddd\u79bb issue \u63d0\u51fa\u597d\u50cf\u5df2\u7ecf\u8fc7\u4e865\u5e74\u4e86\u4e5f\u6ca1\u89c1\u5230 GitHub \u5b98\u65b9\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002 \u6211\u81ea\u5df1\u63a8\u6d4b\u7684\u539f\u56e0\u662f\u8fd9\u6837\u7684\uff1a \u5728 Pages \u9875\u9762\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u662f\u5728\u9879\u76ee\u751f\u6210\u76ee\u5f55\u91cc\u81ea\u52a8\u521b\u5efa\u4e86\u4e00\u4e2a CNAME \u6587\u4ef6\u7684\uff0c\u548c\u6211\u4eec\u624b\u52a8\u521b\u5efa\u7684\u6548\u679c\u4e00\u6837\u3002\u4f46\u662f\u5728 Actions \u8fd0\u4f5c\u7684\u65f6\u5019\uff0c\u4f1a\u8986\u76d6\u6389\u6574\u4e2a\u9879\u76ee\u751f\u6210\u76ee\u5f55\uff0c\u5305\u62ec\u8fd9\u4e2a CNAME \u6587\u4ef6\u3002 \u90a3\u4e48\u5c31\u6709\u4e24\u4e2a\u529e\u6cd5\u6765\u89e3\u51b3\uff1a \u6bcf\u6b21 Actions \u7ed3\u675f\u4e4b\u540e\uff0c\u624b\u52a8\u53bb Pages \u9875\u9762\u6dfb\u52a0\u81ea\u5b9a\u4e49\u57df\u540d\u3002 \u8ba9 Actions \u7ed3\u675f\u4e4b\u540e\uff0c\u9879\u76ee\u751f\u6210\u76ee\u5f55\u91cc\u59cb\u7ec8\u6709\u8fd9\u4e2a CNAME \u6587\u4ef6\u3002 \u4e8e\u662f\u6211\u4eec\u9009\u62e9\u4e86\u540e\u8005\u3002","title":"GitHub Pages \u6587\u6863\u81ea\u52a8\u5316\u90e8\u7f72 - MkDocs"},{"location":"blog/2022/220407-github-pages/#_1","text":"\u9996\u5148\u4f60\u81ea\u5df1\u642d\u5efa\u7684\u6587\u6863\u5f97\u5728\u672c\u5730\u80fd\u7528\u561b\uff0c\u9996\u5148\u6d4b\u8bd5\u4e0b\u672c\u5730\u662f\u5426\u80fd\u7528\uff1a mkdocs serve \u5c0f\u63d0\u793a \u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u53ef\u4ee5\u4f7f mkdocs \u8fd0\u884c\u5728\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\u4e0a\uff1a mkdocs serve -a localhost:8001 mkdocs serve --dev-addr localhost:8001","title":"\u672c\u5730\u90e8\u7f72\u6d4b\u8bd5"},{"location":"blog/2022/220407-github-pages/#vcs-github","text":"\u8fd9\u91cc\u4ee5 PyCharm \u4e3a\u4f8b\uff1a","title":"\u521b\u5efa\u672c\u5730 VCS \u5e76\u548c GitHub \u5173\u8054"},{"location":"blog/2022/220407-github-pages/#vcs","text":"graph LR A[VCS] --> B; B[\u542f\u7528\u7248\u672c\u63a7\u5236\u96c6\u6210] --> C; C[\u9009\u62e9 Git] --> D[\u786e\u5b9a]; \u6ce8\u610f\u6709\u5751 \u8bb0\u5f97\u5728\u63d0\u4ea4\u4e4b\u524d\u5148\u521b\u5efa\u597d .gitignore \u6587\u4ef6\uff0c\u5426\u5219\u4f60\u63d0\u4ea4\u4e4b\u540e\u8fd8\u8981\u7ee7\u7eed\u63d0\u4ea4\u4e00\u6b21 .gitignore \u6587\u4ef6\u3002 \u7136\u540e\u9009\u62e9\u63d0\u4ea4\u3002","title":"\u521b\u5efa\u672c\u5730 VCS"},{"location":"blog/2022/220407-github-pages/#github","text":"\u8fd9\u4e00\u6b65\u5176\u5b9e\u662f\u5728 GitHub \u4e0a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u4ed3\u5e93\u3002\u5982\u679c\u4ed3\u5e93\u5df2\u7ecf\u5b58\u5728\u7684\u8bdd\uff0c\u53ef\u80fd\u9700\u8981 Merge \u6216\u8005 Rebase\u3002 graph LR A[Git] --> B; B[GitHub] --> C; C[\u5728 GitHub \u4e0a\u5171\u4eab\u9879\u76ee] --> D[\u786e\u5b9a];","title":"\u548c GitHub \u5173\u8054"},{"location":"blog/2022/220407-github-pages/#github-actions","text":"\u8fd9\u4e00\u6b65\u5751\u5de8\u591a\u3002 \u9996\u5148\u70b9\u51fb Actions -> set up a workflow yourself \u6309\u7167\u4efb\u4f55\u4e00\u4e2a\u4f60\u80fd\u627e\u5230\u7684 Pages \u90e8\u7f72\u6587\u6863\u6765\u5199\u8fd9\u4e2a yml \u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u91c7\u7528 Material for MkDocs \u7684\u6a21\u677f\u3002 \u5c0f\u63d0\u793a \u7528 MkDocs \u5b98\u7f51 \u7684\u4e5f\u884c\uff0c\u53ea\u4e0d\u8fc7\u4eba\u5bb6\u4e0d\u4f1a\u544a\u8bc9\u4f60\u600e\u4e48\u5199\u8fd9\u4e2a yml \u6587\u4ef6\u3002 \u5728 2022\u5e744\u67086\u65e5 \u7684\u65f6\u5019\u6211\u4ece\u8fd9\u91cc\u627e\u5230\u7684\u6a21\u677f\u662f\u8fd9\u6837\u7684\uff0c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u53ef\u80fd\u4f1a\u6709\u53d8\u66f4\uff0c\u5efa\u8bae\u4ece\u539f\u6587\u6863\u53bb\u590d\u5236\u3002 main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 name : ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install mkdocs-material - run : mkdocs gh-deploy --force \u6ce8\u610f\u6709\u5751 \u9996\u5148\u4ed6\u8fd9\u4e2a\u6d41\u7a0b\uff0c\u5f88\u660e\u663e\u53ea\u7528 pip \u5b89\u88c5\u4e86 mkdocs-material \uff0c\u4f46\u662f\u5b83\u5e76\u6ca1\u6709\u5b89\u88c5 mkdocs \u3002\u5176\u5b9e\u8fd9\u65e0\u6240\u8c13\uff0c\u56e0\u4e3a mkdocs-material \u7684 requirements.txt \u4e2d\u5df2\u7ecf\u5305\u542b\u4e86 mkdocs \uff0c\u4f1a\u4e00\u5e76\u5b89\u88c5\u3002 \u91cd\u70b9\u7684\u5730\u65b9\u662f\uff0c\u5982\u679c\u4f60\u5728\u672c\u5730\u6784\u5efa\u7684\u65f6\u5019\u4f9d\u8d56\u4e86\u5176\u4ed6\u7684\u5e93\uff08\u6bd4\u5982 mkdocs-blogging-plugin \uff09\uff0c\u90a3\u4f60\u5f97\u5728 run: \u4e2d\u901a\u8fc7 pip install \u5b89\u88c5\u8fd9\u4e9b\u5e93\u3002 \u6ce8\u610f\u6709\u5751 \u5751\u8fd8\u6ca1\u5b8c\uff0c\u5982\u679c\u4f60\u548c\u6211\u4e00\u6837\u662f mkdocs-blogging-plugin \u7684\u4f7f\u7528\u8005\uff0c\u4f60\u8fd8\u4f1a\u9047\u5230\u7f51\u7ad9\u7684\u6e32\u67d3\u95ee\u9898\uff0c\u8fd9\u91cc\u5b98\u7f51\u4e5f\u7ed9\u4e86\u89e3\u51b3\u65b9\u6848\u3002 https://liang2kl.codes/mkdocs-blogging-plugin/#publish-with-github-pages \u6ce8\u610f\uff0c\u8bf7\u4e0d\u8981\u8ddf\u968f\u5b98\u7f51\u90a3\u7bc7\u6587\u6863\u91cc\u6240\u8bf4\u7684\u8bbe\u5b9a locale: zh-CN \u8fd9\u4e2a\u952e\uff0c\u540e\u9762\u4f1a\u8bf4\u5230\u539f\u56e0\u3002 \u6700\u7ec8\u6211\u7684 main.yml \uff08\u540e\u6765\u91cd\u547d\u540d\u6210 ci.yml \u4e86\uff09\u957f\u8fd9\u6837\uff1a main.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 name : ci on : push : branches : - master jobs : deploy : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 with : # mkdocs-blogging-plugin \u7ed9\u51fa\u7684\u6e32\u67d3\u95ee\u9898\u89e3\u51b3\u65b9\u6848 fetch-depth : 0 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install mkdocs - run : pip install mkdocs-material - run : pip install mkdocs-blogging-plugin # \u8bb0\u5f97\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u7684\u5e93 - run : mkdocs gh-deploy --force \u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u53ef\u4ee5\u5728 Actions \u9875\u9762\u70b9 Start commit \u4e86\u3002\u53ea\u8981\u4f60\u7684\u672c\u5730\u90e8\u7f72\u53ef\u4ee5\u901a\u8fc7\uff0c\u5728 Actions \u4e0a\u5e94\u8be5\u4e5f\u662f\u53ef\u4ee5\u901a\u8fc7\u7684\u3002 \u5982\u679c Actions \u7684 build \u6216\u8005 deploy \u9636\u6bb5\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u8bf4\u660e\u53ef\u80fd\u662f\u90a3\u51e0\u4e2a run \u91cc\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u90a3\u4f60\u5e94\u8be5\u5728\u672c\u5730\u8bd5\u4e00\u4e0b\uff1a \u662f\u4e0d\u662f\u6709\u5305\u5fd8\u4e86 pip install \uff1f \u672c\u5730\u80fd\u6b63\u5e38 mkdocs build \u561b\uff1f \u4e4b\u524d\u9047\u5230\u4e86\u4e00\u4e2a\u5178\u578b\u7684\u95ee\u9898\u5bfc\u81f4 build \u5931\u8d25\uff1a \u6ce8\u610f\u6709\u5751 mkdocs-blogging-plugin \u7684\u5b98\u7f51 \u6587\u6863 \u91cc\u8bf4\uff0c\u8981\u5728 blogging \u91cc\u5efa\u4e00\u4e2a locale: zh-CN \u6765\u8bbe\u7f6e\u65f6\u95f4\u683c\u5f0f\uff0c\u4f46\u662f\u5b9e\u9645\u8fd9\u6837\u505a\u4f1a\u62a5\u9519\uff1a ValueError: expected only letters, got 'zh-cn' \uff0c \u89e3\u51b3\u65b9\u6cd5\uff1a\u4e0d\u8981\u5199 locale: zh-CN \uff0c\u8981\u5199 locale: zh_CN \u6216\u8005\u5e72\u8106\u5199 locale: zh mkdocs.yml 1 2 3 plugins : - blogging : locale : zh_CN \u5751\u8fd8\u6ca1\u7ed3\u675f\uff0c\u7ee7\u7eed\u5f80\u4e0b\u770b","title":"\u5728 GitHub \u4e0a\u521b\u5efa Actions \u4efb\u52a1"},{"location":"blog/2022/220407-github-pages/#pages","text":"\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u7ed3\u675f\u4e86\uff1f \u8fd8\u6ca1\u6709\uff01 Actions \u7ed3\u675f\u540e\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u9875\u9762\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u81ea\u5df1\u53bb\u627e\uff09\uff0c\u4f60\u70b9\u5f00\u8fd9\u4e2a\u9875\u9762\u4f1a\u76f4\u63a5\u544a\u8bc9\u4f60 404 \u3002 \u8fd9\u662f\u56e0\u4e3a\u4f60\u8fd8\u6ca1\u6709\u4e3a Pages \u6307\u5b9a\u5177\u4f53\u7684\u9875\u9762\u3002 \u5c0f\u63d0\u793a \u8fd9\u91cc\u7b80\u5355\u8bf4\u4e00\u4e0b\uff0c\u5f88\u591a\u4eba\u8ba4\u4e3a Actions \u548c Pages \u662f\u4e00\u4e2a\u4e1c\u897f\uff0c\u56e0\u4e3a\u5f88\u591a\u4eba\u7ecf\u5e38\u7528\u8fd9\u4fe9\u4e00\u8d77\u6765\u90e8\u7f72\u9875\u9762\u3002\u4f46\u662f\u5176\u5b9e\u8fd9\u4fe9\u7684\u529f\u80fd\u662f\u5404\u6709\u5206\u5de5\u3002 - Actions \u7684\u4e3b\u8981\u529f\u80fd\u662f\u7f16\u8bd1\uff0c\u5c31\u662f\u4f60\u6307\u5b9a\u4e00\u4e2a\u73af\u5883\uff0c\u7ed9\u51fa\u4e00\u4e9b\u7f16\u8bd1\u4e2d\u8981\u6267\u884c\u7684\u547d\u4ee4\u884c\uff0c\u7136\u540e\u7ed9\u51fa\u4f60\u7684\u6e90\u4ee3\u7801\uff08\u8fd9\u91cc\u7684\u6e90\u4ee3\u7801 GitHub \u4f1a\u81ea\u52a8\u4ece\u4f60\u7684 repo \u91cc\u83b7\u53d6\u6240\u4ee5\u4e0d\u7528\u7ba1\uff09\uff0cGitHub Actions \u5c31\u4f1a\u4ece\u6e90\u4ee3\u7801\u91cc\u7f16\u8bd1\u51fa\u5bf9\u5e94\u7684\u9759\u6001\u6587\u4ef6\uff0c\u8fd9\u4e9b\u9759\u6001\u6587\u4ef6\u53ef\u80fd\u662f\u5404\u79cd\u6587\u4ef6\uff0c\u6bd4\u5982\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6216\u8005\u662f\u7f51\u9875\u3002 - Pages \u7684\u4e3b\u8981\u529f\u80fd\u662f\u5728 <user>.github.io \u4e0a\u90e8\u7f72\u7f51\u9875\u3002 Actions \u6bd5\u7adf\u53ea\u662f Actions\uff0c\u4ed6\u53c8\u4e0d\u662f\u548c Pages \u8054\u52a8\u7684\uff0c\u6240\u4ee5\u4f60\u5c31\u7b97 Actions \u7f16\u8bd1\u51fa\u4e86\u7f51\u9875\u4e5f\u662f\u4e0d\u4f1a\u7ed9\u4f60\u81ea\u52a8\u90e8\u7f72\u5230 Pages \u4e0a\u7684\u3002 \u63a5\u4e0b\u6765\u624b\u52a8\u8bbe\u7f6e Pages\uff1a graph LR A[\u6253\u5f00\u4f60\u7684\u9879\u76ee\u4ed3\u5e93] --> B; B[Settings] --> C; C[Pages] --> D[Source]; \u9009\u62e9\u5206\u652f\u4e3a gh-pages \uff0c\u8fd9\u662f Actions \u81ea\u52a8\u6784\u5efa\u7684\u6587\u4ef6\u6240\u5b58\u653e\u7684\u5206\u652f\uff0c\u76ee\u5f55\u9009\u62e9 / \u3002 \u70b9 save \uff0c\u8fd9\u4e0b\u662f\u771f\u6ca1\u95ee\u9898\u4e86\u3002","title":"\u8bbe\u7f6e Pages"},{"location":"blog/2022/220407-github-pages/#_2","text":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d\u53c8\u4f1a\u5e26\u6765\u4e24\u4e2a\u5751\uff0c\u65e0\u8bed\u3002 \u9996\u5148\u4f60\u5728\u8bbe\u7f6e Source \u7684\u65f6\u5019\uff0c\u80fd\u770b\u5230\u4e0b\u9762\u4e00\u680f\u662f Custom domain \uff0c\u8fd9\u4e2a\u5c31\u662f\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u6211\u8fd9\u4e2a\u535a\u5ba2\u6784\u5efa\u5728\u4e86 https://zhanbao2000.github.io/blog \uff0c\u4f46\u662f\u6211\u60f3\u8ba9 https://blog.arisa.moe/ \u6307\u5411\u8fd9\u4e2a\u535a\u5ba2\uff0c\u5c31\u5f97\u4fee\u6539\u8fd9\u73a9\u610f\u3002 \u5c0f\u63d0\u793a \u73b0\u5728\u8bbf\u95ee https://zhanbao2000.github.io/blog \u4f1a\u88ab 301 \u91cd\u5b9a\u5411\u5230 https://blog.arisa.moe/ \u76f4\u63a5\u5728\u6846\u6846\u91cc\u5199\u4f60\u7684\u57df\u540d\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u5e94\u8be5\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u4ee5\u672c\u7ad9\u4e3a\u4f8b\uff1a \u627e\u5230\u4f60\u57df\u540d\u7684 DNS \u670d\u52a1\u5546\uff0c\u6dfb\u52a0\u4e00\u4e2a CNAME \u8bb0\u5f55\uff1a blog.arisa.moe. 1 IN CNAME zhanbao2000.github.io. \u5728\u521a\u521a\u90a3\u4e2a\u6846\u91cc\u8f93\u5165 blog.arisa.moe \uff0c\u70b9 save \u3002 \u8fc7\u4e00\u4f1a\u5c31\u597d\u4e86\u3002 \u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u5b8c\u4e86\uff1f \u6ce8\u610f\u6709\u5751 \u5982\u679c\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u5b8c\u4e86\uff0c\u7b49\u4f60\u4e0b\u6b21\u518d\u901a\u8fc7 git push \u63d0\u4ea4\u6587\u6863/\u535a\u5ba2\u7684\u65f6\u5019\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u5df2\u7ecf\u53d8\u6210 404 \u4e86\u3002 \u6b64\u65f6\u4f60\u6253\u5f00 GitHub \u5bf9\u5e94\u4ed3\u5e93\u7684 Settings \u4e00\u770b\uff0c\u597d\u5bb6\u4f19\uff0c\u6846\u6846\u91cc\u4ec0\u4e48\u90fd\u6ca1\u6709\u4e86\u3002 \u5148\u8bf4\u89e3\u51b3\u65b9\u6cd5\u518d\u8bf4\u539f\u56e0\u3002 \u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u5728 docs \u6587\u4ef6\u5939\u91cc\u521b\u5efa\u4e00\u4e2a CNAME \u6587\u4ef6\uff0c\u5185\u5bb9\u5199\u4e0a\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4e0b\u6b21 Actions \u8fd0\u884c\u7684\u65f6\u5019\uff0cPages \u5c31\u4f1a\u81ea\u52a8\u628a\u8fd9\u4e2a\u57df\u540d\u8bbe\u7f6e\u6210\u81ea\u5b9a\u4e49\u57df\u540d\u4e86\u3002 \u53c2\u8003\u4ee5\u4e0b\uff1a Deploying seems to overwrite custom domain #213 gh-pages -d dist overwrites custom domain #127 MkDocs - Custom Domains \ud83d\udc49 \u5176\u5b9e MkDocs \u5b98\u7f51\u6709\u5199 \u8fd9\u4e9b issues \u65e0\u4e00\u4f8b\u5916\u90fd\u63d0\u5230\u4e86\u8981\u521b\u5efa\u4e00\u4e2a CNAME \u6587\u4ef6\u6765\u6307\u793a\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u3002\u4f46\u662f\u8ddd\u79bb issue \u63d0\u51fa\u597d\u50cf\u5df2\u7ecf\u8fc7\u4e865\u5e74\u4e86\u4e5f\u6ca1\u89c1\u5230 GitHub \u5b98\u65b9\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002 \u6211\u81ea\u5df1\u63a8\u6d4b\u7684\u539f\u56e0\u662f\u8fd9\u6837\u7684\uff1a \u5728 Pages \u9875\u9762\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u662f\u5728\u9879\u76ee\u751f\u6210\u76ee\u5f55\u91cc\u81ea\u52a8\u521b\u5efa\u4e86\u4e00\u4e2a CNAME \u6587\u4ef6\u7684\uff0c\u548c\u6211\u4eec\u624b\u52a8\u521b\u5efa\u7684\u6548\u679c\u4e00\u6837\u3002\u4f46\u662f\u5728 Actions \u8fd0\u4f5c\u7684\u65f6\u5019\uff0c\u4f1a\u8986\u76d6\u6389\u6574\u4e2a\u9879\u76ee\u751f\u6210\u76ee\u5f55\uff0c\u5305\u62ec\u8fd9\u4e2a CNAME \u6587\u4ef6\u3002 \u90a3\u4e48\u5c31\u6709\u4e24\u4e2a\u529e\u6cd5\u6765\u89e3\u51b3\uff1a \u6bcf\u6b21 Actions \u7ed3\u675f\u4e4b\u540e\uff0c\u624b\u52a8\u53bb Pages \u9875\u9762\u6dfb\u52a0\u81ea\u5b9a\u4e49\u57df\u540d\u3002 \u8ba9 Actions \u7ed3\u675f\u4e4b\u540e\uff0c\u9879\u76ee\u751f\u6210\u76ee\u5f55\u91cc\u59cb\u7ec8\u6709\u8fd9\u4e2a CNAME \u6587\u4ef6\u3002 \u4e8e\u662f\u6211\u4eec\u9009\u62e9\u4e86\u540e\u8005\u3002","title":"\uff08\u53ef\u9009\uff09\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d"},{"location":"blog/2022/220408-github-pages-2/","tags":["github actions","github pages","vuepress"],"text":"\u4e0a\u4e00\u7bc7\u535a\u5ba2\u8bf4\u5230\u4e86 MkDocs \u90e8\u7f72\u9047\u5230\u7684\u5751\uff0c\u8fd9\u7bc7\u6587\u7ae0\u6765\u8bf4\u8bf4 VuePress \u7684\u90e8\u7f72\u3002 \u6ce8\u610f \u6211\u4f7f\u7528\u7684\u662f VuePress v1.x \uff0c\u8de8\u7248\u672c\u51fa\u73b0\u7684\u5751\u672c\u4eba\u4e00\u6982\u4e0d\u77e5\u3002 \u672c\u5730\u90e8\u7f72\u6d4b\u8bd5 \u9996\u5148\u540c\u6837\u662f\u672c\u5730\u90e8\u7f72 npm yarn npm run docs:build yarn docs:build \u8981\u662f\u672c\u5730\u7f16\u8bd1\u90fd\u6ca1\u6cd5\u901a\u8fc7\uff0c\u90a3\u5c31\u522b\u7ee7\u7eed\u4e86\u3002 \u5728 GitHub \u4e0a\u521b\u5efa Actions \u4efb\u52a1 \u8ba9\u6211\u4eec\u8df3\u8fc7\u521b\u5efa\u672c\u5730 VCS \u5e76\u548c GitHub \u5173\u8054\u7684\u6b65\u9aa4\uff0c\u56e0\u4e3a\u4e0a\u4e00\u7bc7\u535a\u5ba2\u5df2\u7ecf\u8bf4\u7684\u5f88\u660e\u786e\u4e86\uff0c\u8fd9\u7bc7\u535a\u5ba2\u6211\u4eec\u76f4\u63a5\u4ece yml \u6587\u4ef6\u600e\u4e48\u5199\u5f00\u59cb\u8bf4\u8d77\u3002 \u540c\u6837\u662f\u53bb\u627e\u5b98\u65b9\u6587\u6863\uff0c\u6ce8\u610f 1.x \u548c 2.x \u7684\u6587\u6863\u6709\u6240\u4e0d\u540c\u3002 1.x 2.x\uff08\u4ec5\u505a\u793a\u8303\uff0c\u4e0d\u6807\u6ce8\uff09 main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 name : Build and Deploy on : [ push ] jobs : build-and-deploy : runs-on : ubuntu-latest steps : - name : Checkout uses : actions/checkout@master - name : vuepress-deploy uses : jenkey2011/vuepress-deploy@master env : ACCESS_TOKEN : ${{ secrets.ACCESS_TOKEN }} TARGET_REPO : username/repo TARGET_BRANCH : master BUILD_SCRIPT : yarn && yarn build BUILD_DIR : docs/.vuepress/dist CNAME : https://www.xxx.com main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 name : docs on : # \u6bcf\u5f53 push \u5230 main \u5206\u652f\u65f6\u89e6\u53d1\u90e8\u7f72 push : branches : [ main ] # \u624b\u52a8\u89e6\u53d1\u90e8\u7f72 workflow_dispatch : jobs : docs : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 with : # \u201c\u6700\u8fd1\u66f4\u65b0\u65f6\u95f4\u201d \u7b49 git \u65e5\u5fd7\u76f8\u5173\u4fe1\u606f\uff0c\u9700\u8981\u62c9\u53d6\u5168\u90e8\u63d0\u4ea4\u8bb0\u5f55 fetch-depth : 0 - name : Setup Node.js uses : actions/setup-node@v1 with : # \u9009\u62e9\u8981\u4f7f\u7528\u7684 node \u7248\u672c node-version : '14' # \u7f13\u5b58 node_modules - name : Cache dependencies uses : actions/cache@v2 id : yarn-cache with : path : | **/node_modules key : ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }} restore-keys : | ${{ runner.os }}-yarn- # \u5982\u679c\u7f13\u5b58\u6ca1\u6709\u547d\u4e2d\uff0c\u5b89\u88c5\u4f9d\u8d56 - name : Install dependencies if : steps.yarn-cache.outputs.cache-hit != 'true' run : yarn --frozen-lockfile # \u8fd0\u884c\u6784\u5efa\u811a\u672c - name : Build VuePress site run : yarn docs:build # \u67e5\u770b workflow \u7684\u6587\u6863\u6765\u83b7\u53d6\u66f4\u591a\u4fe1\u606f # @see https://github.com/crazy-max/ghaction-github-pages - name : Deploy to GitHub Pages uses : crazy-max/ghaction-github-pages@v2 with : # \u90e8\u7f72\u5230 gh-pages \u5206\u652f target_branch : gh-pages # \u90e8\u7f72\u76ee\u5f55\u4e3a VuePress \u7684\u9ed8\u8ba4\u8f93\u51fa\u76ee\u5f55 build_dir : docs/.vuepress/dist env : # @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret GITHUB_TOKEN : ${{ secrets.GITHUB_TOKEN }} \u6ce8\u610f\u6709\u5751 \u4e0a\u9762\u6807\u6ce8\u7684\u5730\u65b9\uff0c\u770b\u5230\u6ca1\u6709\uff1f\u5168\u90fd\u662f\u5751\uff01 \u5c24\u5176\u662f\u7b2c15\u884c\u8fd9\u4e2a TARGET_BRANCH : master \uff0c\u7b80\u76f4\u662f\u4e00\u952e\u5220\u5e93\u8dd1\u8def\u7ea7\u522b\u7684\u5751\u3002 \u9996\u5148\u8bf4\u4e0b15\u884c\u8fd9\u4e2a\u3002 TARGET_BRANCH \u7684\u610f\u601d\u662f\uff0c\u6307\u5b9a build \u51fa\u6765\u7684 HTML \u9875\u9762\u5b58\u653e\u7684\u5206\u652f\uff0c\u800c\u4e0d\u662f\u6307\u5b9a markdown \u6587\u4ef6\u5b58\u653e\u7684\u5206\u652f\u3002\u5f53\u521d\u5c31\u88ab\u8fd9\u4e2a\u4e1c\u897f\u5751\u4e86\uff0c\u4ee5\u4e3a\u662f\u4ece TARGET_BRANCH \u8fd9\u4e2a\u5206\u652f\u83b7\u53d6 markdown\uff0c\u6211\u5c31\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u7684 master \uff0c\u7ed3\u679c\u4ed6\u628a\u751f\u6210\u7684 HTML \u5168\u90e8\u7ed9 rebase \u5230\u6211\u7684 master \u5206\u652f\u4e86\u3002\u597d\u4e86\uff0c\u6211\u5199\u7684 markdown \u88ab\u5168\u90e8\u8986\u76d6\u4e86\u3002 \u6b63\u786e\u7684\u505a\u6cd5\u662f\uff1a TARGET_BRANCH : gh-pages \u8fd9\u6837\u4ed6\u5c31\u4f1a\u628a\u751f\u6210\u7684 HTML \u5b58\u653e\u5230 gh-pages \u5206\u652f\uff0c\u8fd9\u4e5f\u662f\u5927\u591a\u6570\u81ea\u52a8\u5316 Pages \u5e94\u7528\uff08\u6bd4\u5982 MkDocs \uff09\u751f\u6210\u7684\u9875\u9762\u6240\u5728\u5206\u652f\u3002 \u7136\u540e\u662f16\u884c\u8fd9\u4e2a BUILD_SCRIPT : yarn && yarn build \u3002 \u4f60\u8fd9\u548b build\uff1f \u6539\u6210\uff1a BUILD_SCRIPT : yarn && yarn docs:build \u7136\u540e\u662f18\u884c\u8fd9\u4e2a CNAME \uff0c\u8fd9\u4e2a\u5df2\u7ecf\u5728\u4e0a\u4e00\u7bc7\u535a\u5ba2\u91cc\u63d0\u5230\u4e86\uff0c\u5c31\u662f\u7528\u6765\u81ea\u52a8\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\uff0c\u8fd9\u91cc\u6539\u6210\u4f60\u60f3\u8981\u7684\u57df\u540d\u5c31\u53ef\u4ee5\u4e86\u3002\u6ca1\u4ec0\u4e48\u5927\u5751\u3002 \u6700\u540e\u6539\u4e00\u4e0b TARGET_REPO : username/repo \uff0c\u6307\u5411\u4f60\u81ea\u5df1\u7684 repo\uff0c\u8fd9\u91cc\u4ee5\u6211\u7684 mokabot2 \u4e3a\u4f8b\u3002 \u6700\u7ec8\u7684\u6210\u54c1\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a main.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 name : Build and Deploy on : [ push ] jobs : build-and-deploy : runs-on : ubuntu-latest steps : - name : Checkout uses : actions/checkout@master - name : vuepress-deploy uses : jenkey2011/vuepress-deploy@master env : ACCESS_TOKEN : ${{ secrets.ACCESS_TOKEN }} TARGET_REPO : MokaDevelopers/mokabot2 TARGET_BRANCH : gh-pages BUILD_SCRIPT : yarn && yarn docs:build BUILD_DIR : docs/.vuepress/dist CNAME : docs-mokabot.arisa.moe \u4f46\u662f\u5148\u4e0d\u8981\u63d0\u4ea4\uff0c\u8bbe\u7f6e\u597d\u5bc6\u94a5\u4e4b\u540e\u518d\u63d0\u4ea4\uff0c\u8fd9\u4e2a\u5bc6\u94a5\u662f\u63d0\u4f9b\u7ed9 vuepress-deploy \u5e94\u7528\u6765\u4f7f\u7528\u7684\u3002 \u8bbe\u7f6e\u5bc6\u94a5 \u8fd9\u4e00\u6b65\u5fc5\u4e0d\u53ef\u5c11\uff0c\u4e0d\u7136\u5373\u4f7f Actions \u53ef\u4ee5\u751f\u6210\uff0c\u4f46\u662f vuepress-deploy \u6ca1\u6cd5\u90e8\u7f72\u5230\u4f60\u7684 gh-pages \u5206\u652f\u91cc\u3002 \u770b\u8fd9\u4e2a \u6587\u6863 \u5c31\u884c\u3002 \u8bbe\u7f6e\u597d\u5bc6\u94a5\u4e4b\u540e\u5c31\u53ef\u4ee5\u63d0\u4ea4\u90a3\u4e2a yml \u6587\u4ef6\u4e86\u3002 \u5b8c\u6210 \u8bbe\u7f6e\u5b8c\u8fd9\u4e9b\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u6b63\u5e38\u901a\u8fc7 push \u64cd\u4f5c\u89e6\u53d1 Actions \u6d41\u7a0b\u81ea\u52a8\u6784\u5efa\u6587\u6863\u4e86\u3002","title":"GitHub Pages \u6587\u6863\u81ea\u52a8\u5316\u90e8\u7f72 - VuePress"},{"location":"blog/2022/220408-github-pages-2/#_1","text":"\u9996\u5148\u540c\u6837\u662f\u672c\u5730\u90e8\u7f72 npm yarn npm run docs:build yarn docs:build \u8981\u662f\u672c\u5730\u7f16\u8bd1\u90fd\u6ca1\u6cd5\u901a\u8fc7\uff0c\u90a3\u5c31\u522b\u7ee7\u7eed\u4e86\u3002","title":"\u672c\u5730\u90e8\u7f72\u6d4b\u8bd5"},{"location":"blog/2022/220408-github-pages-2/#github-actions","text":"\u8ba9\u6211\u4eec\u8df3\u8fc7\u521b\u5efa\u672c\u5730 VCS \u5e76\u548c GitHub \u5173\u8054\u7684\u6b65\u9aa4\uff0c\u56e0\u4e3a\u4e0a\u4e00\u7bc7\u535a\u5ba2\u5df2\u7ecf\u8bf4\u7684\u5f88\u660e\u786e\u4e86\uff0c\u8fd9\u7bc7\u535a\u5ba2\u6211\u4eec\u76f4\u63a5\u4ece yml \u6587\u4ef6\u600e\u4e48\u5199\u5f00\u59cb\u8bf4\u8d77\u3002 \u540c\u6837\u662f\u53bb\u627e\u5b98\u65b9\u6587\u6863\uff0c\u6ce8\u610f 1.x \u548c 2.x \u7684\u6587\u6863\u6709\u6240\u4e0d\u540c\u3002 1.x 2.x\uff08\u4ec5\u505a\u793a\u8303\uff0c\u4e0d\u6807\u6ce8\uff09 main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 name : Build and Deploy on : [ push ] jobs : build-and-deploy : runs-on : ubuntu-latest steps : - name : Checkout uses : actions/checkout@master - name : vuepress-deploy uses : jenkey2011/vuepress-deploy@master env : ACCESS_TOKEN : ${{ secrets.ACCESS_TOKEN }} TARGET_REPO : username/repo TARGET_BRANCH : master BUILD_SCRIPT : yarn && yarn build BUILD_DIR : docs/.vuepress/dist CNAME : https://www.xxx.com main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 name : docs on : # \u6bcf\u5f53 push \u5230 main \u5206\u652f\u65f6\u89e6\u53d1\u90e8\u7f72 push : branches : [ main ] # \u624b\u52a8\u89e6\u53d1\u90e8\u7f72 workflow_dispatch : jobs : docs : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 with : # \u201c\u6700\u8fd1\u66f4\u65b0\u65f6\u95f4\u201d \u7b49 git \u65e5\u5fd7\u76f8\u5173\u4fe1\u606f\uff0c\u9700\u8981\u62c9\u53d6\u5168\u90e8\u63d0\u4ea4\u8bb0\u5f55 fetch-depth : 0 - name : Setup Node.js uses : actions/setup-node@v1 with : # \u9009\u62e9\u8981\u4f7f\u7528\u7684 node \u7248\u672c node-version : '14' # \u7f13\u5b58 node_modules - name : Cache dependencies uses : actions/cache@v2 id : yarn-cache with : path : | **/node_modules key : ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }} restore-keys : | ${{ runner.os }}-yarn- # \u5982\u679c\u7f13\u5b58\u6ca1\u6709\u547d\u4e2d\uff0c\u5b89\u88c5\u4f9d\u8d56 - name : Install dependencies if : steps.yarn-cache.outputs.cache-hit != 'true' run : yarn --frozen-lockfile # \u8fd0\u884c\u6784\u5efa\u811a\u672c - name : Build VuePress site run : yarn docs:build # \u67e5\u770b workflow \u7684\u6587\u6863\u6765\u83b7\u53d6\u66f4\u591a\u4fe1\u606f # @see https://github.com/crazy-max/ghaction-github-pages - name : Deploy to GitHub Pages uses : crazy-max/ghaction-github-pages@v2 with : # \u90e8\u7f72\u5230 gh-pages \u5206\u652f target_branch : gh-pages # \u90e8\u7f72\u76ee\u5f55\u4e3a VuePress \u7684\u9ed8\u8ba4\u8f93\u51fa\u76ee\u5f55 build_dir : docs/.vuepress/dist env : # @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret GITHUB_TOKEN : ${{ secrets.GITHUB_TOKEN }} \u6ce8\u610f\u6709\u5751 \u4e0a\u9762\u6807\u6ce8\u7684\u5730\u65b9\uff0c\u770b\u5230\u6ca1\u6709\uff1f\u5168\u90fd\u662f\u5751\uff01 \u5c24\u5176\u662f\u7b2c15\u884c\u8fd9\u4e2a TARGET_BRANCH : master \uff0c\u7b80\u76f4\u662f\u4e00\u952e\u5220\u5e93\u8dd1\u8def\u7ea7\u522b\u7684\u5751\u3002 \u9996\u5148\u8bf4\u4e0b15\u884c\u8fd9\u4e2a\u3002 TARGET_BRANCH \u7684\u610f\u601d\u662f\uff0c\u6307\u5b9a build \u51fa\u6765\u7684 HTML \u9875\u9762\u5b58\u653e\u7684\u5206\u652f\uff0c\u800c\u4e0d\u662f\u6307\u5b9a markdown \u6587\u4ef6\u5b58\u653e\u7684\u5206\u652f\u3002\u5f53\u521d\u5c31\u88ab\u8fd9\u4e2a\u4e1c\u897f\u5751\u4e86\uff0c\u4ee5\u4e3a\u662f\u4ece TARGET_BRANCH \u8fd9\u4e2a\u5206\u652f\u83b7\u53d6 markdown\uff0c\u6211\u5c31\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u7684 master \uff0c\u7ed3\u679c\u4ed6\u628a\u751f\u6210\u7684 HTML \u5168\u90e8\u7ed9 rebase \u5230\u6211\u7684 master \u5206\u652f\u4e86\u3002\u597d\u4e86\uff0c\u6211\u5199\u7684 markdown \u88ab\u5168\u90e8\u8986\u76d6\u4e86\u3002 \u6b63\u786e\u7684\u505a\u6cd5\u662f\uff1a TARGET_BRANCH : gh-pages \u8fd9\u6837\u4ed6\u5c31\u4f1a\u628a\u751f\u6210\u7684 HTML \u5b58\u653e\u5230 gh-pages \u5206\u652f\uff0c\u8fd9\u4e5f\u662f\u5927\u591a\u6570\u81ea\u52a8\u5316 Pages \u5e94\u7528\uff08\u6bd4\u5982 MkDocs \uff09\u751f\u6210\u7684\u9875\u9762\u6240\u5728\u5206\u652f\u3002 \u7136\u540e\u662f16\u884c\u8fd9\u4e2a BUILD_SCRIPT : yarn && yarn build \u3002 \u4f60\u8fd9\u548b build\uff1f \u6539\u6210\uff1a BUILD_SCRIPT : yarn && yarn docs:build \u7136\u540e\u662f18\u884c\u8fd9\u4e2a CNAME \uff0c\u8fd9\u4e2a\u5df2\u7ecf\u5728\u4e0a\u4e00\u7bc7\u535a\u5ba2\u91cc\u63d0\u5230\u4e86\uff0c\u5c31\u662f\u7528\u6765\u81ea\u52a8\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\uff0c\u8fd9\u91cc\u6539\u6210\u4f60\u60f3\u8981\u7684\u57df\u540d\u5c31\u53ef\u4ee5\u4e86\u3002\u6ca1\u4ec0\u4e48\u5927\u5751\u3002 \u6700\u540e\u6539\u4e00\u4e0b TARGET_REPO : username/repo \uff0c\u6307\u5411\u4f60\u81ea\u5df1\u7684 repo\uff0c\u8fd9\u91cc\u4ee5\u6211\u7684 mokabot2 \u4e3a\u4f8b\u3002 \u6700\u7ec8\u7684\u6210\u54c1\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a main.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 name : Build and Deploy on : [ push ] jobs : build-and-deploy : runs-on : ubuntu-latest steps : - name : Checkout uses : actions/checkout@master - name : vuepress-deploy uses : jenkey2011/vuepress-deploy@master env : ACCESS_TOKEN : ${{ secrets.ACCESS_TOKEN }} TARGET_REPO : MokaDevelopers/mokabot2 TARGET_BRANCH : gh-pages BUILD_SCRIPT : yarn && yarn docs:build BUILD_DIR : docs/.vuepress/dist CNAME : docs-mokabot.arisa.moe \u4f46\u662f\u5148\u4e0d\u8981\u63d0\u4ea4\uff0c\u8bbe\u7f6e\u597d\u5bc6\u94a5\u4e4b\u540e\u518d\u63d0\u4ea4\uff0c\u8fd9\u4e2a\u5bc6\u94a5\u662f\u63d0\u4f9b\u7ed9 vuepress-deploy \u5e94\u7528\u6765\u4f7f\u7528\u7684\u3002","title":"\u5728 GitHub \u4e0a\u521b\u5efa Actions \u4efb\u52a1"},{"location":"blog/2022/220408-github-pages-2/#_2","text":"\u8fd9\u4e00\u6b65\u5fc5\u4e0d\u53ef\u5c11\uff0c\u4e0d\u7136\u5373\u4f7f Actions \u53ef\u4ee5\u751f\u6210\uff0c\u4f46\u662f vuepress-deploy \u6ca1\u6cd5\u90e8\u7f72\u5230\u4f60\u7684 gh-pages \u5206\u652f\u91cc\u3002 \u770b\u8fd9\u4e2a \u6587\u6863 \u5c31\u884c\u3002 \u8bbe\u7f6e\u597d\u5bc6\u94a5\u4e4b\u540e\u5c31\u53ef\u4ee5\u63d0\u4ea4\u90a3\u4e2a yml \u6587\u4ef6\u4e86\u3002","title":"\u8bbe\u7f6e\u5bc6\u94a5"},{"location":"blog/2022/220408-github-pages-2/#_3","text":"\u8bbe\u7f6e\u5b8c\u8fd9\u4e9b\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u6b63\u5e38\u901a\u8fc7 push \u64cd\u4f5c\u89e6\u53d1 Actions \u6d41\u7a0b\u81ea\u52a8\u6784\u5efa\u6587\u6863\u4e86\u3002","title":"\u5b8c\u6210"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/","tags":["cloudflare","cloudflare-workers","arcaea"],"text":"\u8f6c\u8f7d\u81ea Arcaea-Infinity/dl.arcaea.moe \uff08\u90e8\u7f72\u6587\u6863\u90e8\u5206\u662f\u672c\u4eba\u5199\u7684\uff0c\u800c js \u811a\u672c\u7531 TheSnowfield \u63d0\u4f9b\uff09 \u7b80\u4ecb \u8fd9\u662f\u4e00\u4e2a Arcaea \u955c\u50cf\u4e0b\u8f7d\u670d\u52a1\uff0c\u8be5\u670d\u52a1\u901a\u8fc7 Cloudflare Workers \u53cd\u5411\u4ee3\u7406\u5b9e\u73b0\uff0c\u672c\u8d28\u4e0a\u662f\u901a\u8fc7 Lowiro webapi \u83b7\u53d6\u6700\u65b0\u7684 APK \u6587\u4ef6 URL\uff0c\u7136\u540e\u901a\u8fc7\u8be5 URL \u4e0b\u8f7d\u6587\u4ef6\u3002 \u76ee\u524d\u8be5\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u5728\u4e86\uff1a https://dl.arcaea.moe https://dl.lcwiro.com \u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u7f51\u5740\u968f\u65f6\u4e0b\u8f7d\u6700\u65b0\u7684 arcaea_X.X.Xc.apk \u6587\u4ef6\u3002 \u90e8\u7f72 1. \u521b\u5efa\u4e00\u4e2a Cloudflare Workers \u5b9e\u4f8b \u8fdb\u5165 Cloudflare \u63a7\u5236\u53f0\uff0c\u70b9\u51fb Workers \u6807\u7b7e\u9875\uff0c\u7136\u540e\u70b9\u51fb Create a Service \u6309\u94ae\u3002 \u9009\u62e9 HTTP handler \uff0c\u7136\u540e\u70b9\u51fb Create service \u6309\u94ae\u3002 \u6b64\u65f6\u4f60\u7684\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7c7b\u4f3c\u4e8e aaaaabbbbb.ccccc.workers.dev \u7684 URL\uff0c\u8fd9\u5c31\u662f\u4f60\u7684 Workers \u5b9e\u4f8b\u7684 URL\u3002 \u63d0\u793a \u4e00\u4e2a Workers \u5b9e\u4f8b\u4e5f\u53eb \u670d\u52a1 \uff0c\u4e0b\u6587\u4e00\u5f8b\u7b80\u79f0 \u670d\u52a1 \u3002 2. \u8bbe\u7f6e\u8be5\u670d\u52a1 \u5728\u4e0a\u4e00\u6b65\u64cd\u4f5c\u7684\u540c\u4e00\u4e2a\u9875\u9762\u5185\uff0c\u9009\u62e9 Resources \u6807\u7b7e\uff0c\u7136\u540e\u70b9\u51fb Quick edit \u6309\u94ae\u3002 \u4ece\u6211\u4eec\u7684 Repo \u4e0b\u8f7d\u5230 index.js \u7684\u4ee3\u7801 \uff0c\u76f4\u63a5\u590d\u5236\u5168\u6587\uff0c\u7136\u540e\u7c98\u8d34\u5230\u5982\u4e0b\u533a\u57df\uff0c\u8bb0\u5f97\u662f\u5168\u6587\u8986\u76d6\u3002 \u7136\u540e\u70b9\u51fb Save and Deploy \u6309\u94ae\u3002 \u6b64\u65f6\u4f60\u7684\u670d\u52a1\u5df2\u7ecf\u53ef\u4ee5\u6295\u5165\u4f7f\u7528\u4e86\u3002 3. \u6d4b\u8bd5\u670d\u52a1\u53ef\u7528\u6027 \u6253\u5f00\u4f60\u7684\u6d4f\u89c8\u5668\uff0c\u8f93\u5165\u4f60\u7684\u670d\u52a1\u7684 URL\uff0c\u5982 https://aaaaabbbbb.ccccc.workers.dev \uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u6b64\u65f6\u5e94\u8be5\u6b63\u786e\u5f00\u59cb\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 Arcaea\u3002 \u6ce8\u610f \u5982\u679c\u4f60\u53ea\u662f\u60f3\u90e8\u7f72\u5230 Cloudflare Workers\uff0c\u6b64\u65f6\u4f60\u9700\u8981\u505a\u7684\u4e8b\u60c5\u5df2\u7ecf\u505a\u5b8c\u4e86\u3002\u5982\u679c\u4f60\u60f3\u7ee7\u7eed\u5c06\u5176\u90e8\u7f72\u5230\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f60\u9700\u8981\u7ee7\u7eed\u770b\u4e0b\u53bb\u3002 4. \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684 DNS \u8bb0\u5f55 \u6253\u5f00\u4f60\u7684 DNS \u63a7\u5236\u53f0\uff0c\u6dfb\u52a0\u4e00\u4e2a CNAME \u8bb0\u5f55\u3002 \u6ce8\u610f\u4ee5\u4e0b\u503c\u7684\u586b\u5199\uff1a \u5b57\u6bb5 \u503c \u5907\u6ce8 Type CNAME Name dl \u4f60\u60f3\u90e8\u7f72\u5230\u54ea\u4e2a\u5b50\u57df\u5c31\u4f7f\u7528\u54ea\u4e2a\u503c Target aaaaabbbbb.ccccc.workers.dev \u4f7f\u7528\u4f60\u670d\u52a1\u6240\u5728\u7684 URL Proxy status Proxied \u5fc5\u987b\u662f Proxied \u7136\u540e\u70b9\u51fb Save \u6309\u94ae\u3002 5. \u5c06\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u5b50\u57df\u8bbe\u7f6e\u4e3a\u8be5\u670d\u52a1\u7684\u8def\u7531: \u5728\u63a7\u5236\u53f0\u4e2d\u8fdb\u5165 Workers \u6807\u7b7e\u9875\u7136\u540e\u70b9\u51fb Add route \u6309\u94ae\u3002 \u6ce8\u610f \u8fd9\u91cc\u7684 Workers \u6807\u7b7e\u9875\u4e0d\u662f Cloudflare \u4e3b\u9875\u7684\u90a3\u4e2a\u6807\u7b7e\u9875\uff0c\u800c\u662f\u4f60\u70b9\u51fb\u4f60\u7684\u57df\u540d\u4e4b\u540e\u51fa\u73b0\u7684 Workers \u6807\u7b7e\u9875\u3002 \u6ce8\u610f\u4ee5\u4e0b\u503c\u7684\u586b\u5199\uff1a \u5b57\u6bb5 \u503c \u5907\u6ce8 Route dl.example.com/* \u5fc5\u987b\u662f \u4f60\u7684\u5b50\u57df + /* Service aaaaabbbbb \u4f7f\u7528\u4f60\u7684\u670d\u52a1\u7684\u540d\u5b57 \u7136\u540e\u70b9\u51fb Save \u6309\u94ae\u3002 6. \u6d4b\u8bd5\u7684\u4f60\u7684\u5b50\u57df \u73b0\u5728\u6253\u5f00\u4f60\u7684\u6d4f\u89c8\u5668\uff0c\u8f93\u5165\u4f60\u7684\u5b50\u57df\uff0c\u5982 https://dl.example.com/ \uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u6b64\u65f6\u5e94\u8be5\u6b63\u786e\u5f00\u59cb\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 Arcaea\u3002\uff0c \u8bb8\u53ef\u8bc1 \u672c\u6587\u6863\u9075\u5faa\u4ee5\u4e0b\u8bb8\u53ef\u8bc1\uff1a 616 SB License","title":"\u5982\u4f55\u4f7f\u7528 Cloudflare Workers \u6765\u642d\u5efa Arcaea \u955c\u50cf\u4e0b\u8f7d\u670d\u52a1\u5668"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#_1","text":"\u8fd9\u662f\u4e00\u4e2a Arcaea \u955c\u50cf\u4e0b\u8f7d\u670d\u52a1\uff0c\u8be5\u670d\u52a1\u901a\u8fc7 Cloudflare Workers \u53cd\u5411\u4ee3\u7406\u5b9e\u73b0\uff0c\u672c\u8d28\u4e0a\u662f\u901a\u8fc7 Lowiro webapi \u83b7\u53d6\u6700\u65b0\u7684 APK \u6587\u4ef6 URL\uff0c\u7136\u540e\u901a\u8fc7\u8be5 URL \u4e0b\u8f7d\u6587\u4ef6\u3002 \u76ee\u524d\u8be5\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u5728\u4e86\uff1a https://dl.arcaea.moe https://dl.lcwiro.com \u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u7f51\u5740\u968f\u65f6\u4e0b\u8f7d\u6700\u65b0\u7684 arcaea_X.X.Xc.apk \u6587\u4ef6\u3002","title":"\u7b80\u4ecb"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#_2","text":"","title":"\u90e8\u7f72"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#1-cloudflare-workers","text":"\u8fdb\u5165 Cloudflare \u63a7\u5236\u53f0\uff0c\u70b9\u51fb Workers \u6807\u7b7e\u9875\uff0c\u7136\u540e\u70b9\u51fb Create a Service \u6309\u94ae\u3002 \u9009\u62e9 HTTP handler \uff0c\u7136\u540e\u70b9\u51fb Create service \u6309\u94ae\u3002 \u6b64\u65f6\u4f60\u7684\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7c7b\u4f3c\u4e8e aaaaabbbbb.ccccc.workers.dev \u7684 URL\uff0c\u8fd9\u5c31\u662f\u4f60\u7684 Workers \u5b9e\u4f8b\u7684 URL\u3002 \u63d0\u793a \u4e00\u4e2a Workers \u5b9e\u4f8b\u4e5f\u53eb \u670d\u52a1 \uff0c\u4e0b\u6587\u4e00\u5f8b\u7b80\u79f0 \u670d\u52a1 \u3002","title":"1. \u521b\u5efa\u4e00\u4e2a Cloudflare Workers \u5b9e\u4f8b"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#2","text":"\u5728\u4e0a\u4e00\u6b65\u64cd\u4f5c\u7684\u540c\u4e00\u4e2a\u9875\u9762\u5185\uff0c\u9009\u62e9 Resources \u6807\u7b7e\uff0c\u7136\u540e\u70b9\u51fb Quick edit \u6309\u94ae\u3002 \u4ece\u6211\u4eec\u7684 Repo \u4e0b\u8f7d\u5230 index.js \u7684\u4ee3\u7801 \uff0c\u76f4\u63a5\u590d\u5236\u5168\u6587\uff0c\u7136\u540e\u7c98\u8d34\u5230\u5982\u4e0b\u533a\u57df\uff0c\u8bb0\u5f97\u662f\u5168\u6587\u8986\u76d6\u3002 \u7136\u540e\u70b9\u51fb Save and Deploy \u6309\u94ae\u3002 \u6b64\u65f6\u4f60\u7684\u670d\u52a1\u5df2\u7ecf\u53ef\u4ee5\u6295\u5165\u4f7f\u7528\u4e86\u3002","title":"2. \u8bbe\u7f6e\u8be5\u670d\u52a1"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#3","text":"\u6253\u5f00\u4f60\u7684\u6d4f\u89c8\u5668\uff0c\u8f93\u5165\u4f60\u7684\u670d\u52a1\u7684 URL\uff0c\u5982 https://aaaaabbbbb.ccccc.workers.dev \uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u6b64\u65f6\u5e94\u8be5\u6b63\u786e\u5f00\u59cb\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 Arcaea\u3002 \u6ce8\u610f \u5982\u679c\u4f60\u53ea\u662f\u60f3\u90e8\u7f72\u5230 Cloudflare Workers\uff0c\u6b64\u65f6\u4f60\u9700\u8981\u505a\u7684\u4e8b\u60c5\u5df2\u7ecf\u505a\u5b8c\u4e86\u3002\u5982\u679c\u4f60\u60f3\u7ee7\u7eed\u5c06\u5176\u90e8\u7f72\u5230\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f60\u9700\u8981\u7ee7\u7eed\u770b\u4e0b\u53bb\u3002","title":"3. \u6d4b\u8bd5\u670d\u52a1\u53ef\u7528\u6027"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#4-dns","text":"\u6253\u5f00\u4f60\u7684 DNS \u63a7\u5236\u53f0\uff0c\u6dfb\u52a0\u4e00\u4e2a CNAME \u8bb0\u5f55\u3002 \u6ce8\u610f\u4ee5\u4e0b\u503c\u7684\u586b\u5199\uff1a \u5b57\u6bb5 \u503c \u5907\u6ce8 Type CNAME Name dl \u4f60\u60f3\u90e8\u7f72\u5230\u54ea\u4e2a\u5b50\u57df\u5c31\u4f7f\u7528\u54ea\u4e2a\u503c Target aaaaabbbbb.ccccc.workers.dev \u4f7f\u7528\u4f60\u670d\u52a1\u6240\u5728\u7684 URL Proxy status Proxied \u5fc5\u987b\u662f Proxied \u7136\u540e\u70b9\u51fb Save \u6309\u94ae\u3002","title":"4. \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684 DNS \u8bb0\u5f55"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#5","text":"\u5728\u63a7\u5236\u53f0\u4e2d\u8fdb\u5165 Workers \u6807\u7b7e\u9875\u7136\u540e\u70b9\u51fb Add route \u6309\u94ae\u3002 \u6ce8\u610f \u8fd9\u91cc\u7684 Workers \u6807\u7b7e\u9875\u4e0d\u662f Cloudflare \u4e3b\u9875\u7684\u90a3\u4e2a\u6807\u7b7e\u9875\uff0c\u800c\u662f\u4f60\u70b9\u51fb\u4f60\u7684\u57df\u540d\u4e4b\u540e\u51fa\u73b0\u7684 Workers \u6807\u7b7e\u9875\u3002 \u6ce8\u610f\u4ee5\u4e0b\u503c\u7684\u586b\u5199\uff1a \u5b57\u6bb5 \u503c \u5907\u6ce8 Route dl.example.com/* \u5fc5\u987b\u662f \u4f60\u7684\u5b50\u57df + /* Service aaaaabbbbb \u4f7f\u7528\u4f60\u7684\u670d\u52a1\u7684\u540d\u5b57 \u7136\u540e\u70b9\u51fb Save \u6309\u94ae\u3002","title":"5. \u5c06\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u5b50\u57df\u8bbe\u7f6e\u4e3a\u8be5\u670d\u52a1\u7684\u8def\u7531:"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#6","text":"\u73b0\u5728\u6253\u5f00\u4f60\u7684\u6d4f\u89c8\u5668\uff0c\u8f93\u5165\u4f60\u7684\u5b50\u57df\uff0c\u5982 https://dl.example.com/ \uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u6b64\u65f6\u5e94\u8be5\u6b63\u786e\u5f00\u59cb\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 Arcaea\u3002\uff0c","title":"6. \u6d4b\u8bd5\u7684\u4f60\u7684\u5b50\u57df"},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#_3","text":"\u672c\u6587\u6863\u9075\u5faa\u4ee5\u4e0b\u8bb8\u53ef\u8bc1\uff1a 616 SB License","title":"\u8bb8\u53ef\u8bc1"},{"location":"blog/2022/220412-ida-substitute-usage/","tags":["ida"],"text":"\u6700\u8fd1\u5728\u4fee\u6539\u67d0\u4e2a\ud83c\uddec\ud83c\udde7\u6e38\u620f\uff0c\u6d89\u53ca\u5230\u4e00\u4e9b IDA \u5728\u66ff\u6362\u65b9\u9762\u7684\u4f7f\u7528\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\uff0c\u514d\u5f97\u6bcf\u6b21\u90fd\u53bb\u9ebb\u70e6\u7fa4\u53cb\u95ee IDA \u600e\u4e48\u7528\u3002 \u6587\u672c\u641c\u7d22 graph LR A[Search] --> B[text]; \u8f93\u5165\u60f3\u8981\u641c\u7d22\u7684\u6587\u672c\u5373\u53ef\u3002 \u641c\u7d22\u5b57\u8282\uff08\u5341\u516d\u8fdb\u5236\u3001\u5341\u8fdb\u5236\u548c\u516b\u8fdb\u5236\uff09 graph LR A[Search] --> B[sequence of bytes]; \u7136\u540e\u9009\u62e9 Hex \u3001 Decimal \u6216 Octal \uff0c\u8f93\u5165\u4f60\u9700\u8981\u641c\u7d22\u7684\u5b57\u8282\uff0c\u6bcf\u4e2a\u5b57\u8282\u4f7f\u7528\u7a7a\u683c\u5206\u9694\u3002 Hex \u66ff\u6362 \u9996\u5148\u5728 IDA View \u9009\u9879\u5361\u4e2d\u9009\u62e9\u5230\u4f60\u60f3\u8981\u66ff\u6362\u7684\u5185\u5bb9\u6240\u5728\u7684\u5b57\u8282\uff08\u4ee5\u5b57\u7b26\u4e32\u4e3a\u4f8b\uff09\uff0c\u7136\u540e\u5207\u6362\u5230 Hex View \u9009\u9879\u5361\uff08\u5341\u516d\u8fdb\u5236\u7f16\u8f91\u5668\uff09\u3002\u9009\u62e9\u4e00\u4e2a\u5b57\u8282\uff0c\u4f60\u63a5\u4e0b\u6765\u8981\u4f1a\u4ece\u8fd9\u91cc\u5f00\u59cb\u7f16\u8f91\u3002 \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879\u5361 graph LR A[View] --> B; B[Open subviews] --> C[Hex dump]; \u4ece\u8fd9\u91cc\u6253\u5f00 Hex View \u9009\u9879\u5361\u3002 \u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u7f16\u8f91\uff1a \u5728\u5341\u516d\u8fdb\u5236\u7f16\u8f91\u5668\u4e2d\u53f3\u952e\u9009\u62e9 Edit \uff08\u6216\u8005\u6309 F2 \uff09\uff0c\u7136\u540e\u76f4\u63a5\u7f16\u8f91\u5341\u516d\u8fdb\u5236\u6216\u8005\u76f4\u63a5\u7f16\u8f91\u6587\u672c\u5185\u5bb9\uff0c\u7f16\u8f91\u5b8c\u6210\u540e\u53f3\u952e\u9009\u62e9 Apply Changes \uff08\u6216\u8005\u6309 F2 \uff09\u3002 \u9009\u62e9 Edit -> Patch Program -> Change Byte.. \uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u5bf9\u5e94\u586b\u5199\u4f60\u8981\u66ff\u6362\u7684\u5341\u516d\u8fdb\u5236\u503c\uff08\u4e00\u6b21\u6027\u66ff\u636216\u4e2a\u5b57\u8282\uff09\uff0c\u7136\u540e\u70b9 OK \u3002 \u641c\u7d22\u5b57\u7b26\u4e32 graph LR A[View] --> B; B[Open subviews] --> C[Strings]; \u5728\u51fa\u6765\u7684\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u76f4\u63a5\u4f7f\u7528 Ctrl+F \u641c\u7d22\u5373\u53ef\u3002 \u751f\u6210\u4f2a\u4ee3\u7801 \u5728 IDA View \u9009\u9879\u5361\u4e2d\u9009\u62e9\u5230\u4f60\u751f\u6210\u7684\u51fd\u6570\uff0c\u6309 F5 \u751f\u6210\u4f2a\u4ee3\u7801\u3002 \u4fdd\u5b58\u4e8c\u8fdb\u5236\u6587\u4ef6 graph LR A[Edit] --> B; B[Patch Program] --> C[Apply patches to input file..]; \u4ece\u8fd9\u91cc\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002","title":"IDA \u66ff\u6362\u4e8c\u8fdb\u5236\u6587\u4ef6"},{"location":"blog/2022/220412-ida-substitute-usage/#_1","text":"graph LR A[Search] --> B[text]; \u8f93\u5165\u60f3\u8981\u641c\u7d22\u7684\u6587\u672c\u5373\u53ef\u3002","title":"\u6587\u672c\u641c\u7d22"},{"location":"blog/2022/220412-ida-substitute-usage/#_2","text":"graph LR A[Search] --> B[sequence of bytes]; \u7136\u540e\u9009\u62e9 Hex \u3001 Decimal \u6216 Octal \uff0c\u8f93\u5165\u4f60\u9700\u8981\u641c\u7d22\u7684\u5b57\u8282\uff0c\u6bcf\u4e2a\u5b57\u8282\u4f7f\u7528\u7a7a\u683c\u5206\u9694\u3002","title":"\u641c\u7d22\u5b57\u8282\uff08\u5341\u516d\u8fdb\u5236\u3001\u5341\u8fdb\u5236\u548c\u516b\u8fdb\u5236\uff09"},{"location":"blog/2022/220412-ida-substitute-usage/#hex","text":"\u9996\u5148\u5728 IDA View \u9009\u9879\u5361\u4e2d\u9009\u62e9\u5230\u4f60\u60f3\u8981\u66ff\u6362\u7684\u5185\u5bb9\u6240\u5728\u7684\u5b57\u8282\uff08\u4ee5\u5b57\u7b26\u4e32\u4e3a\u4f8b\uff09\uff0c\u7136\u540e\u5207\u6362\u5230 Hex View \u9009\u9879\u5361\uff08\u5341\u516d\u8fdb\u5236\u7f16\u8f91\u5668\uff09\u3002\u9009\u62e9\u4e00\u4e2a\u5b57\u8282\uff0c\u4f60\u63a5\u4e0b\u6765\u8981\u4f1a\u4ece\u8fd9\u91cc\u5f00\u59cb\u7f16\u8f91\u3002 \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879\u5361 graph LR A[View] --> B; B[Open subviews] --> C[Hex dump]; \u4ece\u8fd9\u91cc\u6253\u5f00 Hex View \u9009\u9879\u5361\u3002 \u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u7f16\u8f91\uff1a \u5728\u5341\u516d\u8fdb\u5236\u7f16\u8f91\u5668\u4e2d\u53f3\u952e\u9009\u62e9 Edit \uff08\u6216\u8005\u6309 F2 \uff09\uff0c\u7136\u540e\u76f4\u63a5\u7f16\u8f91\u5341\u516d\u8fdb\u5236\u6216\u8005\u76f4\u63a5\u7f16\u8f91\u6587\u672c\u5185\u5bb9\uff0c\u7f16\u8f91\u5b8c\u6210\u540e\u53f3\u952e\u9009\u62e9 Apply Changes \uff08\u6216\u8005\u6309 F2 \uff09\u3002 \u9009\u62e9 Edit -> Patch Program -> Change Byte.. \uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u5bf9\u5e94\u586b\u5199\u4f60\u8981\u66ff\u6362\u7684\u5341\u516d\u8fdb\u5236\u503c\uff08\u4e00\u6b21\u6027\u66ff\u636216\u4e2a\u5b57\u8282\uff09\uff0c\u7136\u540e\u70b9 OK \u3002","title":"Hex \u66ff\u6362"},{"location":"blog/2022/220412-ida-substitute-usage/#_3","text":"graph LR A[View] --> B; B[Open subviews] --> C[Strings]; \u5728\u51fa\u6765\u7684\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u76f4\u63a5\u4f7f\u7528 Ctrl+F \u641c\u7d22\u5373\u53ef\u3002","title":"\u641c\u7d22\u5b57\u7b26\u4e32"},{"location":"blog/2022/220412-ida-substitute-usage/#_4","text":"\u5728 IDA View \u9009\u9879\u5361\u4e2d\u9009\u62e9\u5230\u4f60\u751f\u6210\u7684\u51fd\u6570\uff0c\u6309 F5 \u751f\u6210\u4f2a\u4ee3\u7801\u3002","title":"\u751f\u6210\u4f2a\u4ee3\u7801"},{"location":"blog/2022/220412-ida-substitute-usage/#_5","text":"graph LR A[Edit] --> B; B[Patch Program] --> C[Apply patches to input file..]; \u4ece\u8fd9\u91cc\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002","title":"\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6587\u4ef6"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/","tags":["frp","bitcomit","proxy"],"text":"\u80cc\u666f \u60f3\u7528\u6bd4\u7279\u5f57\u661f\u4e0b\u79cd\u5b50\uff0c\u4f46\u662f\u56e0\u4e3a\u8eab\u5904\u6570\u4e2a NAT \u8eab\u540e\uff0c\u6839\u672c\u6ca1\u6709\u516c\u7f51 IP\uff0c\u5bfc\u81f4\u65e0\u6cd5\u8ba9\u522b\u7684 peer \u8fde\u63a5\u5230\u4f60\uff0c\u4e0b\u8f7d\u901f\u5ea6\u582a\u5fe7\u3002 \u6ca1\u6709\u516c\u7f51 IP \u600e\u4e48\u529e\uff1f\u6253\u7535\u8bdd\u95ee\u8fd0\u8425\u5546\uff1f\u8fd8\u662f\u7b97\u4e86\u5427\uff0c\u5e72\u8106\u5411\u81ea\u5df1 VPS \u501f\u4e00\u4e2a\u3002 \u524d\u63d0\u6761\u4ef6 \u4e00\u53f0\u6709\u516c\u7f51 IP \u7684\u673a\u5668\uff08\u6700\u597d\u662f\u56fa\u5b9a\u7684 IP\uff09 \u8fd9\u53f0\u673a\u5668\u88ab\u5141\u8bb8\u642d\u5efa frp \u7b49\u5185\u7f51\u7a7f\u900f\u670d\u52a1 \u8fd9\u53f0\u673a\u5668\u88ab\u5141\u8bb8\u642d\u5efa\u4ee3\u7406\u670d\u52a1 \u64cd\u4f5c \u90e8\u7f72 frps \u9996\u5148\u5728\u6709\u516c\u7f51 IP \u7684\u90a3\u53f0\u673a\u5668\u4e0a\u90e8\u7f72 frp \u670d\u52a1\u7aef\u3002 \u53bb release \u4e0b\u8f7d\u5bf9\u5e94\u7cfb\u7edf\u7684 frp\uff0c\u4e0b\u8f7d\u4e4b\u540e\u89e3\u538b\uff0c\u91cc\u9762\u7684 frps \u5c31\u662f\u6211\u4eec\u9700\u8981\u7684 frp \u670d\u52a1\u7aef\u3002 \u5199 frps.ini \uff1a frps.ini 1 2 3 4 5 6 7 [common] bind_port = 7000 bind_udp_port = 7000 bind_addr = 0.0.0.0 allow_ports = 1001-1500,10001-22500 token = \u4f60\u7684\u5bc6\u7801 tls_only = true \u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a allow_ports \u662f\u6307\u7ecf\u8fc7 frp \u4ee3\u7406/\u8f6c\u53d1\u7684\u8fde\u63a5\u53ef\u4ee5\u4f7f\u7528\u7684\u7aef\u53e3\u8303\u56f4\u3002 token \u8bf7\u81ea\u5df1\u968f\u4fbf\u8bbe\u7f6e\u4e00\u4e2a\u3002 tls_only \u5219\u8981\u6c42\u6240\u6709\u7684 frpc \u5ba2\u6237\u7aef\uff08\u662f\u4f60\uff0c\u4e0d\u662f\u6307\u90a3\u4e9b peers\uff09\u4e5f\u542f\u7528 TLS \u624d\u80fd\u8fde\u63a5\u3002\u5efa\u8bae\u8bbe\u7f6e\u6210 true \u3002 \u5176\u4ed6\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7 \u5b98\u7f51\u6587\u6863 \u67e5\u770b\u3002 \u7136\u540e\u901a\u8fc7 frps.exe -c frps.ini \u542f\u7528 frps \u670d\u52a1\u7aef\u3002 \u6b64\u65f6\u4f60\u7684\u670d\u52a1\u7aef\u4e0a\u5e94\u8be5\u663e\u793a\u5982\u4e0b\u65e5\u5fd7\uff1a 2022/04/13 09:42:18 [I] [root.go:200] frps uses config file: frps.ini 2022/04/13 09:42:18 [I] [service.go:192] frps tcp listen on 0.0.0.0:7000 2022/04/13 09:42:18 [I] [service.go:276] nat hole udp service listen on 0.0.0.0:7000 2022/04/13 09:42:18 [I] [root.go:209] frps started successfully \u8bf4\u660e\u4f60\u7684\u670d\u52a1\u7aef\u6b63\u5728\u76d1\u542c\u6240\u6709\u6765\u81ea 7000 \u7aef\u53e3\u7684 frp \u8fde\u63a5\u3002 \u90e8\u7f72 frpc \u5728\u81ea\u5df1\u9700\u8981\u8fd0\u884c\u6bd4\u7279\u5f57\u661f\u7684\u7535\u8111\u4e0a\u90e8\u7f72 frp \u5ba2\u6237\u7aef\u3002 \u540c\u6837\uff0c\u53bb\u4e0b\u8f7d\u5bf9\u5e94\u7cfb\u7edf\u7248\u672c\u7684 frp\uff0c\u89e3\u538b\u83b7\u53d6 frpc\u3002 \u5199 frpc.ini \uff1a frpc.ini 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 [common] server_addr = \u7ed9\u5b9a\u7684IPv4\u5730\u5740/IPv6\u5730\u5740/\u57df\u540d server_port = 7000 protocol = websocket token = \u4f60\u7684\u5bc6\u7801 tls_enable = true [Remote Download] type = tcp local_ip = 127.0.0.1 local_port = 2333 remote_port = 2333 [BT Listen TCP] type = tcp local_ip = 127.0.0.1 local_port = 10400 remote_port = 10400 [BT Listen UDP] type = udp local_ip = 127.0.0.1 local_port = 10400 remote_port = 10400 \u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a server_addr \u8bbe\u7f6e\u6210\u90a3\u53f0\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u662f IPv4/IPv6/\u57df\u540d\u3002\u8bbe\u7f6e\u6210 IPv6 \u5730\u5740\u65f6\u4e0d\u9700\u8981\u52a0\u62ec\u53f7 [ \u548c ] \u3002 server_port \u548c frps.ini \u4fdd\u6301\u4e00\u81f4\u3002 protocol \u4e00\u5f8b\u9009\u62e9 websocket \u3002 token \u548c tls_enable \u5747\u4e0e frps.ini \u4fdd\u6301\u4e00\u81f4\u3002 Remote Download \u6307\u7684\u662f\u6bd4\u7279\u5f57\u661f\u7684\u8fdc\u7a0b\u4e0b\u8f7d\u670d\u52a1\uff0c\u5982\u679c\u4f60\u6bd4\u7279\u5f57\u661f\u9700\u8981\u5f00\u8fd9\u4e2a\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u628a\u4ed6\u6253\u5f00\uff0c\u7aef\u53e3\u53f7\u548c\u6bd4\u7279\u5f57\u661f\u4e0a\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\uff0c\u6bd4\u5982 2333 \u3002 BT Listen TCP/UDP \u5c31\u662f peer \u7684\u901a\u4fe1\u7aef\u53e3\uff0c\u5747\u8bbe\u7f6e\u6210 127.0.0.1 \u4e0a\u7684 10400 \uff0c\u548c\u6bd4\u7279\u5f57\u661f\u4fdd\u6301\u4e00\u81f4\u3002 \u6d4b\u8bd5 frp \u8fde\u63a5 \u73b0\u5728\u5728\u4f60\u7684\u5ba2\u6237\u7aef\u4e0a\u6267\u884c\uff1a frpc.exe -c frpc.ini \u5ba2\u6237\u7aef\u4e0a\u5e94\u8be5\u4f1a\u663e\u793a\u65e5\u5fd7\uff1a 2022/04/13 09:43:20 [I] [service.go:301] [44dfbb2737aff979] login to server success, get run id [44dfbb2737aff979], server udp port [7000] 2022/04/13 09:43:20 [I] [proxy_manager.go:144] [44dfbb2737aff979] proxy added: [Remote Download BT Listen TCP BT Listen UDP] 2022/04/13 09:43:20 [I] [control.go:180] [44dfbb2737aff979] [Remote Download] start proxy success 2022/04/13 09:43:20 [I] [control.go:180] [44dfbb2737aff979] [BT Listen TCP] start proxy success 2022/04/13 09:43:20 [I] [control.go:180] [44dfbb2737aff979] [BT Listen UDP] start proxy success 2022/04/13 09:43:21 [I] [proxy.go:481] [44dfbb2737aff979] [BT Listen UDP] incoming a new work connection for udp proxy, ws://XXX.XXX.XXX.XXX:7000/~!frp \u540c\u65f6\u670d\u52a1\u7aef\u4e0a\u5e94\u8be5\u4f1a\u7acb\u5373\u663e\u793a\u4e00\u6761\u65e5\u5fd7\uff1a 2022/04/13 09:43:21 [I] [service.go:447] [44dfbb2737aff979] client login info: ip http://XXX.XXX.XXX.XXX:7000 version [0.38.0] hostname [] os [windows] arch [amd64] \u5176\u4e2d\u7684 XXX.XXX.XXX.XXX:7000 \u5e94\u8be5\u662f\u4f60\u670d\u52a1\u7aef\u7684 IP + \u7aef\u53e3\uff0c\u800c 44dfbb2737aff979 \u662f\u4f60\u88ab\u670d\u52a1\u7aef\u5206\u914d\u7684\u7528\u6237 ID\uff0c\u6bcf\u6b21\u4f60\u8fde\u63a5\u5230\u670d\u52a1\u7aef\u65f6\uff0c\u90fd\u4f1a\u88ab\u670d\u52a1\u7aef\u968f\u673a\u5206\u914d\u4e00\u4e2a\u7528\u6237 ID\u3002 graph TB PeerA((peer1)) --> frps_10400; PeerB((peer2)) --> frps_10400; subgraph frps.exe frps_10400[0.0.0.0:10400] --> frps_7000; end frps_7000[0.0.0.0:7000] --> |websocket| frpc[frpc]; subgraph frpc and BitComit bitcomit_10400 --> frpc; end frpc --> bitcomit_10400[localhost:10400]; \u73b0\u5728\uff0c\u6240\u6709 peers \u53d1\u9001\u5230\u90a3\u53f0\u5177\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u7684 allow_ports \u7aef\u53e3\uff08\u5305\u62ec 10400 \uff09\u7684 TCP \u548c UDP \u6570\u636e\u5305\uff0c\u90fd\u4f1a\u88ab frps.exe \u901a\u8fc7\u53cd\u5411 websocket \u8f6c\u53d1\u56de\u5ba2\u6237\u7aef\u4e0a\u7684 frpc.exe \uff0c\u7136\u540e frpc.exe \u518d\u53d1\u9001\u5230 localhost:10400 \uff0c\u7531\u4e8e\u6b64\u65f6\u6bd4\u7279\u5f57\u661f\u6b63\u5728\u76d1\u542c\u672c\u5730\u7684 10400 \u7aef\u53e3\uff0c\u56e0\u6b64\u6bd4\u7279\u5f57\u661f\u5c06\u4f1a\u628a\u8fd9\u4e9b frpc.exe \u53d1\u6765\u7684\u6570\u636e\u5305\u8ba4\u4e3a\u662f peers \u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u5305\u3002 \u8bbe\u7f6e\u4ee3\u7406 frp \u53ea\u80fd\u89e3\u51b3\u4e00\u4e2a\u65b9\u5411\u4e0a\u7684\u95ee\u9898\uff0c\u5c31\u662f peers \u8fde\u63a5\u5230\u5ba2\u6237\u7aef\uff0c\u800c\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 peers \u7684\u65b9\u5f0f\u5c06\u4f1a\u7531\u4ee3\u7406\u670d\u52a1\u5668\u5b9e\u73b0\u3002 \u4f60\u9700\u8981\u5728\u90a3\u53f0\u5177\u6709\u516c\u7f51 IP \u5730\u5740\u7684\u673a\u5668\u4e0a\u642d\u5efa\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\uff0c\u4ece\u800c\u8ba9\u4f60\u7684\u6bd4\u7279\u5f57\u661f\u80fd\u901a\u8fc7\u4ee3\u7406\u8fde\u63a5\u5230 peers\u3002 \u5177\u4f53\u642d\u5efa\u65b9\u6cd5\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd\uff0c\u7f51\u4e0a\u6709\u5f88\u591a\u6559\u7a0b\u3002\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\u8fd9\u4e2a\u4ee3\u7406\uff0c\u5e76\u4e14\u6620\u5c04\u5728\u4e86 socks5://localhost:1089 \u4e0a\u3002 \u7136\u540e\u6211\u4eec\u5728\u6bd4\u7279\u5f57\u661f\u8bbe\u7f6e\u91cc\u505a\u597d\u4ee3\u7406\u8bbe\u7f6e\u3002 \u9664\u4e86 \u4f7f\u7528\u4ee3\u7406\u670d\u52a1\u5668\u8fdb\u884c DNS \u67e5\u8be2 \u4ee5\u5916\uff0c\u5176\u4ed6\u90fd\u4e0d\u52fe\u9009\u3002\u8fd9\u76f8\u5f53\u4e8e\u4f7f\u6bd4\u7279\u5f57\u661f\u8fdb\u5165\u5168\u5c40\u4ee3\u7406\u6a21\u5f0f\u3002 \u6b64\u65f6\u6211\u4eec\u5df2\u7ecf\u7b49\u4ef7\u4e8e\u5177\u6709\u4e86\u516c\u7f51 IP\uff0c\u5e76\u4e14\u53ef\u4ee5\u4ee5\u516c\u7f51 IP \u8eab\u4efd\u4e0e\u4e92\u8054\u7f51\u8fdb\u884c\u53cc\u5411\u901a\u4fe1\u3002\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\uff0c\u8fd9\u4e2a\u65f6\u5019\u6bd4\u7279\u5f57\u661f\u7684\u706f\u5df2\u7ecf\ud83d\udfe2\u4e86 \u5173\u95ed\u9632\u5438\u8840 \u56e0\u4e3a\u6bd4\u7279\u5f57\u661f\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u90fd\u662f frpc.exe \u53d1\u6765\u7684\uff0c\u56e0\u6b64\u6240\u6709\u7684 peers \u7684\u5916\u7f51 IP \u90fd\u662f 127.0.0.1 \uff0c\u5927\u91cf\u76f8\u540c IP \u53ef\u80fd\u4f1a\u89e6\u53d1\u6bd4\u7279\u5f57\u661f\u7684\u9632\u5438\u8840\u673a\u5236\uff0c\u56e0\u6b64\u628a\u4ed6\u5173\u6389\u3002 \u6d4b\u8bd5\u6548\u679c \u73b0\u5728\u53bb\u4e0b\u8f7d\u4efb\u610f\u4e00\u4e2a BT \u79cd\u5b50\uff0c\u5982\u679c\u70b9\u5f00 \u7528\u6237 \u9009\u9879\u5361\uff0c\u53d1\u73b0\u5f88\u591a\u6765\u81ea 127.0.0.1 \u7684\u8fde\u63a5\uff0c\u5e76\u4e14\u6765\u6e90\u662f \u88ab\u52a8 \uff0c\u53d1\u8d77\u662f \u8fdc\u7a0b \uff0c\u6b64\u65f6\u5c31\u8bf4\u660e\u4f60\u5df2\u7ecf\u8bbe\u7f6e\u6b63\u786e\u4e86\u3002","title":"\u5229\u7528\u5185\u7f51\u7a7f\u900f\u548c\u4ee3\u7406\u83b7\u53d6\u516c\u7f51 IP \u5730\u5740\u89e3\u51b3\u6bd4\u7279\u5f57\u661f\u9ec4\u706f"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_1","text":"\u60f3\u7528\u6bd4\u7279\u5f57\u661f\u4e0b\u79cd\u5b50\uff0c\u4f46\u662f\u56e0\u4e3a\u8eab\u5904\u6570\u4e2a NAT \u8eab\u540e\uff0c\u6839\u672c\u6ca1\u6709\u516c\u7f51 IP\uff0c\u5bfc\u81f4\u65e0\u6cd5\u8ba9\u522b\u7684 peer \u8fde\u63a5\u5230\u4f60\uff0c\u4e0b\u8f7d\u901f\u5ea6\u582a\u5fe7\u3002 \u6ca1\u6709\u516c\u7f51 IP \u600e\u4e48\u529e\uff1f\u6253\u7535\u8bdd\u95ee\u8fd0\u8425\u5546\uff1f\u8fd8\u662f\u7b97\u4e86\u5427\uff0c\u5e72\u8106\u5411\u81ea\u5df1 VPS \u501f\u4e00\u4e2a\u3002","title":"\u80cc\u666f"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_2","text":"\u4e00\u53f0\u6709\u516c\u7f51 IP \u7684\u673a\u5668\uff08\u6700\u597d\u662f\u56fa\u5b9a\u7684 IP\uff09 \u8fd9\u53f0\u673a\u5668\u88ab\u5141\u8bb8\u642d\u5efa frp \u7b49\u5185\u7f51\u7a7f\u900f\u670d\u52a1 \u8fd9\u53f0\u673a\u5668\u88ab\u5141\u8bb8\u642d\u5efa\u4ee3\u7406\u670d\u52a1","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_3","text":"","title":"\u64cd\u4f5c"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#frps","text":"\u9996\u5148\u5728\u6709\u516c\u7f51 IP \u7684\u90a3\u53f0\u673a\u5668\u4e0a\u90e8\u7f72 frp \u670d\u52a1\u7aef\u3002 \u53bb release \u4e0b\u8f7d\u5bf9\u5e94\u7cfb\u7edf\u7684 frp\uff0c\u4e0b\u8f7d\u4e4b\u540e\u89e3\u538b\uff0c\u91cc\u9762\u7684 frps \u5c31\u662f\u6211\u4eec\u9700\u8981\u7684 frp \u670d\u52a1\u7aef\u3002 \u5199 frps.ini \uff1a frps.ini 1 2 3 4 5 6 7 [common] bind_port = 7000 bind_udp_port = 7000 bind_addr = 0.0.0.0 allow_ports = 1001-1500,10001-22500 token = \u4f60\u7684\u5bc6\u7801 tls_only = true \u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a allow_ports \u662f\u6307\u7ecf\u8fc7 frp \u4ee3\u7406/\u8f6c\u53d1\u7684\u8fde\u63a5\u53ef\u4ee5\u4f7f\u7528\u7684\u7aef\u53e3\u8303\u56f4\u3002 token \u8bf7\u81ea\u5df1\u968f\u4fbf\u8bbe\u7f6e\u4e00\u4e2a\u3002 tls_only \u5219\u8981\u6c42\u6240\u6709\u7684 frpc \u5ba2\u6237\u7aef\uff08\u662f\u4f60\uff0c\u4e0d\u662f\u6307\u90a3\u4e9b peers\uff09\u4e5f\u542f\u7528 TLS \u624d\u80fd\u8fde\u63a5\u3002\u5efa\u8bae\u8bbe\u7f6e\u6210 true \u3002 \u5176\u4ed6\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7 \u5b98\u7f51\u6587\u6863 \u67e5\u770b\u3002 \u7136\u540e\u901a\u8fc7 frps.exe -c frps.ini \u542f\u7528 frps \u670d\u52a1\u7aef\u3002 \u6b64\u65f6\u4f60\u7684\u670d\u52a1\u7aef\u4e0a\u5e94\u8be5\u663e\u793a\u5982\u4e0b\u65e5\u5fd7\uff1a 2022/04/13 09:42:18 [I] [root.go:200] frps uses config file: frps.ini 2022/04/13 09:42:18 [I] [service.go:192] frps tcp listen on 0.0.0.0:7000 2022/04/13 09:42:18 [I] [service.go:276] nat hole udp service listen on 0.0.0.0:7000 2022/04/13 09:42:18 [I] [root.go:209] frps started successfully \u8bf4\u660e\u4f60\u7684\u670d\u52a1\u7aef\u6b63\u5728\u76d1\u542c\u6240\u6709\u6765\u81ea 7000 \u7aef\u53e3\u7684 frp \u8fde\u63a5\u3002","title":"\u90e8\u7f72 frps"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#frpc","text":"\u5728\u81ea\u5df1\u9700\u8981\u8fd0\u884c\u6bd4\u7279\u5f57\u661f\u7684\u7535\u8111\u4e0a\u90e8\u7f72 frp \u5ba2\u6237\u7aef\u3002 \u540c\u6837\uff0c\u53bb\u4e0b\u8f7d\u5bf9\u5e94\u7cfb\u7edf\u7248\u672c\u7684 frp\uff0c\u89e3\u538b\u83b7\u53d6 frpc\u3002 \u5199 frpc.ini \uff1a frpc.ini 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 [common] server_addr = \u7ed9\u5b9a\u7684IPv4\u5730\u5740/IPv6\u5730\u5740/\u57df\u540d server_port = 7000 protocol = websocket token = \u4f60\u7684\u5bc6\u7801 tls_enable = true [Remote Download] type = tcp local_ip = 127.0.0.1 local_port = 2333 remote_port = 2333 [BT Listen TCP] type = tcp local_ip = 127.0.0.1 local_port = 10400 remote_port = 10400 [BT Listen UDP] type = udp local_ip = 127.0.0.1 local_port = 10400 remote_port = 10400 \u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a server_addr \u8bbe\u7f6e\u6210\u90a3\u53f0\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u662f IPv4/IPv6/\u57df\u540d\u3002\u8bbe\u7f6e\u6210 IPv6 \u5730\u5740\u65f6\u4e0d\u9700\u8981\u52a0\u62ec\u53f7 [ \u548c ] \u3002 server_port \u548c frps.ini \u4fdd\u6301\u4e00\u81f4\u3002 protocol \u4e00\u5f8b\u9009\u62e9 websocket \u3002 token \u548c tls_enable \u5747\u4e0e frps.ini \u4fdd\u6301\u4e00\u81f4\u3002 Remote Download \u6307\u7684\u662f\u6bd4\u7279\u5f57\u661f\u7684\u8fdc\u7a0b\u4e0b\u8f7d\u670d\u52a1\uff0c\u5982\u679c\u4f60\u6bd4\u7279\u5f57\u661f\u9700\u8981\u5f00\u8fd9\u4e2a\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u628a\u4ed6\u6253\u5f00\uff0c\u7aef\u53e3\u53f7\u548c\u6bd4\u7279\u5f57\u661f\u4e0a\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\uff0c\u6bd4\u5982 2333 \u3002 BT Listen TCP/UDP \u5c31\u662f peer \u7684\u901a\u4fe1\u7aef\u53e3\uff0c\u5747\u8bbe\u7f6e\u6210 127.0.0.1 \u4e0a\u7684 10400 \uff0c\u548c\u6bd4\u7279\u5f57\u661f\u4fdd\u6301\u4e00\u81f4\u3002","title":"\u90e8\u7f72 frpc"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#frp","text":"\u73b0\u5728\u5728\u4f60\u7684\u5ba2\u6237\u7aef\u4e0a\u6267\u884c\uff1a frpc.exe -c frpc.ini \u5ba2\u6237\u7aef\u4e0a\u5e94\u8be5\u4f1a\u663e\u793a\u65e5\u5fd7\uff1a 2022/04/13 09:43:20 [I] [service.go:301] [44dfbb2737aff979] login to server success, get run id [44dfbb2737aff979], server udp port [7000] 2022/04/13 09:43:20 [I] [proxy_manager.go:144] [44dfbb2737aff979] proxy added: [Remote Download BT Listen TCP BT Listen UDP] 2022/04/13 09:43:20 [I] [control.go:180] [44dfbb2737aff979] [Remote Download] start proxy success 2022/04/13 09:43:20 [I] [control.go:180] [44dfbb2737aff979] [BT Listen TCP] start proxy success 2022/04/13 09:43:20 [I] [control.go:180] [44dfbb2737aff979] [BT Listen UDP] start proxy success 2022/04/13 09:43:21 [I] [proxy.go:481] [44dfbb2737aff979] [BT Listen UDP] incoming a new work connection for udp proxy, ws://XXX.XXX.XXX.XXX:7000/~!frp \u540c\u65f6\u670d\u52a1\u7aef\u4e0a\u5e94\u8be5\u4f1a\u7acb\u5373\u663e\u793a\u4e00\u6761\u65e5\u5fd7\uff1a 2022/04/13 09:43:21 [I] [service.go:447] [44dfbb2737aff979] client login info: ip http://XXX.XXX.XXX.XXX:7000 version [0.38.0] hostname [] os [windows] arch [amd64] \u5176\u4e2d\u7684 XXX.XXX.XXX.XXX:7000 \u5e94\u8be5\u662f\u4f60\u670d\u52a1\u7aef\u7684 IP + \u7aef\u53e3\uff0c\u800c 44dfbb2737aff979 \u662f\u4f60\u88ab\u670d\u52a1\u7aef\u5206\u914d\u7684\u7528\u6237 ID\uff0c\u6bcf\u6b21\u4f60\u8fde\u63a5\u5230\u670d\u52a1\u7aef\u65f6\uff0c\u90fd\u4f1a\u88ab\u670d\u52a1\u7aef\u968f\u673a\u5206\u914d\u4e00\u4e2a\u7528\u6237 ID\u3002 graph TB PeerA((peer1)) --> frps_10400; PeerB((peer2)) --> frps_10400; subgraph frps.exe frps_10400[0.0.0.0:10400] --> frps_7000; end frps_7000[0.0.0.0:7000] --> |websocket| frpc[frpc]; subgraph frpc and BitComit bitcomit_10400 --> frpc; end frpc --> bitcomit_10400[localhost:10400]; \u73b0\u5728\uff0c\u6240\u6709 peers \u53d1\u9001\u5230\u90a3\u53f0\u5177\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u7684 allow_ports \u7aef\u53e3\uff08\u5305\u62ec 10400 \uff09\u7684 TCP \u548c UDP \u6570\u636e\u5305\uff0c\u90fd\u4f1a\u88ab frps.exe \u901a\u8fc7\u53cd\u5411 websocket \u8f6c\u53d1\u56de\u5ba2\u6237\u7aef\u4e0a\u7684 frpc.exe \uff0c\u7136\u540e frpc.exe \u518d\u53d1\u9001\u5230 localhost:10400 \uff0c\u7531\u4e8e\u6b64\u65f6\u6bd4\u7279\u5f57\u661f\u6b63\u5728\u76d1\u542c\u672c\u5730\u7684 10400 \u7aef\u53e3\uff0c\u56e0\u6b64\u6bd4\u7279\u5f57\u661f\u5c06\u4f1a\u628a\u8fd9\u4e9b frpc.exe \u53d1\u6765\u7684\u6570\u636e\u5305\u8ba4\u4e3a\u662f peers \u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u5305\u3002","title":"\u6d4b\u8bd5 frp \u8fde\u63a5"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_4","text":"frp \u53ea\u80fd\u89e3\u51b3\u4e00\u4e2a\u65b9\u5411\u4e0a\u7684\u95ee\u9898\uff0c\u5c31\u662f peers \u8fde\u63a5\u5230\u5ba2\u6237\u7aef\uff0c\u800c\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 peers \u7684\u65b9\u5f0f\u5c06\u4f1a\u7531\u4ee3\u7406\u670d\u52a1\u5668\u5b9e\u73b0\u3002 \u4f60\u9700\u8981\u5728\u90a3\u53f0\u5177\u6709\u516c\u7f51 IP \u5730\u5740\u7684\u673a\u5668\u4e0a\u642d\u5efa\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\uff0c\u4ece\u800c\u8ba9\u4f60\u7684\u6bd4\u7279\u5f57\u661f\u80fd\u901a\u8fc7\u4ee3\u7406\u8fde\u63a5\u5230 peers\u3002 \u5177\u4f53\u642d\u5efa\u65b9\u6cd5\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd\uff0c\u7f51\u4e0a\u6709\u5f88\u591a\u6559\u7a0b\u3002\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\u8fd9\u4e2a\u4ee3\u7406\uff0c\u5e76\u4e14\u6620\u5c04\u5728\u4e86 socks5://localhost:1089 \u4e0a\u3002 \u7136\u540e\u6211\u4eec\u5728\u6bd4\u7279\u5f57\u661f\u8bbe\u7f6e\u91cc\u505a\u597d\u4ee3\u7406\u8bbe\u7f6e\u3002 \u9664\u4e86 \u4f7f\u7528\u4ee3\u7406\u670d\u52a1\u5668\u8fdb\u884c DNS \u67e5\u8be2 \u4ee5\u5916\uff0c\u5176\u4ed6\u90fd\u4e0d\u52fe\u9009\u3002\u8fd9\u76f8\u5f53\u4e8e\u4f7f\u6bd4\u7279\u5f57\u661f\u8fdb\u5165\u5168\u5c40\u4ee3\u7406\u6a21\u5f0f\u3002 \u6b64\u65f6\u6211\u4eec\u5df2\u7ecf\u7b49\u4ef7\u4e8e\u5177\u6709\u4e86\u516c\u7f51 IP\uff0c\u5e76\u4e14\u53ef\u4ee5\u4ee5\u516c\u7f51 IP \u8eab\u4efd\u4e0e\u4e92\u8054\u7f51\u8fdb\u884c\u53cc\u5411\u901a\u4fe1\u3002\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\uff0c\u8fd9\u4e2a\u65f6\u5019\u6bd4\u7279\u5f57\u661f\u7684\u706f\u5df2\u7ecf\ud83d\udfe2\u4e86","title":"\u8bbe\u7f6e\u4ee3\u7406"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_5","text":"\u56e0\u4e3a\u6bd4\u7279\u5f57\u661f\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u90fd\u662f frpc.exe \u53d1\u6765\u7684\uff0c\u56e0\u6b64\u6240\u6709\u7684 peers \u7684\u5916\u7f51 IP \u90fd\u662f 127.0.0.1 \uff0c\u5927\u91cf\u76f8\u540c IP \u53ef\u80fd\u4f1a\u89e6\u53d1\u6bd4\u7279\u5f57\u661f\u7684\u9632\u5438\u8840\u673a\u5236\uff0c\u56e0\u6b64\u628a\u4ed6\u5173\u6389\u3002","title":"\u5173\u95ed\u9632\u5438\u8840"},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_6","text":"\u73b0\u5728\u53bb\u4e0b\u8f7d\u4efb\u610f\u4e00\u4e2a BT \u79cd\u5b50\uff0c\u5982\u679c\u70b9\u5f00 \u7528\u6237 \u9009\u9879\u5361\uff0c\u53d1\u73b0\u5f88\u591a\u6765\u81ea 127.0.0.1 \u7684\u8fde\u63a5\uff0c\u5e76\u4e14\u6765\u6e90\u662f \u88ab\u52a8 \uff0c\u53d1\u8d77\u662f \u8fdc\u7a0b \uff0c\u6b64\u65f6\u5c31\u8bf4\u660e\u4f60\u5df2\u7ecf\u8bbe\u7f6e\u6b63\u786e\u4e86\u3002","title":"\u6d4b\u8bd5\u6548\u679c"},{"location":"blog/2022/220414-fk-arcaea-songlist-hash/","tags":["ida","arcaea"],"text":"\u73a9\u81ea\u5236\u7684\u5165\u95e8\u64cd\u4f5c\uff0c\u8bdd\u4e0d\u591a\u8bf4\uff0c\u76f4\u63a5\u5f00\u5e72\u3002 \u6240\u7528 IDA \u7248\u672c\uff1a IDA x64 Pro v7.0 \u6240\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\uff1a libcocos2dcpp.so \u4e8c\u8fdb\u5236\u6587\u4ef6\u7248\u672c\uff1a 3.12.6 \u63d0\u793a iOS \u90a3\u8fb9\u7684 Arc-mobile \u4e5f\u53ef\u4ee5\u7528\u540c\u6837\u601d\u8def\u8fdb\u884c\u4fee\u6539\u3002 \u5b9a\u4f4d \u9996\u5148\u5b57\u7b26\u4e32\u641c\u7d22 songlist \uff0c\u627e\u5230 songs/songlist \uff0c\u53cc\u51fb\u3002 \u53f3\u952e Xrefs graph to \uff0c\u770b\u770b\u8fd9\u4e2a\u53d8\u91cf\u88ab\u5f15\u7528\u7684\u4f4d\u7f6e\u3002 \u8fd9\u51e0\u4e2a\u51fd\u6570\u91cc\uff0c\u603b\u6709\u4e00\u4e2a\u662f\u5bf9 songlist \u505a\u54c8\u5e0c\u6821\u9a8c\u7684\uff0c\u90a3\u5c31\u4e00\u4e2a\u4e00\u4e2a\u6765\u770b\u5457\u3002\u8ba9\u6211\u4eec\u8282\u7ea6\u4e00\u70b9\u65f6\u95f4\uff0c\u5047\u8bbe\u5927\u5bb6\u8fd0\u6c14\u90fd\u5f88\u597d\uff0c\u4e00\u4e0a\u6765\u90fd\u6253\u7b97\u6765\u731c sub_9450EC \u8fd9\u4e2a\u51fd\u6570\u3002 \u53ef\u89c1\uff0c\u8fd9\u4e2a\u51fd\u6570\u4e0d\u4ec5\u4ec5\u7528\u4e86 songs/songlist \uff0c\u8fd8\u7528\u5230\u4e86 songs/packlist \u548c songs/unlocks \u7b49\u8def\u5f84\u3002\u90a3\u770b\u6765\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u4e86\uff01 \u55ef\uff0cF5\u3002 \u89c2\u5bdf\u8fd9\u4e00\u957f\u4e32 if \u8bed\u53e5\u5757\uff1a \u6700\u540e\u8fd9\u91cc\u662f\u76f4\u63a5\u8c03\u7528 exit() \u51fd\u6570\u3002\u90a3\u770b\u6765\u5c31\u662f\u8fd9\u4e86\u3002 \u56de\u5230 IDA View \uff0c\u770b\u770b exit() \u51fd\u6570\u5728\u54ea\u3002 \u627e\u5230\u8c03\u7528 exit() \u51fd\u6570\u7684\u6807\u7b7e loc_9459F0 \uff0c\u5411\u4e0a\u9ad8\u4eae\u6240\u6709\u8df3\u8f6c\u5230\u8fd9\u4e2a\u6807\u7b7e\u7684\u6307\u4ee4\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u90fd\u662f\u4e00\u4e9b CBNZ \u548c B.NE \u6307\u4ee4\uff0c\u90a3\u5c31\u5f88\u597d\u529e\u4e86\uff0c\u5168\u90e8\u6539\u6210 NOP \u5c31\u884c\u3002 \u4fee\u6539 \u76f4\u63a5\u4e0a Keypatch\u3002 \u603b\u51716\u5904\uff0c\u5168\u90e8\u6539\u6210 NOP \uff0c\u6539\u5b8c\u518d F5 \u4e00\u6b21\uff0c\u641c\u4e00\u4e0b exit \u3002 \u770b\u6765\u5df2\u7ecf\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a exit \u4e86\uff0c\u6536\u5de5\u3002","title":"\u89e3\u9664 Arcaea \u5bf9 songlist \u7b49\u6587\u4ef6\u7684\u54c8\u5e0c\u6821\u9a8c"},{"location":"blog/2022/220414-fk-arcaea-songlist-hash/#_1","text":"\u9996\u5148\u5b57\u7b26\u4e32\u641c\u7d22 songlist \uff0c\u627e\u5230 songs/songlist \uff0c\u53cc\u51fb\u3002 \u53f3\u952e Xrefs graph to \uff0c\u770b\u770b\u8fd9\u4e2a\u53d8\u91cf\u88ab\u5f15\u7528\u7684\u4f4d\u7f6e\u3002 \u8fd9\u51e0\u4e2a\u51fd\u6570\u91cc\uff0c\u603b\u6709\u4e00\u4e2a\u662f\u5bf9 songlist \u505a\u54c8\u5e0c\u6821\u9a8c\u7684\uff0c\u90a3\u5c31\u4e00\u4e2a\u4e00\u4e2a\u6765\u770b\u5457\u3002\u8ba9\u6211\u4eec\u8282\u7ea6\u4e00\u70b9\u65f6\u95f4\uff0c\u5047\u8bbe\u5927\u5bb6\u8fd0\u6c14\u90fd\u5f88\u597d\uff0c\u4e00\u4e0a\u6765\u90fd\u6253\u7b97\u6765\u731c sub_9450EC \u8fd9\u4e2a\u51fd\u6570\u3002 \u53ef\u89c1\uff0c\u8fd9\u4e2a\u51fd\u6570\u4e0d\u4ec5\u4ec5\u7528\u4e86 songs/songlist \uff0c\u8fd8\u7528\u5230\u4e86 songs/packlist \u548c songs/unlocks \u7b49\u8def\u5f84\u3002\u90a3\u770b\u6765\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u4e86\uff01 \u55ef\uff0cF5\u3002 \u89c2\u5bdf\u8fd9\u4e00\u957f\u4e32 if \u8bed\u53e5\u5757\uff1a \u6700\u540e\u8fd9\u91cc\u662f\u76f4\u63a5\u8c03\u7528 exit() \u51fd\u6570\u3002\u90a3\u770b\u6765\u5c31\u662f\u8fd9\u4e86\u3002 \u56de\u5230 IDA View \uff0c\u770b\u770b exit() \u51fd\u6570\u5728\u54ea\u3002 \u627e\u5230\u8c03\u7528 exit() \u51fd\u6570\u7684\u6807\u7b7e loc_9459F0 \uff0c\u5411\u4e0a\u9ad8\u4eae\u6240\u6709\u8df3\u8f6c\u5230\u8fd9\u4e2a\u6807\u7b7e\u7684\u6307\u4ee4\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u90fd\u662f\u4e00\u4e9b CBNZ \u548c B.NE \u6307\u4ee4\uff0c\u90a3\u5c31\u5f88\u597d\u529e\u4e86\uff0c\u5168\u90e8\u6539\u6210 NOP \u5c31\u884c\u3002","title":"\u5b9a\u4f4d"},{"location":"blog/2022/220414-fk-arcaea-songlist-hash/#_2","text":"\u76f4\u63a5\u4e0a Keypatch\u3002 \u603b\u51716\u5904\uff0c\u5168\u90e8\u6539\u6210 NOP \uff0c\u6539\u5b8c\u518d F5 \u4e00\u6b21\uff0c\u641c\u4e00\u4e0b exit \u3002 \u770b\u6765\u5df2\u7ecf\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a exit \u4e86\uff0c\u6536\u5de5\u3002","title":"\u4fee\u6539"},{"location":"blog/2022/220416-arcaea-fanmade-chart-problem/","tags":["arcaea"],"text":"\u4e00\u3001Arcade \u751f\u6210\u7684\u81ea\u5236\u8c31\uff08\u4ee5\u53ca Arcaoid \u8c31\uff09\u6ca1\u6709\u786e\u5b9a base_bpm \uff0c\u4f46\u662f songlist \u4e2d\u8fd9\u4e2a\u503c\u6bd4\u8f83\u91cd\u8981\uff0c\u8fd9\u4f53\u73b0\u5728\uff1a bpm \u5b57\u6bb5\u4e0d\u5f71\u54cd\u8c31\u9762\u57fa\u51c6\u6d41\u901f\uff0c\u53ea\u5f71\u54cd\u9009\u66f2\u754c\u9762\u7684\u663e\u793a\u6548\u679c\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4efb\u610f\u503c\uff0c\u6216\u8005\u5199\u4e00\u4e9b\u5947\u5947\u602a\u602a\u7684\u4e1c\u897f\uff08\u6bd4\u5982\u5b9a\u6570\uff09 bpm_base \u7684\u503c\u4e0e timing \u8bed\u53e5\u4e2d\u58f0\u660e\u7684 bpm \u7684\u6bd4\u503c\u51b3\u5b9a\u8be5\u6bb5 timing \u5185\u7684\u5b9e\u9645\u6d41\u901f\u500d\u7387\uff08\uff1f\uff09\u3002 \u8fd9\u4e2a\u6bd4\u503c\u8d8a\u5c0f\uff0c\u6d41\u901f\u8d8a\u5feb \u4e00\u822c\u60c5\u51b5\u4e0b\u5efa\u8bae\u628a bpm_base \u76f4\u63a5\u8bbe\u7f6e\u4e3a t=0 \u7684 timing \u8bed\u53e5\u4e2d\u89c4\u5b9a\u7684 bpm\uff0c\u56e0\u4e3a \u7edd\u5927\u90e8\u5206 \u60c5\u51b5\u4e0b\u8fd9\u4e2a\u503c\u90fd\u662f\u8fd9\u9996\u6b4c\u7684 bpm \u503c \u4f46\u5f53\u9047\u5230\u67d0\u4e9b\u8c31\u9762\u5f00\u5934\u6d41\u901f\u5f02\u5e38\uff08\u4f8b\u5982\u767d\u9b54\u738b\uff09\u65f6\uff0c\u5efa\u8bae\u628a base_bpm \u8bbe\u7f6e\u6210\u5176\u4ed6 timing \u8bed\u53e5\u4e2d\u89c4\u5b9a\u7684 bpm \u503c \u6211\u4eec\u4ee5\u767d\u9b54\u738b\u4e3a\u4f8b\uff1a pragmatism_2.aff 1 2 3 4 5 6 7 8 9 10 timing(0,87.00,2.00); timing(11034,174.00,4.00); timing(33103,348.00,1.00); timing(34482,174.00,4.00); timing(57930,87.00,2.00); timing(68964,130.50,3.00); timing(78620,174.00,4.00); timing(103447,0.00,4.00); timing(104826,87.00,4.00); ... \u6ce8\u610f\uff0c\u767d\u9b54\u738b\u7684 base_bpm \u5728 songlist \u91cc\u8bbe\u7f6e\u4e3a 174 \u3002 \u56e0\u6b64\uff0c 0~11034 \u5185\u8c31\u9762\u901f\u5ea6\u4f1a\u964d\u5230\u539f\u6765\u7684\u4e00\u534a\uff0c\u800c 103447~104826 \u5185\u8c31\u9762\u901f\u5ea6\u53d8\u6210 0 \uff08\u9aa4\u505c\u6548\u679c\uff09\u3002 \u4e8c\u3001\u867d\u7136\u5b98\u65b9\u66f2\u5b50\u7684 base.jpg \u662f 512x512\uff0c base_256.jpg \u662f 256x256\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u5c3a\u5bf8\u662f\u53ef\u4ee5\u968f\u4fbf\u8bbe\u8ba1\u7684\uff0c\u751a\u81f3\u4e0d\u662f\u6b63\u65b9\u5f62\u90fd\u884c\u3002 \u4e09\u3001\u67d0\u4e9b\u81ea\u5236\u8c31\u4e2d aff \u6587\u4ef6\u7684\u8bed\u53e5\u4e0d\u7b26\u5408 Arcaea \u89c4\u8303\u3002\u8fd9\u4e9b\u8c31\u9762\u5728 Arcade \u4e2d\u80fd\u6b63\u5e38\u64ad\u653e\uff0c\u4f46\u662f\u5728 Arcaea \u4e2d\u9009\u66f2\u5b8c\u6210\u540e\u4f1a\u7acb\u5373\u95ea\u9000\u3002\u4ee5\u4e0b\u662f\u6211\u627e\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff1a timing \u8bed\u53e5\u4e2d\uff0c beats \u53c2\u6570\u4e0d\u80fd\u4e3a 0.00 \uff0c\u5f88\u591a\u81ea\u5236\u8c31\u4e3a\u4e86\u4e0d\u51fa\u73b0\u8282\u62cd\u7ebf\u4f1a\u8bbe\u7f6e\u6210 0.00 \u6bcf\u4e2a\u8c31\u9762\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a t=0 \u7684 timing \u8bed\u53e5\uff0c\u4e14\u5176 bpm \u53c2\u6570\u4e0d\u53ef\u4e3a\u8d1f\u6570\u3002 timing \u8bed\u53e5\u4e2d\uff0c bpm \u53c2\u6570\u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570 camera \u8bed\u53e5\u7684\u7b2c 2-7 \u4e2a\u53c2\u6570\uff08\u5373 transverse , bottomzoom , linezoom , steadyangle , topzoom , angle \uff09\u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570 arc \u8bed\u53e5\u4e2d color \u53c2\u6570\u7684\u503c\u53ea\u80fd\u662f 0/1/2 \uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199 -1 arc \u8bed\u53e5\u4e2d t1 \u3001 t2 \u53c2\u6570\u7684\u503c\u5747\u4e3a\u975e\u8d1f\u6574\u6570\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199\u6210\u8d1f\u6570 \u6211\u5199\u4e86\u4e00\u4e2a\u7b80\u5355\u7684 patch \u51fd\u6570\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 def patch_line ( line : str ) -> str : timing_params = re . match ( r 'timing\\((.+),(.+),(0\\.00)\\);' , line ) camera_params = re . match ( r 'camera\\((.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+)\\);' , line ) arc_params = re . match ( r 'arc\\((.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+)\\)(.+)?;' , line ) if timing_params : t , bpm , beats = timing_params . groups () # timing \u51fd\u6570\u4e2d\uff0cbeats \u4e0d\u80fd\u4e3a 0.00\uff08\u4e00\u4e9b\u81ea\u5236\u8c31\u5e38\u89c1\u95ee\u9898\uff09\uff0c\u5426\u5219\u5fc5\u7136\u5ba2\u6237\u7aef\u95ea\u9000\uff08\u95ea\u9000\u65f6\u4e0d\u4f1a\u53d1\u51fa\u58f0\u97f3\uff09 if beats == '0.00' : beats = '4.00' # timing \u51fd\u6570\u4e2d\uff0cbpm \u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff0c\u5426\u5219\u5fc5\u7136\u5ba2\u6237\u7aef\u95ea\u9000 if '.' not in bpm or bpm . split ( '.' )[ 1 ] != '00' : bpm = f ' { float ( bpm ) : .2f } ' return f 'timing( { t } , { bpm } , { beats } ); \\n ' elif camera_params : t , * params , easing , lastingtime = camera_params . groups () for index , param in enumerate ( params ): # camera \u51fd\u6570\u7684 2-7 \u4e2a\u53c2\u6570\u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff08\u4e00\u4e9b\u81ea\u5236\u8c31\u5e38\u89c1\u95ee\u9898\uff09\uff0c\u5426\u5219\u5fc5\u7136\u5ba2\u6237\u7aef\u95ea\u9000 if '.' not in param or param . split ( '.' )[ 1 ] != '00' : params [ index ] = f ' { float ( param ) : .2f } ' return f 'camera( { t } , { \",\" . join ( params ) } , { easing } , { lastingtime } ); \\n ' elif arc_params : t1 , * params , color , FX , skylineBoolean , arc_taps = arc_params . groups () print ( arc_params . groups ()) # arc\u7684t1\u3001t2\u5747\u4e3a\u975e\u8d1f\u6574\u6570\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199\u6210\u8d1f\u6570\uff0c\u8fd9\u5c06\u5bfc\u81f4\u95ea\u9000 if t1 . startswith ( '-' ): t1 = '0' # arc\u7684\u86c7\u7684\u989c\u8272\u53c2\u6570\uff0c\u53ea\u80fd\u662f0\\1\\2\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199-1\uff0c\u8fd9\u5c06\u5bfc\u81f4\u95ea\u9000 if color == '-1' : color = '2' if not arc_taps : arc_taps = '' return f 'arc( { t1 } , { \",\" . join ( params ) } , { color } , { FX } , { skylineBoolean } ) { arc_taps } ; \\n ' else : return line def patch_aff ( song_dir ): for file in os . listdir ( song_dir ): if file . endswith ( '.aff' ): with open ( f ' { song_dir } / { file } ' , 'r' , encoding = 'utf-8' ) as f : lines = f . readlines () with open ( f ' { song_dir } / { file } ' , 'w' , encoding = 'utf-8' ) as f : f . writelines ( map ( patch_line , lines ))","title":"Arcaea \u81ea\u5236\u8c31\u79fb\u690d\u5e38\u89c1\u95ee\u9898"},{"location":"blog/2022/220417-linux-clean-up-disk-space/","tags":["linux"],"text":"\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u53ef\u4ee5\u6e05\u7406 Linux \u7684\u7edd\u5927\u90e8\u5206\u5783\u573e\u3002 \u6e05\u7406 journal \u65e5\u5fd7 \u4e00\u822c\u53ef\u4ee5\u6e05\u7406 2~3 GB\u3002 \u67e5\u770b journal \u65e5\u5fd7\u5360\u7528\u7684\u786c\u76d8\u7a7a\u95f4\uff1a journalctl -x --disk-usage \u4e00\u6b21\u6027\u6e05\u7406 journal \u65e5\u5fd7\uff1a journalctl --vacuum-size = 10M # \u6e05\u7406\u65e5\u5fd7\u5230\u53ea\u5269\u4e0b 10M journalctl --vacuum-time = 1d # \u6e05\u7406\u4e00\u5929\u524d\u7684\u65e5\u5fd7 \u6ce8\u610f \u8fd9\u4e24\u4e2a\u64cd\u4f5c\u53ea\u662f\u4e00\u6b21\u6027\u6e05\u9664\u65e5\u5fd7\uff0c \u5e76\u4e0d\u80fd\u9650\u5236\u4ee5\u540e\u7684\u65e5\u5fd7\u6587\u4ef6\u4e0d\u4f1a\u8d85\u8fc7\u8fd9\u4e2a\u5927\u5c0f \u3002\u5f88\u591a\u535a\u5ba2\u91cc\u8bf4\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5c5e\u5b9e\u662f\u8bef\u5bfc\u4eba\u3002 \u5982\u679c\u9700\u8981\u6c38\u4e45\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u9700\u8981\u4fee\u6539 /etc/systemd/journald.conf \u6587\u4ef6\u3002 \u6c38\u4e45\u9650\u5236 journal \u65e5\u5fd7\u7684\u5927\u5c0f\uff1a journald.conf [Journal] SystemMaxUse=10M # \u786c\u76d8\u4e2d\u53ea\u4fdd\u7559\u6700\u8fd1 10M \u7684\u65e5\u5fd7 RuntimeMaxUse=10M # \u5185\u5b58\u4e2d\u53ea\u4fdd\u7559\u6700\u8fd1 10M \u7684\u65e5\u5fd7 \u4e0d\u4fdd\u7559\u65e5\u5fd7 journald.conf [Journal] Storage=none # \u4e22\u5f03\u6240\u6709\u7684\u65e5\u5fd7\uff0c\u4e0d\u4fdd\u5b58\u5230\u5185\u5b58\u6216\u78c1\u76d8 \u6e05\u7406 apt-get \u7f13\u5b58 \u4e00\u822c\u53ef\u4ee5\u6e05\u7406\u6570\u767e MB\u3002 apt-get clean \u6e05\u7406 pip \u7f13\u5b58 \u4e00\u822c\u53ef\u4ee5\u6e05\u7406\u4e24\u4e09\u767e MB\u3002 rm -r ~/.cache/pip \u6e05\u7406\u65e7\u7248\u672c snap \u5305 \u4e00\u822c\u6bcf\u4e2a\u65e7\u7684 snap \u5305\u53ef\u4ee5\u6e05\u7406 100 MB\u3002 \u5217\u51fa\u6240\u6709\u7684 snap \u5305\uff1a snap list --all \u53ef\u4ee5\u89c1\u5230\u5f88\u591a\u6807\u8bb0\u4e3a disabled \u7684 snap \u5305\uff0c\u8fd9\u4e9b\u5305\u662f\u53ef\u4ee5\u76f4\u63a5\u5378\u8f7d\u7684\u3002 Name Version Rev Tracking Publisher Notes certbot 1.26.0 1952 latest/stable certbot-eff\u2713 classic cmake 3.23.0 1070 latest/stable crascit\u2713 disabled,classic cmake 3.23.1 1082 latest/stable crascit\u2713 classic core 16-2.55.2 12941 latest/stable canonical\u2713 core,disabled core 16-2.54.4 12834 latest/stable canonical\u2713 core core18 20220309 2344 latest/stable canonical\u2713 base core20 20220318 1405 latest/stable canonical\u2713 base \u5220\u9664\u8fd9\u4e9b\u91cd\u590d\u7684 snap \u5305\uff1a snap remove core --revision xxx # xxx \u662f\u8f6f\u4ef6\u7684 revision \u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u811a\u672c\u6e05\u9664\uff1a \u6765\u81ea How to Clean Up Snap Package Versions in Linux #!/bin/bash # Removes old revisions of snaps # CLOSE ALL SNAPS BEFORE RUNNING THIS set -eu snap list --all | awk '/disabled/{print $1, $3}' | while read snapname revision ; do snap remove \" $snapname \" --revision = \" $revision \" done","title":"Linux \u6e05\u7406\u78c1\u76d8\u7a7a\u95f4\u5e38\u89c1\u64cd\u4f5c"},{"location":"blog/2022/220417-linux-clean-up-disk-space/#journal","text":"\u4e00\u822c\u53ef\u4ee5\u6e05\u7406 2~3 GB\u3002 \u67e5\u770b journal \u65e5\u5fd7\u5360\u7528\u7684\u786c\u76d8\u7a7a\u95f4\uff1a journalctl -x --disk-usage \u4e00\u6b21\u6027\u6e05\u7406 journal \u65e5\u5fd7\uff1a journalctl --vacuum-size = 10M # \u6e05\u7406\u65e5\u5fd7\u5230\u53ea\u5269\u4e0b 10M journalctl --vacuum-time = 1d # \u6e05\u7406\u4e00\u5929\u524d\u7684\u65e5\u5fd7 \u6ce8\u610f \u8fd9\u4e24\u4e2a\u64cd\u4f5c\u53ea\u662f\u4e00\u6b21\u6027\u6e05\u9664\u65e5\u5fd7\uff0c \u5e76\u4e0d\u80fd\u9650\u5236\u4ee5\u540e\u7684\u65e5\u5fd7\u6587\u4ef6\u4e0d\u4f1a\u8d85\u8fc7\u8fd9\u4e2a\u5927\u5c0f \u3002\u5f88\u591a\u535a\u5ba2\u91cc\u8bf4\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5c5e\u5b9e\u662f\u8bef\u5bfc\u4eba\u3002 \u5982\u679c\u9700\u8981\u6c38\u4e45\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u9700\u8981\u4fee\u6539 /etc/systemd/journald.conf \u6587\u4ef6\u3002 \u6c38\u4e45\u9650\u5236 journal \u65e5\u5fd7\u7684\u5927\u5c0f\uff1a journald.conf [Journal] SystemMaxUse=10M # \u786c\u76d8\u4e2d\u53ea\u4fdd\u7559\u6700\u8fd1 10M \u7684\u65e5\u5fd7 RuntimeMaxUse=10M # \u5185\u5b58\u4e2d\u53ea\u4fdd\u7559\u6700\u8fd1 10M \u7684\u65e5\u5fd7 \u4e0d\u4fdd\u7559\u65e5\u5fd7 journald.conf [Journal] Storage=none # \u4e22\u5f03\u6240\u6709\u7684\u65e5\u5fd7\uff0c\u4e0d\u4fdd\u5b58\u5230\u5185\u5b58\u6216\u78c1\u76d8","title":"\u6e05\u7406 journal \u65e5\u5fd7"},{"location":"blog/2022/220417-linux-clean-up-disk-space/#apt-get","text":"\u4e00\u822c\u53ef\u4ee5\u6e05\u7406\u6570\u767e MB\u3002 apt-get clean","title":"\u6e05\u7406 apt-get \u7f13\u5b58"},{"location":"blog/2022/220417-linux-clean-up-disk-space/#pip","text":"\u4e00\u822c\u53ef\u4ee5\u6e05\u7406\u4e24\u4e09\u767e MB\u3002 rm -r ~/.cache/pip","title":"\u6e05\u7406 pip \u7f13\u5b58"},{"location":"blog/2022/220417-linux-clean-up-disk-space/#snap","text":"\u4e00\u822c\u6bcf\u4e2a\u65e7\u7684 snap \u5305\u53ef\u4ee5\u6e05\u7406 100 MB\u3002 \u5217\u51fa\u6240\u6709\u7684 snap \u5305\uff1a snap list --all \u53ef\u4ee5\u89c1\u5230\u5f88\u591a\u6807\u8bb0\u4e3a disabled \u7684 snap \u5305\uff0c\u8fd9\u4e9b\u5305\u662f\u53ef\u4ee5\u76f4\u63a5\u5378\u8f7d\u7684\u3002 Name Version Rev Tracking Publisher Notes certbot 1.26.0 1952 latest/stable certbot-eff\u2713 classic cmake 3.23.0 1070 latest/stable crascit\u2713 disabled,classic cmake 3.23.1 1082 latest/stable crascit\u2713 classic core 16-2.55.2 12941 latest/stable canonical\u2713 core,disabled core 16-2.54.4 12834 latest/stable canonical\u2713 core core18 20220309 2344 latest/stable canonical\u2713 base core20 20220318 1405 latest/stable canonical\u2713 base \u5220\u9664\u8fd9\u4e9b\u91cd\u590d\u7684 snap \u5305\uff1a snap remove core --revision xxx # xxx \u662f\u8f6f\u4ef6\u7684 revision \u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u811a\u672c\u6e05\u9664\uff1a \u6765\u81ea How to Clean Up Snap Package Versions in Linux #!/bin/bash # Removes old revisions of snaps # CLOSE ALL SNAPS BEFORE RUNNING THIS set -eu snap list --all | awk '/disabled/{print $1, $3}' | while read snapname revision ; do snap remove \" $snapname \" --revision = \" $revision \" done","title":"\u6e05\u7406\u65e7\u7248\u672c snap \u5305"}]}